<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tridash 0.9 Reference Manual</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /></head><body><div xml:lang="en" class="article" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="idm30291068512"></a>Tridash 0.9 Reference Manual</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Alexander</span> <span class="surname">Gutev</span></h3><code class="email">&lt;<a class="email" href="mailto:alex.gutev@gmail.com">alex.gutev@gmail.com</a>&gt;</code></div></div></div><hr /></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="section"><a href="#_syntax">1. Syntax</a></span></dt><dd><dl><dt><span class="section"><a href="#atom_nodes">1.1. Atom Nodes</a></span></dt><dt><span class="section"><a href="#_functors">1.2. Functors</a></span></dt><dt><span class="section"><a href="#_node_lists">1.3. Node Lists</a></span></dt><dt><span class="section"><a href="#_literals">1.4. Literals</a></span></dt></dl></dd><dt><span class="section"><a href="#_nodes">2. Nodes</a></span></dt><dd><dl><dt><span class="section"><a href="#_declaring_nodes">2.1. Declaring Nodes</a></span></dt><dt><span class="section"><a href="#_declaring_bindings">2.2. Declaring Bindings</a></span></dt><dt><span class="section"><a href="#_propagation_of_changes">2.3. Propagation of Changes</a></span></dt><dt><span class="section"><a href="#_evaluation_strategy">2.4. Evaluation Strategy</a></span></dt><dt><span class="section"><a href="#_contexts">2.5. Contexts</a></span></dt><dt><span class="section"><a href="#_failures">2.6. Failures</a></span></dt><dt><span class="section"><a href="#_input_nodes">2.7. Input Nodes</a></span></dt><dt><span class="section"><a href="#_attributes">2.8. Attributes</a></span></dt><dt><span class="section"><a href="#_subnodes">2.9. Subnodes</a></span></dt><dt><span class="section"><a href="#_node_states">2.10. Node States</a></span></dt></dl></dd><dt><span class="section"><a href="#_meta_nodes">3. Meta-Nodes</a></span></dt><dd><dl><dt><span class="section"><a href="#_defining_meta_nodes">3.1. Defining Meta-Nodes</a></span></dt><dt><span class="section"><a href="#_recursive_meta_nodes">3.2. Recursive Meta-Nodes</a></span></dt><dt><span class="section"><a href="#_outer_node_references">3.3. Outer Node References</a></span></dt><dt><span class="section"><a href="#_external_meta_nodes">3.4. External Meta-Nodes</a></span></dt><dt><span class="section"><a href="#_higher_order_meta_nodes">3.5. Higher-Order Meta-Nodes</a></span></dt><dt><span class="section"><a href="#_macro_nodes">3.6. Macro Nodes</a></span></dt><dt><span class="section"><a href="#_instances_as_targets">3.7. Instances as Targets</a></span></dt><dt><span class="section"><a href="#_target_node_transforms">3.8. Target Node Transforms</a></span></dt></dl></dd><dt><span class="section"><a href="#_modules">4. Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#_creating_modules">4.1. Creating Modules</a></span></dt><dt><span class="section"><a href="#_referencing_nodes_in_different_modules">4.2. Referencing Nodes in Different Modules</a></span></dt><dt><span class="section"><a href="#_operator_table">4.3. Operator Table</a></span></dt></dl></dd><dt><span class="section"><a href="#_core_module">5. Core Module</a></span></dt><dd><dl><dt><span class="section"><a href="#_literals_2">5.1. Literals</a></span></dt><dt><span class="section"><a href="#core-module-bindings">5.2. Bindings</a></span></dt><dt><span class="section"><a href="#_meta_node_definitions">5.3. Meta-Node Definitions</a></span></dt><dt><span class="section"><a href="#_failures_2">5.4. Failures</a></span></dt><dt><span class="section"><a href="#_builtin_failure_types">5.5. Builtin Failure Types</a></span></dt><dt><span class="section"><a href="#_arithmetic">5.6. Arithmetic</a></span></dt><dt><span class="section"><a href="#_comparison">5.7. Comparison</a></span></dt><dt><span class="section"><a href="#_logical_operators">5.8. Logical Operators</a></span></dt><dt><span class="section"><a href="#_selection_operators">5.9. Selection Operators</a></span></dt><dt><span class="section"><a href="#_types">5.10. Types</a></span></dt><dt><span class="section"><a href="#_lists">5.11. Lists</a></span></dt><dt><span class="section"><a href="#_strings_2">5.12. Strings</a></span></dt><dt><span class="section"><a href="#_dictionaries">5.13. Dictionaries</a></span></dt><dt><span class="section"><a href="#_functions">5.14. Functions</a></span></dt><dt><span class="section"><a href="#_introspection">5.15. Introspection</a></span></dt><dt><span class="section"><a href="#pattern_matching">5.16. Pattern Matching</a></span></dt><dt><span class="section"><a href="#_module_core_patterns">5.17. Module: core/patterns</a></span></dt><dt><span class="section"><a href="#_operator_table_2">5.18. Operator Table</a></span></dt></dl></dd><dt><span class="section"><a href="#_optimizations">6. Optimizations</a></span></dt><dd><dl><dt><span class="section"><a href="#_coalescing">6.1. Coalescing</a></span></dt></dl></dd><dt><span class="index"><a href="#_index">Index</a></span></dt></dl></div><p>Complete reference manual for version 0.9 of the Tridash programming
language.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_syntax"></a>1. Syntax</h2></div></div></div><p><a id="idm30278796400" class="indexterm"></a>
<a id="idm30278795248" class="indexterm"></a></p><p>Syntactically a Tridash program consists of a sequence of <span class="strong"><strong>node</strong></span>
declarations, each consisting of a single node expression. Node
expressions are divided into three types: <span class="strong"><strong>atom</strong></span> nodes, <span class="strong"><strong>functor</strong></span>
nodes and <span class="strong"><strong>literal</strong></span> nodes. Declarations are separated by a semicolon
<code class="literal">;</code> character or a line break.</p><p>Anything occurring between a <code class="literal">#</code> character and the end of the line is
treated as a comment and is discarded.</p><p><a id="idm30278789904" class="indexterm"></a>
<a id="idm30278788656" class="indexterm"></a>
<a id="idm30278787664" class="indexterm"></a>
<a id="idm30278786416" class="indexterm"></a></p><p><strong>Basic Grammar. </strong>
</p><pre class="screen">&lt;declaration&gt; = &lt;node&gt;(';' | &lt;line break&gt; | &lt;end of file&gt;)

&lt;node&gt; = &lt;functor&gt; | &lt;identifier&gt; | &lt;literal&gt;
&lt;node&gt; = '(' &lt;node&gt; ')'

&lt;functor&gt; = &lt;prefix-functor&gt; | &lt;infix-functor&gt;
&lt;prefix-functor&gt; = &lt;node&gt; '(' [&lt;node&gt; {',' &lt;node&gt;}*] ')'
&lt;infix-functor&gt; = &lt;node&gt;' '&lt;identifier&gt;' '&lt;node&gt;

&lt;literal&gt; = &lt;number&gt; | &lt;string&gt;
&lt;number&gt; = &lt;integer&gt; | &lt;real&gt;</pre><p>
</p><h3><a id="_grammar_notation"></a>Grammar Notation</h3><p>The grammar notation used in this manual adheres to the following
conventions:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Angle brackets <code class="literal">&lt;...&gt;</code> indicate named syntactical entities.
</li><li class="listitem">
<code class="literal">=</code> designates that the syntactical entity on the left is
      defined by the rules on the right. Multiple definitions of the
      same syntactical entity indicate disjunction of the rules in
      each definition.
</li><li class="listitem">
<code class="literal">|</code> indicates disjunction in a single definition.
</li><li class="listitem">
Literal tokens are enclosed in single quotes <code class="literal">'...'</code>.
</li><li class="listitem">
<code class="literal">..</code> indicates ranges, e.g. <code class="literal">'0'..'9'</code> indicates the digit
      characters in the range <code class="literal">0</code> to <code class="literal">9</code>: <code class="literal">0</code>, <code class="literal">1</code>, <code class="literal">2</code>, <code class="literal">3</code>, <code class="literal">4</code>,
      <code class="literal">5</code>, <code class="literal">6</code>, <code class="literal">7</code>, <code class="literal">8</code>, <code class="literal">9</code>.
</li><li class="listitem">
Rules enclosed in square brackets <code class="literal">[...]</code> are optional.
</li><li class="listitem">
Multiple rules enclosed in braces <code class="literal">{...}</code> are grouped into a single rule.
</li><li class="listitem">
<code class="literal">*</code> indicates zero or more repetitions of the preceding rule.
</li><li class="listitem">
<code class="literal">+</code> indicates one or more repetitions of the preceding rule.
</li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="atom_nodes"></a>1.1. Atom Nodes</h3></div></div></div><p><a id="idm30278759552" class="indexterm"></a>
<a id="idm30278758048" class="indexterm"></a>
<a id="idm30278756800" class="indexterm"></a>
<a id="idm30278755808" class="indexterm"></a>
<a id="idm30278754304" class="indexterm"></a>
<a id="idm30278753056" class="indexterm"></a>
<a id="idm30278752064" class="indexterm"></a>
<a id="idm30278750560" class="indexterm"></a>
<a id="idm30278749312" class="indexterm"></a></p><p>An <span class="strong"><strong>atom</strong></span> node consists of a single node identifier, referred to as a
symbol. Node identifiers may consist of any sequence of characters
excluding whitespace, line breaks, and the following special
characters: <code class="literal">(</code>, <code class="literal">)</code>, <code class="literal">{</code>, <code class="literal">}</code>, <code class="literal">"</code>, <code class="literal">,</code>, <code class="literal">.</code>, <code class="literal">;</code>, <code class="literal">#</code>. Node identifiers
must consist of at least one non-digit character, otherwise they are
interpreted as numbers.</p><p>The following are all examples of valid node identifiers:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">name</code>
</li><li class="listitem">
<code class="literal">full-name</code>
</li><li class="listitem">
<code class="literal">node1</code>
</li><li class="listitem">
<code class="literal">1node</code>
</li></ul></div><p>The following are not valid node identifiers:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">123</code>
</li><li class="listitem">
<code class="literal">a.b</code>
</li><li class="listitem">
<code class="literal">j#2</code> — Only the <code class="literal">j</code> is part of an identifier, the <code class="literal">#2</code> is a comment
</li><li class="listitem">
<code class="literal">1e7</code> — As the <code class="literal">e</code> indicates a real-number in scientific
      notation. <span class="emphasis"><em>See <a class="link" href="#_numbers" title="Numbers">Numbers</a></em></span>.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_functors"></a>1.2. Functors</h3></div></div></div><p><a id="idm30278724960" class="indexterm"></a>
<a id="idm30278723456" class="indexterm"></a>
<a id="idm30278722208" class="indexterm"></a></p><p>A functor node is an expression consisting of an operator node applied
to zero or more argument nodes. Syntactically the operator node is
written first followed by the comma-separated list of argument nodes
in parenthesis <code class="literal">(...)</code>.</p><p><strong>Examples. </strong>
</p><pre class="screen">op(arg)
func(arg1, arg2)
m.fn()</pre><p>
</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>A line break occurring before the closing parenthesis <code class="literal">)</code>
is not treated as a declaration separator. Instead the following line
is treated as a continuation of the current line.</p></td></tr></table></div><p><a id="idm30278716832" class="indexterm"></a>
<a id="idm30278715328" class="indexterm"></a>
<a id="idm30278714080" class="indexterm"></a></p><p>In the special case of an operator applied to two arguments, the
operator may be placed in infix position, that is between the two
argument nodes. The operator may only be an <span class="strong"><strong>atom</strong></span> node and must be
registered as an infix operator.</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Spaces between the infix operator and its operands are
required, in order to distinguish the operator from the operands. This
is due to there being few restrictions on the characters allowed in
node identifiers.</p></td></tr></table></div><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>A line break occurring between the infix operator and its
right argument is not treated as a declaration separator. However a
line break between the left argument and infix operator is treated as
terminating the declaration consisting of the left argument. The
following line is then treated as a new separate declaration.</p></td></tr></table></div><p>Functor expressions written in infix and prefix form are equivalent,
thus the following infix functor expression:</p><pre class="screen">a + b</pre><p>is equivalent to the following prefix functor expression (<span class="emphasis"><em>either
expression may be written in source code</em></span>):</p><pre class="screen">+(a, b)</pre><p><a id="idm30278706880" class="indexterm"></a>
<a id="idm30278705376" class="indexterm"></a>
<a id="idm30278704128" class="indexterm"></a>
<a id="idm30278703136" class="indexterm"></a>
<a id="idm30278701632" class="indexterm"></a>
<a id="idm30278700384" class="indexterm"></a></p><p>Each node registered as an infix operator has, associated with it, a
precedence and associativity. The precedence is a number that controls
the priority with which the operator consumes its arguments. Operators
with a higher precedence consume arguments before operators with a
lower precedence. The associativity controls whether the operands are
grouped starting from the left or right, in an expression containing
multiple instances of the same infix operator.</p><pre class="screen">a + b * c</pre><p>The <code class="literal">*</code> operator has a greater precedence than the <code class="literal">+</code> operator, thus
it consumes its arguments first, consuming the <code class="literal">b</code> and <code class="literal">c</code> arguments.</p><p>The <code class="literal">+</code> operator has a lower precedence thus it consumes its arguments
after <code class="literal">*</code>. The arguments available to it are <code class="literal">a</code> and <code class="literal">*(b, c)</code>.</p><p>As a result the infix functor expression is parsed to the following:</p><pre class="screen">+(a, *(b, c))</pre><p>Use parenthesis to control which arguments are grouped with which
operators. Thus for an infix expression to be parsed to the following,
, assuming the <code class="literal">*</code> operator has a greater precedence than <code class="literal">+</code>:</p><pre class="screen">*(+(a, b), c)</pre><p><code class="literal">a + b</code> must be surrounded in parenthesis:</p><pre class="screen">(a + b) * c</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_node_lists"></a>1.3. Node Lists</h3></div></div></div><p><a id="idm30278685520" class="indexterm"></a>
<a id="idm30278684016" class="indexterm"></a>
<a id="idm30278682768" class="indexterm"></a></p><p>Multiple declarations can be syntactically grouped into a single node
expression using the <code class="literal">{</code> and <code class="literal">}</code> delimiters. All declarations between
the delimiters are processed and accumulated into a special <span class="emphasis"><em>node
list</em></span> syntactic entity. In most contexts the node list is treated as
being equivalent to the last node expression before the closing brace
<code class="literal">}</code>, however special operators and macros may process node lists in a
different manner.</p><p><strong>Node Lists. </strong>
</p><pre class="screen">&lt;node&gt; = &lt;node list&gt;
&lt;node list&gt; = '{' &lt;declaration&gt;* '}'</pre><p>
</p><div class="warning" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/icons/warning.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Each node list must be terminated by a closing brace <code class="literal">}</code>
further on in the file otherwise a parse error is triggered.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_literals"></a>1.4. Literals</h3></div></div></div><p><a id="idm30278674608" class="indexterm"></a>
<a id="idm30278673360" class="indexterm"></a></p><p>Literal nodes include numbers and strings.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_numbers"></a>Numbers</h4></div></div></div><p><a id="idm30278670992" class="indexterm"></a>
<a id="idm30278669488" class="indexterm"></a>
<a id="idm30278668240" class="indexterm"></a></p><p>There are two types of numbers: <span class="strong"><strong>integer</strong></span>s and real-valued numbers,
referred to as <span class="strong"><strong>real</strong></span>s, which are represented as floating-point
numbers.</p><p><a id="idm30278665312" class="indexterm"></a>
<a id="idm30278663808" class="indexterm"></a>
<a id="idm30278662560" class="indexterm"></a></p><p>Integers consist of a sequence of digits in the range <code class="literal">0—9</code>,
optionally preceded by the integer’s sign. A preceding <code class="literal">-</code> indicates a
negative number. A preceding <code class="literal">+</code> indicates a positive integer, which
is the default if the sign is omitted.</p><p><strong>Integer Syntax. </strong>
</p><pre class="screen">&lt;integer&gt; = ['+'|'-']('0'..'9')+</pre><p>
</p><p><a id="idm30278657360" class="indexterm"></a>
<a id="idm30278655856" class="indexterm"></a>
<a id="idm30278654608" class="indexterm"></a>
<a id="idm30278653616" class="indexterm"></a>
<a id="idm30278652112" class="indexterm"></a>
<a id="idm30278650864" class="indexterm"></a></p><p>There are numerous syntaxes for real-valued numbers. The most basic is
the decimal syntax which comprises an <span class="strong"><strong>integer</strong></span> followed by the
decimal dot <code class="literal">.</code> character and a sequence of digits in the range
<code class="literal">0—9</code>.</p><p><strong>Decimal Real Syntax. </strong>
</p><pre class="screen">&lt;real&gt; = &lt;decimal&gt; | &lt;magnitude-exponent&gt;

&lt;decimal&gt; = &lt;integer&gt;'.'('0'..'9')+</pre><p>
</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The decimal <code class="literal">.</code> must be preceded and followed by at-least one
digit character. Thus <code class="literal">.5</code> and <code class="literal">1.</code> are not valid <span class="strong"><strong>real</strong></span> literals,
<code class="literal">0.5</code> and <code class="literal">1.0</code> have to be written instead.</p></td></tr></table></div><p><a id="idm30278641264" class="indexterm"></a>
<a id="idm30278639760" class="indexterm"></a>
<a id="idm30278638512" class="indexterm"></a></p><p>The exponent syntax allows a real-number to be specified in scientific
notation as a magnitude <span class="inlinemediaobject"><span class="phrase"></span></span> and exponent <span class="inlinemediaobject"><span class="phrase"></span></span> pair
<span class="inlinemediaobject"><span class="phrase"></span></span>. The exponent syntax comprises a real in
decimal syntax or an integer, followed by the character <code class="literal">e</code>, <code class="literal">f</code>, <code class="literal">d</code>,
or <code class="literal">l</code> which indicates the precision of the real-number, followed by
the exponent as an integer.</p><p><strong>Exponent Syntax. </strong>
</p><pre class="screen">&lt;magnitude-exponent&gt; = (&lt;decimal&gt;|&lt;integer&gt;)['e'|'f'|'d'|'l']&lt;integer&gt;</pre><p>
</p><p><code class="literal">e</code> and <code class="literal">f</code> indicate a single precision floating point number, <code class="literal">d</code>
indicates double precision and <code class="literal">l</code> indicates long precision.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_strings"></a>Strings</h4></div></div></div><p><a id="idm30278624896" class="indexterm"></a>
<a id="idm30278623392" class="indexterm"></a>
<a id="idm30278622144" class="indexterm"></a></p><p>Literal strings consist of a sequence of characters enclosed in double
quotes <code class="literal">"..."</code>.</p><p><strong>String Syntax. </strong>
</p><pre class="screen">&lt;string&gt; = '"'&lt;unicode char&gt;*'"'</pre><p>
</p><p>where <code class="literal">&lt;unicode char&gt;</code> can be any Unicode character.</p><p>A literal <code class="literal">"</code> character can appear inside a string if it is preceded
by the backslash escape character <code class="literal">\</code>.</p><p><strong>Example. </strong>
</p><pre class="screen">"John said \"Hello\""</pre><p>
</p><p><a id="idm30278614272" class="indexterm"></a>
<a id="idm30278612768" class="indexterm"></a>
<a id="idm30278611520" class="indexterm"></a></p><p>Certain escape sequence, consisting of a <code class="literal">\</code> followed by a character,
are shorthands for special characters, allowing the character to
appear in the parsed string without having to write the actual
character in the string literal.</p><div class="table"><a id="idm30278608912"></a><p class="title"><strong>Table 1. Escape Sequences</strong></p><div class="table-contents"><table class="table" summary="Escape Sequences" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; "><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"> Sequence </th><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"> Character </th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top"> ASCII Character Code (Hex)</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">\n</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Line Feed (LF) / New Line</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">0A</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">\r</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Carriage Return (CR)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">0D</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">\t</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Tab</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">09</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">\u{&lt;code&gt;}</code></p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Unicode Character</p></td><td style="" align="left" valign="top"><p><code class="literal">&lt;code&gt;</code></p></td></tr></tbody></table></div></div><br class="table-break" /><p>The <code class="literal">\u{&lt;code&gt;}</code> escape sequence is replaced with the Unicode
character with code (in hexadecimal) <code class="literal">&lt;code&gt;</code>. There must be an
opening brace <code class="literal">{</code> following <code class="literal">\u</code> otherwise the escape sequence is
treated as an ordinary literal character escape, in which <code class="literal">\u</code> is
replaced with <code class="literal">u</code>. Currently the closing brace is optional <code class="literal">}</code>, as
only the characters up to the first character that is not a
hexadecimal digit are considered part of the character code. However,
it is good practice to insert the closing brace as it clearly delimits
which characters are to be interpreted as the character code and which
characters are literal characters.</p><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="literal">\n</code>, <code class="literal">\r</code> and <code class="literal">\t</code> escape sequences can alternatively be
written as <code class="literal">\u{A}</code>, <code class="literal">\u{D}</code> and <code class="literal">\u{9}</code> respectively.</p></td></tr></table></div><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>In a future release, omitting either the opening or closing
brace, in a Unicode escape sequence, may result in a parse error.</p></td></tr></table></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_nodes"></a>2. Nodes</h2></div></div></div><p><a id="idm30278573120" class="indexterm"></a>
<a id="idm30278571872" class="indexterm"></a>
<a id="idm30278570880" class="indexterm"></a>
<a id="idm30278569632" class="indexterm"></a>
<a id="idm30278568640" class="indexterm"></a>
<a id="idm30278567392" class="indexterm"></a>
<a id="idm30278566400" class="indexterm"></a>
<a id="idm30278565152" class="indexterm"></a></p><p>Semantically a Tridash program is composed of a set of stateful
components called nodes, each holding a particular value at a given
moment in time.</p><p>Each node has a set of <span class="emphasis"><em>dependency</em></span> nodes. A change in the value of at
least one of the dependency nodes causes the node to recompute its own
value. The node is said to be an <span class="emphasis"><em>observer</em></span> of its dependency nodes,
as it actively observes and responds to changes in their
values. Similarly, each node has a set of <span class="emphasis"><em>observer</em></span> nodes which it
notifies whenever its own value changes.</p><p>This <span class="emphasis"><em>dependency</em></span> — <span class="emphasis"><em>observer</em></span> relation is referred to as a binding.</p><div class="glossary"><div class="titlepage"><div><div><h3 class="title"><a id="_glossary"></a>Glossary</h3></div></div></div><dl><dt><span class="glossterm">
dependency
</span></dt><dd class="glossdef"><p>
A node <code class="literal">a</code> is said to be a <span class="emphasis"><em>dependency</em></span> of node <code class="literal">b</code> if a
change in the value of <code class="literal">a</code> triggers a change in the value of <code class="literal">b</code>.
</p></dd><dt><span class="glossterm">
observer
</span></dt><dd class="glossdef"><p>
A node <code class="literal">a</code> is said to be an <span class="emphasis"><em>observer</em></span> of node <code class="literal">b</code> if a
change in the value of <code class="literal">b</code> triggers a change in the value of <code class="literal">a</code>.
</p></dd><dt><span class="glossterm">
binding
</span></dt><dd class="glossdef"><p>
A <span class="emphasis"><em>binding</em></span> is a relation between two nodes <code class="literal">a</code> and <code class="literal">b</code>, in
which one node <code class="literal">a</code> is a <span class="emphasis"><em>dependency</em></span> of the other <code class="literal">b</code>, and likewise
the other node <code class="literal">b</code> is its <span class="emphasis"><em>observer</em></span>.
</p></dd><dt><span class="glossterm">
ancestor
</span></dt><dd class="glossdef"><p>
A node <code class="literal">a</code> is said to be an <span class="emphasis"><em>ancestor</em></span> of a node <code class="literal">b</code> if <code class="literal">a</code>
is a <span class="emphasis"><em>dependency</em></span> of <code class="literal">b</code> or it is an <span class="emphasis"><em>ancestor</em></span> of a <span class="emphasis"><em>dependency</em></span> of <code class="literal">b</code>.
</p></dd><dt><span class="glossterm">
successor
</span></dt><dd class="glossdef"><p>
A node <code class="literal">a</code> is said to be a <span class="emphasis"><em>successor</em></span> of a node <code class="literal">b</code> if
<code class="literal">a</code> is an <span class="emphasis"><em>observer</em></span> of <code class="literal">b</code> or it is a successor of an <span class="emphasis"><em>observer</em></span> of
<code class="literal">b</code>.
</p></dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_declaring_nodes"></a>2.1. Declaring Nodes</h3></div></div></div><p><a id="idm30278532032" class="indexterm"></a>
<a id="idm30278530784" class="indexterm"></a></p><p>In the global scope, nodes are created on the first reference, that is
when their identifier first appears in source code. This can either be
a declaration consisting of the identifier itself or a functor node
declaration of which the node is an argument.</p><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="literal">self</code> identifier is reserved as an alias for the
current <span class="emphasis"><em>meta-node</em></span>, <span class="emphasis"><em>see <a class="xref" href="#_meta_nodes" title="3. Meta-Nodes">Section 3, “Meta-Nodes”</a></em></span>.</p></td></tr></table></div><p><strong>Examples. </strong>
</p><pre class="screen"># Results in the creation of node `name`
name

# Results in the creation of nodes `a` and `b`
a -&gt; b

# Results in the creation of nodes `x`, `y` and `f(x, y)`
f(x, y)</pre><p>
</p><p>This allows for a relaxed ordering of declarations. A node’s
definition need not be complete in order for it to be referenced as an
argument.</p><p>Notice that in the last example, above, a node <code class="literal">f(x, y)</code> was
created. This node corresponds to the functor node expression, thus
functors, with the exception of a few special declarations, are nodes
themselves. From now on a functor node expression refers only to
functors in which the operator refers to a function. Functor
expressions in which the operator does not refer to a function are
referred to as special declarations.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Operators which correspond to functions, such as <code class="literal">f</code> in the
example above are referred to as meta-nodes and the functor expression
as an instance of the meta-node. See <a class="xref" href="#_meta_nodes" title="3. Meta-Nodes">Section 3, “Meta-Nodes”</a>.</p></td></tr></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Nodes are also created for functors written in infix form,
e.g. for the functor <code class="literal">a + b</code>, the node <code class="literal">+(a, b)</code> is created.</p></td></tr></table></div><p>A node corresponding to <code class="literal">a -&gt; b</code> was not created. This is a bind
declaration which is treated rather specially. The <code class="literal">-&gt;</code> is not a
meta-node, that is it does not compute a value, but is a special
operator.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_declaring_bindings"></a>2.2. Declaring Bindings</h3></div></div></div><p><a id="idm30278516032" class="indexterm"></a>
<a id="idm30278514528" class="indexterm"></a>
<a id="idm30278513280" class="indexterm"></a>
<a id="idm30278512288" class="indexterm"></a>
<a id="idm30278510432" class="indexterm"></a>
<a id="idm30278509184" class="indexterm"></a></p><p>A binding between two nodes is declared with the special bind operator
<code class="literal">-&gt;</code>.</p><pre class="screen">a -&gt; b</pre><p>The above declares <code class="literal">b</code> an observer of <code class="literal">a</code> and likewise <code class="literal">a</code> a
dependency of <code class="literal">b</code>. The result is that a change in the value of <code class="literal">a</code>
will trigger a change in the value of <code class="literal">b</code>. This is an example of a
simple binding, since the value of <code class="literal">b</code> is simply set to the value of
<code class="literal">a</code>.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>In an explicit binding declaration the dependency, i.e. the
left-hand side of the <code class="literal">-&gt;</code> operator, is referred to as the <span class="emphasis"><em>source</em></span> node
and the observer, i.e. the right-hand side, is referred to as the
<span class="emphasis"><em>target</em></span> node.</p></td></tr></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The bind operator is registered as an infix operator with
precedence <span class="strong"><strong>10</strong></span> and <span class="strong"><strong>right</strong></span> associativity.</p></td></tr></table></div><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="literal">-&gt;</code> operator is in the form of an arrow which indicates the
direction of data-flow, from the node on the left to the node on the
right.</p></td></tr></table></div><p>Functional bindings involve a function of one or more argument
nodes. Functional bindings are created implicitly in functor node
expressions, with each argument node added as a dependency of the
functor node. A change in the value of at least one argument node
results in the value of the functor node being updated to the result
of reevaluating the expression with the new values of the argument
nodes.</p><p><strong>Example. </strong>
</p><pre class="screen">a + b</pre><p>
</p><p>In the example, above, a functor node <code class="literal">+(a, b)</code> is created with the
arguments <code class="literal">a</code> and <code class="literal">b</code> implicitly added as dependencies of <code class="literal">+(a, b)</code>. A
change in either <code class="literal">a</code> or <code class="literal">b</code> will result in the value of <code class="literal">+(a, b)</code>
being recomputed.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_propagation_of_changes"></a>2.3. Propagation of Changes</h3></div></div></div><p><a id="idm30278487344" class="indexterm"></a>
<a id="idm30278485840" class="indexterm"></a>
<a id="idm30278484592" class="indexterm"></a></p><p>As emphasized in the previous sections, changes in the value of a node
are propagated to its observer nodes. The new value is propagated to
each of the observers simultaneously. Each observer then proceeds to
recompute its own value in parallel with the other observers.</p><p><strong>Example. </strong>
</p><pre class="screen">a -&gt; b
a + n -&gt; c
a + 1 -&gt; d</pre><p>
</p><p>Node <code class="literal">a</code> has three observers: <code class="literal">b</code>, <code class="literal">+(a, n)</code>, <code class="literal">+(a, 1)</code>. Each of <code class="literal">b</code>,
<code class="literal">+(a, n)</code> and <code class="literal">+(a, 1)</code> receives the new value of <code class="literal">a</code> and immediately
begins computing its new value. There is no strict sequential ordering
of the updating of the values of the observer nodes. The following
orderings are all possible:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">b</code>, <code class="literal">+(a, n)</code>, <code class="literal">+(a, 1)</code>
</li><li class="listitem">
<code class="literal">+(a, n)</code>, <code class="literal">b</code>, <code class="literal">+(a, 1)</code>
</li><li class="listitem">
<code class="literal">+(a, 1)</code>, <code class="literal">+(a, n)</code>, <code class="literal">b</code>
</li></ul></div><p>Other orderings, including interleaved orderings, are also possible or
it may be that the values of all the observers are updated in
parallel.</p><p>It is important to note the semantics when nodes share a common
observer and the change in value of each node is triggered by a common
ancestor node. A node is said to be <span class="emphasis"><em>dirtied</em></span> if either its value has
changed, or at least one of its dependency nodes has been
<span class="emphasis"><em>dirtied</em></span>. If a node is <span class="emphasis"><em>dirtied</em></span>, all its observers are <span class="emphasis"><em>dirtied</em></span>,
and likewise their observers are <span class="emphasis"><em>dirtied</em></span> and so on. A node with
multiple dependencies will only recompute its value when it receives a
value change notification from each of its <span class="emphasis"><em>dirtied</em></span> dependency
nodes. Thus there is no intermediate value where the node’s value is
recomputed before all the dependency nodes have recomputed their
values.</p><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This is only the case when the changes in each of the
dependency nodes are triggered by a change in a common ancestor
node. These semantics do no apply when the changes in the dependency
nodes are not triggered by a change in a common ancestor node but by
multiple simultaneous changes in an ancestor of each dependency,
unless the changes in each ancestor are the setting of the initial
values, in which case it is treated as though they have been triggered
by a single common ancestor. See <a class="xref" href="#literal_bindings" title="Literal Bindings">Literal Bindings</a>.</p></td></tr></table></div><p><strong>Example. </strong>
</p><pre class="screen">a -&gt; b
a + 1 -&gt; c

b + c -&gt; out</pre><p>
</p><p>In the example, above, <code class="literal">a</code> is a common ancestor of dependency nodes
<code class="literal">b</code> and <code class="literal">c</code> of node <code class="literal">+(b, c)</code>. A change in <code class="literal">a</code> will <span class="emphasis"><em>dirty</em></span> the
following nodes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">a</code>
</li><li class="listitem">
<code class="literal">b</code>
</li><li class="listitem">
<code class="literal">+(a, 1)</code>
</li><li class="listitem">
<code class="literal">c</code>
</li><li class="listitem">
<code class="literal">+(b, c)</code>
</li><li class="listitem">
<code class="literal">out</code>.
</li></ul></div><p>The value of <code class="literal">+(b, c)</code> will only be recomputed when the values of both
<code class="literal">b</code> and <code class="literal">c</code> have been recomputed.</p><p>If <code class="literal">b</code> and <code class="literal">c</code> did not have the common ancestor <code class="literal">a</code>, the value of
<code class="literal">+(b, c)</code> would be computed on each change in the value of either <code class="literal">b</code>
or <code class="literal">c</code>, regardless of whether the changes in values of <code class="literal">b</code> and <code class="literal">c</code> are
triggered simultaneously or not.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_evaluation_strategy"></a>2.4. Evaluation Strategy</h3></div></div></div><p><a id="idm30278438736" class="indexterm"></a>
<a id="idm30278437488" class="indexterm"></a></p><p>The value of a node is not strictly evaluated. This means that a
node’s value is only evaluated if it is actually used. In most cases
the result of this is that node’s are evaluated lazily, that is they
are evaluated on their first use. However if it can be statically
determined that a node’s value will always be used it may be evaluated
before its first use.</p><p><strong>Example: Lazy Evaluation in If Conditions. </strong>
</p><pre class="screen">a - b -&gt; d1
b - a -&gt; d2

if(a &gt; b, d1, d2)</pre><p>
</p><p>In the example, above, <code class="literal">d1</code> is only evaluated if <code class="literal">a &gt; b</code> evaluates to
true. Likewise, <code class="literal">d2</code> is only evaluated if <code class="literal">a &gt; b</code> evaluates to
false. <code class="literal">a &gt; b</code> is always evaluated as its value is always used. In
this example, this only results in a performance optimization since
the values of node’s which are not used are not needlessly
computed. However, if <code class="literal">d1</code> or <code class="literal">d2</code> were bound to a recursive meta-node
call, <span class="emphasis"><em>see <a class="xref" href="#_meta_nodes" title="3. Meta-Nodes">Section 3, “Meta-Nodes”</a></em></span>, an infinite loop of recursive calls would
result had <code class="literal">d1</code> and <code class="literal">d2</code> not been evaluated lazily.</p><p>A node’s value is evaluated at most once. Referencing the node’s value
in more than one location will not cause it to be evaluated more than
once. This applies to functor nodes as well as atom nodes.</p><p><strong>Example: Multiple Usage of Nodes. </strong>
</p><pre class="screen"># Node `f(x, y)` is used in 2 places however it will only be evaluated
# once.

f(x, y) + a -&gt; node1
f(x, y) + b -&gt; node2</pre><p>
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_contexts"></a>2.5. Contexts</h3></div></div></div><p><a id="idm30278423120" class="indexterm"></a>
<a id="idm30278421616" class="indexterm"></a>
<a id="idm30278420368" class="indexterm"></a></p><p>The function which computes a node’s value is controlled by the node’s
context at that moment in time. The node context stores information
about the function and which of the dependency nodes are operands to
the function. Contexts are created whenever a binding between two nodes is
established.</p><p>The most simple context function is the passthrough, created when a
simple binding between two nodes is established. With this function,
the node’s value is simply set to the value of its dependency node.</p><p><strong>Passthrough Example. </strong>
</p><pre class="screen"># `b` is set to the value of `a` whenever it changes

a -&gt; b.</pre><p>
</p><p>Contexts with more complex functions, of more than one operand, are
created for each functor node expression. The created context has the
operator as the context function and the arguments as the context
operands.</p><p><strong>Functor Node Example. </strong>
</p><pre class="screen"># A functor node `+(a, b)` is created with a `+` context.
# `a` and `b` are added to the operands of the `+` context.

a + b</pre><p>
</p><p>A node can have more than one context. A context is <span class="emphasis"><em>activated</em></span>,
meaning its function is evaluated to compute the node’s value,
whenever the value of one of its operand nodes changes.</p><p><strong>Multiple Context Example. </strong>
</p><pre class="screen">a -&gt; x
b -&gt; x
c -&gt; x</pre><p>
</p><p>When the value of <code class="literal">a</code> changes, the <code class="literal">a</code> context of <code class="literal">x</code> is activated and
the value of <code class="literal">x</code> is set to the value of <code class="literal">a</code>. Similarly when <code class="literal">b</code> or
<code class="literal">c</code>'s value changes, the <code class="literal">b</code> or <code class="literal">c</code> context is activated,
respectively, and <code class="literal">x</code>'s value is set to the value of <code class="literal">b</code> or <code class="literal">c</code>,
respectively.</p><div class="warning" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/icons/warning.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>It is an error for two or more contexts of a single node to be
activated at the same time. This occurs when either both contexts have
a common operand or an operand from one context has a common
ancestor with an operand from the other context.</p><p><strong>Example 1. </strong>
</p><pre class="screen"># Node `a` is a dependency of `b`
# Node `a` is a dependency of `+(a, c)`
# Both `b` and `+(a, c)` are dependencies of `x`

a -&gt; b
b -&gt; x

a + c -&gt; x</pre><p>
</p><p>In the example, above, node <code class="literal">a</code> is a dependency node of <code class="literal">b</code> which is
an operand of the <code class="literal">b</code> context of <code class="literal">x</code>. However, node <code class="literal">a</code> is also a
dependency of node <code class="literal">+(a, c)</code> (<code class="literal">a + c</code>), which is an operand of the
<code class="literal">+(a, c)</code> context of <code class="literal">x</code>. A change in the value of <code class="literal">a</code> would trigger a
change in the value of both <code class="literal">b</code> and <code class="literal">+(a, c)</code> thus the value to which
<code class="literal">b</code> should be set is ambiguous.</p><p>Structure checking is performed at compile-time, thus the above
example, and all such scenarios, will result in a compilation error
along the lines: <code class="literal">Semantic Error: Node x has multiple contexts
activated by a single common ancestor</code>.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_two_way_bindings"></a>Two-Way Bindings</h4></div></div></div><p><a id="idm30278389728" class="indexterm"></a>
<a id="idm30278388224" class="indexterm"></a>
<a id="idm30278386976" class="indexterm"></a></p><p>A dependency of a node may also be an observer of the same node. This
allows for a two-way binding in which data may flow from either
direction. In this case only the observer nodes which are not also
operands of the node’s current context are notified of a change in the
node’s value.</p><p><strong>Example. </strong>
</p><pre class="screen"># A two-way binding is established between `a` and `b`
a -&gt; b
b -&gt; a

a -&gt; c

d -&gt; a</pre><p>
</p><p>In the above example, both <code class="literal">b</code> and <code class="literal">c</code>, which are observers of
<code class="literal">a</code>, will be notified of a change in the value of <code class="literal">a</code> triggered by a
change in the value of <code class="literal">d</code>. This will trigger a change in the value of
<code class="literal">b</code> however <code class="literal">a</code> will not be notified of this change as the change was
triggered by <code class="literal">a</code>, itself.</p><p>In the case of a change in the value of <code class="literal">a</code> triggered by a change in
the value of <code class="literal">b</code>, only the observer <code class="literal">c</code> of <code class="literal">a</code> will be notified of the
change.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_cyclic_bindings"></a>Cyclic Bindings</h4></div></div></div><p>Cyclic bindings are bindings between a set of nodes, such that there
is a path, via bindings, from a node to itself, consisting of at least
three nodes. The resulting value of the node contains a <span class="emphasis"><em>cyclic
reference</em></span> to itself.</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>A cycle comprising just a pair of nodes is interpreted as a
two-way binding rather than a cyclic binding.</p></td></tr></table></div><p><strong>Example. </strong>
</p><pre class="screen">cons(a, y) -&gt; x
cons(b, x) -&gt; y</pre><p>
</p><p>The cycle in this example involves the nodes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">x</code>
</li><li class="listitem">
<code class="literal">cons(b, x)</code>
</li><li class="listitem">
<code class="literal">y</code>
</li><li class="listitem">
<code class="literal">cons(a, y)</code>
</li></ul></div><p>In this example the value function of <code class="literal">x</code> is effectively:</p><pre class="screen">cons(a, cons(b, x))</pre><p>where <code class="literal">x</code>, is substituted with a reference to the result of the
evaluation of the expression, itself. This is well-formed since the
arguments to the <code class="literal">cons</code> meta-node are evaluated lazily.</p><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>In order for a cyclic binding to have a meaningful result, the cyclic
reference must be evaluated lazily. The following will result in an
infinite loop, as the cyclic reference to <code class="literal">i</code>, in <code class="literal">i + 1</code>, is strictly
evaluated. Currently there is no compiler warning or error.</p><pre class="screen">i + 1 -&gt; i</pre></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="literal_bindings"></a>Literal Bindings</h4></div></div></div><p><a id="idm30278356384" class="indexterm"></a>
<a id="idm30278354880" class="indexterm"></a>
<a id="idm30278353632" class="indexterm"></a>
<a id="idm30278352640" class="indexterm"></a>
<a id="idm30278351136" class="indexterm"></a>
<a id="idm30278349888" class="indexterm"></a></p><p>A binding in which the dependency is a literal value, is interpreted
as setting the initial value of a node. A special <code class="literal">init</code> context is
created, which has no operands and has the literal value as its
function.</p><p>Initial values are set on the launch of the application, and are
treated as an ordinary value change to the initial value. The initial
active context of the node is the <code class="literal">init</code> context. If a node is not
given an initial value, its initial value is a failure value, <span class="emphasis"><em>see
<a class="xref" href="#_failures" title="2.6. Failures">Section 2.6, “Failures”</a></em></span>.</p><p><strong>Examples. </strong>
</p><pre class="screen">0 -&gt; counter
"hello" -&gt; message
10.5 -&gt; threshold</pre><p>
</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The setting of the initial values of each node, is treated
as having been triggered by a single common ancestor node. <span class="emphasis"><em>See
<a class="xref" href="#_propagation_of_changes" title="2.3. Propagation of Changes">Section 2.3, “Propagation of Changes”</a> for the implications of this</em></span>.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="explicit_contexts"></a>Explicit Contexts</h4></div></div></div><p><a id="idm30278340096" class="indexterm"></a>
<a id="idm30278338528" class="indexterm"></a>
<a id="idm30278337232" class="indexterm"></a>
<a id="idm30278336208" class="indexterm"></a>
<a id="idm30278334624" class="indexterm"></a>
<a id="idm30278333312" class="indexterm"></a></p><p>The context to which a binding is established can be set explicitly
with the special <code class="literal">/context</code> operator.</p><p><strong>Syntax. </strong>
</p><pre class="screen">/context(node, context-id)</pre><p>
</p><p>The effect of this expression, when it appears as the target of a
binding, is that the binding to <code class="literal">node</code> will be established in the
context with identifier <code class="literal">context-id</code>. The identifier can be a symbol
or a functor.</p><p><strong>Example. </strong>
</p><pre class="screen"># Context `my-context` of b has a passthrough value function to the
# value of the dependency `a`.

a -&gt; /context(b, my-context)</pre><p>
</p><p>When a <code class="literal">/context</code> declaration appears in source position it is
equivalent to an ordinary reference to the <code class="literal">node</code>.</p><p>Multiple bindings to the same explicit context can be established. The
function of the context then selects the value of the first
dependency, ordered by the declaration order in the source file, which
does not <span class="emphasis"><em>fail</em></span> to evaluate to a value, <span class="emphasis"><em>see <a class="xref" href="#_failures" title="2.6. Failures">Section 2.6, “Failures”</a>.</em></span></p><p><strong>Example. </strong>
</p><pre class="screen">a -&gt; /context(node, ctx)
b -&gt; /context(node, ctx)
c -&gt; /context(node, ctx)</pre><p>
</p><p><code class="literal">node</code> evaluates to:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The value of <code class="literal">a</code> if <code class="literal">a</code> evaluates to a value.
</li><li class="listitem">
The value of <code class="literal">b</code> if <code class="literal">a</code> fails to evaluate to a value.
</li><li class="listitem">
The value of <code class="literal">c</code> if both <code class="literal">a</code> and <code class="literal">b</code> fail to evaluate to a value.
</li></ul></div><p>If <code class="literal">a</code>, <code class="literal">b</code> and <code class="literal">c</code> all fail to evaluate to a value, <code class="literal">node</code> evaluates
to the failure value of <code class="literal">c</code>.</p><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <a class="link" href="#macro-node-context" title="Macro-Node: @(node, context : '(default))"><code class="literal">@</code></a> macro from the <code class="literal">core</code> module,
which is a shorthand for the <code class="literal">/context</code> operator, is the preferred way
of establishing bindings to explicit contexts in source code.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_failures"></a>2.6. Failures</h3></div></div></div><p><a id="idm30278303920" class="indexterm"></a>
<a id="idm30278302656" class="indexterm"></a></p><p>Failures are a special type of value which represents the absence of a
value or the failure to compute a value. Failures can either be
created by <span class="emphasis"><em>conditional bindings</em></span>, in which the condition node
evaluates to <span class="emphasis"><em>false</em></span>, or by the <code class="literal">fail</code> meta-node, from the <code class="literal">builtin</code>
module.</p><p>Functions which expect an argument node to evaluate to a value will
fail if at least one argument fails. In formal terms, if the result of
a function requires that the value of an argument, which fails to
evaluate to a value, be evaluated, the entire function fails to
evaluate to a value. The following are examples of functions which
fail if at least one of argument fails: <code class="literal">+</code>, <code class="literal">-</code>, <code class="literal">*</code>, <code class="literal">/</code>.</p><p>If the result of a function is a dictionary, and a dictionary entry
fails to evaluate to a value, it is only that dictionary entry that
fails, the function still returns a dictionary.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="conditional_bindings"></a>Conditional Bindings</h4></div></div></div><p><a id="idm30278293040" class="indexterm"></a>
<a id="idm30278291504" class="indexterm"></a>
<a id="idm30278290208" class="indexterm"></a></p><p>A binding declaration <code class="literal">a -&gt; b</code> can, itself, be treated as a node, to
which an explicit binding can be established with the binding node as
the target.</p><pre class="screen">c -&gt; (a -&gt; b)</pre><p>The result of this declaration is that the binding <code class="literal">a -&gt; b</code> is only
active if the condition node <code class="literal">c</code> evaluates to a <span class="emphasis"><em>true</em></span> value, the
value of the builtin <code class="literal">True</code> node,. If <code class="literal">c</code> evaluates to <span class="emphasis"><em>false</em></span>, the
value of the builtin <code class="literal">False</code> node, <code class="literal">b</code> is not set to the value of <code class="literal">a</code>
but is set to a failure value.</p><p>A binding declaration, with a binding node as the target, changes the
function of the context of the binding to return a failure value if
the value of the condition node is <span class="emphasis"><em>false</em></span>. The binding node <code class="literal">a -&gt; b</code>
(<code class="literal">-&gt;(a, b)</code> in prefix notation), is added as a dependency of <code class="literal">b</code> and
as an operand of the context corresponding to the binding <code class="literal">a -&gt;
b</code>. The binding node is itself an observer of <code class="literal">c</code> with a simple
passthrough function. This allows you to reference the <span class="emphasis"><em>status</em></span> of the
binding by referencing the binding node, <code class="literal">a -&gt; b</code>.</p><p><strong>Example: Simple Validation. </strong>
</p><pre class="screen"># Validate that `i` has a value &gt; 0
# Propagate value of `i` to `j`

i &gt; 0 -&gt; (i -&gt; j)

# Perform some computation with `j` which is guaranteed to either be a
# numeric value greater than zero or a failure.
...</pre><p>
</p><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The bind <code class="literal">-&gt;</code> operator has <span class="emphasis"><em>right</em></span> associativity, thus the
parenthesis in <code class="literal">c -&gt; (a -&gt; b)</code> can be omitted: <code class="literal">c -&gt; a -&gt; b</code>.</p></td></tr></table></div><p>Conditional bindings to an explicit context can also be established,
<span class="emphasis"><em>see <a class="xref" href="#explicit_contexts" title="Explicit Contexts"> Explicit Contexts</a></em></span>. If a condition node evaluates to
<span class="emphasis"><em>false</em></span>, it is treated as though the corresponding dependency node has
failed to evaluate to a value. The context’s function then evaluates
to the next dependency which does not fail to evaluate to a value. If
all condition nodes evaluate to <span class="emphasis"><em>false</em></span>, the node fails to evaluate to
a value.</p><p><strong>Example: Conditional Bindings and Explicit Contexts. </strong>
</p><pre class="screen">cond1 -&gt; (a -&gt; /context(node, ctx))
cond2 -&gt; (b -&gt; /context(node, ctx))
c -&gt; /context(node, ctx)</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
If <code class="literal">cond1</code> evaluates to false, it is treated as though <code class="literal">a</code> has
      failed to evaluate to a value.
</li><li class="listitem">
If <code class="literal">cond2</code> evaluates to false, it is treated as though <code class="literal">b</code> has
      failed to evaluate to a value.
</li></ul></div><p>The net result is that <code class="literal">node</code> evaluates to:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">a</code> if <code class="literal">cond1</code> evaluates to true.
</li><li class="listitem">
<code class="literal">b</code> if <code class="literal">cond2</code> evaluates to true.
</li><li class="listitem">
<code class="literal">c</code> if neither <code class="literal">cond1</code> not <code class="literal">cond2</code> evaluate to true, or both <code class="literal">a</code>
      and <code class="literal">b</code> fail to evaluate to a value.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_explicit_failures_and_failure_types"></a>Explicit Failures and Failure Types</h4></div></div></div><p><a id="idm30278249920" class="indexterm"></a>
<a id="idm30278248384" class="indexterm"></a>
<a id="idm30278247088" class="indexterm"></a></p><p>Failure values can also be created explicitly with the
<a class="link" href="#meta-node-fail" title="Meta-Node: fail(:(type))"><code class="literal">fail</code></a> meta-node, from the <code class="literal">core</code> module. This
meta-node takes one optional argument: a value indicating the failure
type. If the failure type is not provided, the failure returned does
not have a type.</p><p><strong>Example: Explicit Failure with Type. </strong>
</p><pre class="screen"># Bind `b` to `a` if `c` is true
c -&gt; (a -&gt; /context(b, ctx))

# If `c` is false set `b` to an explicit failure
fail("my-type") -&gt; /context(b, ctx)</pre><p>
</p><p>The failure type of a <span class="emphasis"><em>failure value</em></span> can be retrieved with the
<a class="link" href="#meta-node-fail-type" title="Meta-Node: fail-type(x)"><code class="literal">fail-type</code></a> meta-node. This meta-node takes a
single argument, which if it fails to evaluate to a value, returns the
failure type associated with the failure. If the argument does not
fail to evaluate to a value, or the failure has no type associated
with it, <code class="literal">fail-type</code> returns a failure.</p><p><strong>Example: Querying Failure Type. </strong>
</p><pre class="screen"># Compare failure type of `b`, to "my-type" from example above

fail-type(c) = "my-type" -&gt; c-fails?</pre><p>
</p><p>The failure type is useful to identify the cause of a failure, since
failures are used to represent many classes of errors, such as type
errors, out of range errors, no value errors, as well as representing
special classes of values such as the empty list.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="conditional_binding_fail_type"></a>Conditionally Active Bindings based on Failure Type</h4></div></div></div><p>The special <code class="literal">/context</code> operator takes an optional third argument which
is a test function that is evaluated prior to activating the binding
after the previous binding fails. The test function is applied on a
single argument, the failure type of the previous binding. If the
function returns <span class="emphasis"><em>true</em></span> the binding is activated otherwise this
binding fails with the same failure type as the preceding binding.</p><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <a class="link" href="#macro-node-context" title="Macro-Node: @(node, context : '(default))"><code class="literal">@</code></a> macro, from the <code class="literal">core</code> module,
contains a shorthand syntax for establishing a binding to an explicit
context with a test function that compares the failure type to a given
value.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_input_nodes"></a>2.7. Input Nodes</h3></div></div></div><p><a id="idm30278228368" class="indexterm"></a>
<a id="idm30278227072" class="indexterm"></a></p><p>Input nodes are the nodes which receive the application input, which
could be the value entered in a text field of the user interface (UI),
data received from the network, etc. Input nodes do not have any
dependencies and have a special <code class="literal">input</code> context, which does not have a
value computation function. Instead the value of the node is meant to
be set explicitly through some external event.</p><p>Input nodes have to be explicitly designated as such by setting the
<code class="literal">input</code> attribute to true. <span class="emphasis"><em>See <a class="xref" href="#_attributes" title="2.8. Attributes">Section 2.8, “Attributes”</a> for more information
about node attributes</em></span>.</p><p><strong>Example: Setting Input Attribute. </strong>
</p><pre class="screen">a -&gt; b

# Designate `a` as an input node
/attribute(a, input, 1)</pre><p>
</p><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>A compilation error is triggered if a node has a dependency
that is not reachable from any input node, however has at least one
dependency that is reachable from an input node. The error is not
signalled if all of the node’s dependencies are unreachable from all
the input nodes.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_attributes"></a>2.8. Attributes</h3></div></div></div><p><a id="idm30278218176" class="indexterm"></a>
<a id="idm30278216928" class="indexterm"></a>
<a id="idm30278215920" class="indexterm"></a>
<a id="idm30278214336" class="indexterm"></a>
<a id="idm30278213024" class="indexterm"></a></p><p>Attributes are arbitrary key value pairs associated with a node, which
control various compilation options of the node. These are set using
the special <code class="literal">/attribute</code> operator.</p><p>The first argument is the node of which to set the attribute, the
second argument is the attribute key (not interpreted as a node) and
the last argument is the value, which is interpreted as a literal
value, not a node reference.</p><p><code class="literal">/attribute</code> declarations may only appear at top-level and may not
appear in binding declarations or as arguments in functor nodes.</p><p><strong>Attribute Declaration Syntax. </strong>
</p><pre class="screen">/attribute(node, attribute, value)</pre><p>
</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="literal">attribute</code> key need not be a string, it may simply be an
identifier as it is not interpreted as a node.</p></td></tr></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Attribute keys are case insensitive. Additionally a string
attribute key and an equivalent identifier key both refer to the same
attribute. Thus the following keys all refer to the same attribute:
<code class="literal">key</code>, <code class="literal">Key</code>, <code class="literal">"key"</code>, <code class="literal">"KEY"</code>.</p></td></tr></table></div><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="literal">value</code> is treated as a literal value, not a reference
to the value of a node, since attributes do not form part of the
runtime node’s state.</p></td></tr></table></div><p>The <code class="literal">input</code> attribute has already been introduced. The following is a
list of some attributes and a summary of their effect:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">input</code>
</span></dt><dd>
When set to true, designates a node as an input
    node. <span class="emphasis"><em>See <a class="xref" href="#_input_nodes" title="2.7. Input Nodes">Section 2.7, “Input Nodes”</a></em></span>.
</dd><dt><span class="term">
<code class="literal">coalescable</code>
</span></dt><dd>
When set to false, prevents the node from being
    coalesced into other nodes. <span class="emphasis"><em>See <a class="xref" href="#_coalescing" title="6.1. Coalescing">Section 6.1, “Coalescing”</a></em></span>.
</dd><dt><span class="term">
<code class="literal">removable</code>
</span></dt><dd>
When set to false, prevents the node from being
    removed.
</dd><dt><span class="term">
<code class="literal">public-name</code>
</span></dt><dd>
The name with which the runtime node can be
    referenced from non-Tridash code.
</dd><dt><span class="term">
<code class="literal">macro</code>
</span></dt><dd>
When set to true, indicates that a meta-node is a macro and should be
    invoked at compile-time. <span class="emphasis"><em>See <a class="xref" href="#_macro_nodes" title="3.6. Macro Nodes">Section 3.6, “Macro Nodes”</a></em></span>.
</dd><dt><span class="term">
<code class="literal">target-node</code>
</span></dt><dd>
Sets the name of a meta-node to use as the value
    function, in the contexts of the bindings of the meta-node
    instance (as the source node) to its arguments (as the target
    nodes). <span class="emphasis"><em>See <a class="xref" href="#_instances_as_targets" title="3.7. Instances as Targets">Section 3.7, “Instances as Targets”</a></em></span>.
</dd><dt><span class="term">
<code class="literal">target-transform</code>
</span></dt><dd>
The name of a meta-node to invoke if the
    meta-node, of which the attribute is set, appears as the target of
    a binding. <span class="emphasis"><em>See <a class="xref" href="#_instances_as_targets" title="3.7. Instances as Targets">Section 3.7, “Instances as Targets”</a></em></span>.
</dd></dl></div><p><strong>Examples. </strong>
</p><pre class="screen">/attribute(a, input, 1)
/attribute(a, public-name, "app-input")</pre><p>
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_subnodes"></a>2.9. Subnodes</h3></div></div></div><p><a id="idm30278175520" class="indexterm"></a>
<a id="idm30278174224" class="indexterm"></a>
<a id="idm30278173200" class="indexterm"></a>
<a id="idm30278171904" class="indexterm"></a>
<a id="idm30278170880" class="indexterm"></a>
<a id="idm30278169312" class="indexterm"></a>
<a id="idm30278168000" class="indexterm"></a></p><p>Subnodes are nodes which reference a value, with a particular key, out
of a dictionary of values stored in another node, referred to as the
<code class="literal">parent</code> node.</p><p>Subnodes are referenced using the special <code class="literal">.</code> operator, which is also
an infix operator. The <code class="literal">parent</code> node appears on the left-hand side and
the key on the right-hand side. The key is treated as a literal
identifier.</p><p><strong>Syntax. </strong>
</p><pre class="screen">&lt;parent node&gt;.&lt;key identifier&gt;</pre><p>
</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="literal">.</code> operator is lexically special in that spaces are not
required to separate it from its operand.</p></td></tr></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="literal">.</code> infix operator has precedence <span class="strong"><strong>1000</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div><p><strong>Example. </strong>
</p><pre class="screen">string-concat(
    person.first-name, <a id="CO1-1"></a><span><img src="images/icons/callouts/1.png" alt="1" border="0" /></span>
    person.last-name   <a id="CO1-2"></a><span><img src="images/icons/callouts/2.png" alt="2" border="0" /></span>
) -&gt; full-name</pre><p>
</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-1"><span><img src="images/icons/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>
References the <code class="literal">first-name</code> subnode of node <code class="literal">person</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-2"><span><img src="images/icons/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>
References the <code class="literal">last-name</code> subnode of node <code class="literal">person</code>.
</p></td></tr></table></div><p>An implicit two-way binding is established between the subnode and
parent node. The binding in the direction <code class="literal">parent -&gt; subnode</code> has a
value function which extracts the subnode key from the dictionary
stored in <code class="literal">parent</code>. The binding in the reverse direction, <code class="literal">subnode -&gt;
parent</code>, has a function which creates a dictionary with an entry which
has the subnode key as the key and the value of <code class="literal">subnode</code> as the
value. This allows a dictionary to be created in the <code class="literal">parent</code> node by
establishing an explicit binding with <code class="literal">subnode</code> as the
target. Multiple such bindings, with different subnodes of <code class="literal">parent</code>,
will result in a dictionary being created with an entry for each
subnode.</p><p><strong>Example: Creating Dictionaries. </strong>
</p><pre class="screen">"John" -&gt; person.first-name
"Smith" -&gt; person.last-name</pre><p>
</p><p>The value of a subnode is only evaluated when the value of its
dictionary entry is referenced. A subnode is not evaluated when only
the value of its parent node, which evaluates to the dictionary, is
referenced. <span class="emphasis"><em>See <a class="xref" href="#_evaluation_strategy" title="2.4. Evaluation Strategy">Section 2.4, “Evaluation Strategy”</a></em></span>. If a subnode fails to
evaluate to a value, it does not cause the parent node to fail to
evaluate to value. The parent node evaluates to a dictionary however
the dictionary entry, corresponding to the subnode, evaluates to a
failure. <span class="emphasis"><em>See <a class="xref" href="#_failures" title="2.6. Failures">Section 2.6, “Failures”</a></em></span>.</p><p>Accessing a non-existent entry, or accessing a subnode of a parent
node which does not evaluate to a dictionary will result in a failure.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_node_states"></a>2.10. Node States</h3></div></div></div><p><a id="idm30278137568" class="indexterm"></a>
<a id="idm30278136064" class="indexterm"></a>
<a id="idm30278134784" class="indexterm"></a>
<a id="idm30278133760" class="indexterm"></a>
<a id="idm30278132176" class="indexterm"></a>
<a id="idm30278130864" class="indexterm"></a></p><p>A binding can be established between the same node, as both the source
and target of the binding, however in different <span class="emphasis"><em>states</em></span>. The binding
thus acts as a state transition function which computes the value of
the node in its current <span class="emphasis"><em>state</em></span> given its value in the previous <span class="emphasis"><em>state</em></span>.</p><p>The special <code class="literal">/state</code> operator allows a binding to a particular state
of a node to be established.</p><p><strong>Syntax. </strong>
</p><pre class="screen">/state(node, state-identifier)</pre><p>
</p><p>where <code class="literal">node</code> is the node and <code class="literal">state-identifier</code> is a symbol
identifying the state.</p><p>When a <code class="literal">/state</code> expression appears as the target of a binding, the
binding will only take effect when <code class="literal">node</code> switches to the state with
identifier <code class="literal">state-identifier</code>. This allows <code class="literal">node</code> to appear in the
source of the binding either directly or as part of a node expression,
in which case the current value of <code class="literal">node</code> is referenced to compute its
value in the new state.</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>When a <code class="literal">/state</code> expression appears as the source of a
binding, it reduces to a reference to the value of node. It is not a
reference to the value of node in a particular state.</p></td></tr></table></div><p>The <code class="literal">/state</code> operator may also take an additional third argument, in
which case the arguments are interpreted as follows:</p><p><strong>Syntax: With Explicit <span class="emphasis"><em>From</em></span> and <span class="emphasis"><em>To</em></span> States. </strong>
</p><pre class="screen">/state(node, from-state, to-state)</pre><p>
</p><p>This specifies that the binding, of which the <code class="literal">/state</code> expression is a
target, is only active when the state of <code class="literal">node</code> switches from the
state with identifier <code class="literal">from-state</code> to the state with identifier
<code class="literal">to-state</code>.</p><p>The <code class="literal">state</code> of a node <code class="literal">n</code> is determined by the value of the special
node <code class="literal">/state(n)</code>, to which bindings can be established. The value of
<code class="literal">/state(n)</code> must be a symbol which is interpreted as a state
identifier. The symbol may name a node state to which no bindings are
established.</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Any value change of the node <code class="literal">/state(n)</code> is considered a
change in the state of the node, even if the new state is identical to
the previous state.</p></td></tr></table></div><p>Multiple bindings, to the same node state, can be declared however
bindings declared later in the source file take priority over bindings
declared earlier in the file.</p><p><strong>Example 1: Simple Counter. </strong>
</p><pre class="screen">counter + 1 -&gt; /state(counter, increment)

if (increment, '(increment), '(default)) -&gt; /state(counter)</pre><p>
</p><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="literal">'</code> operator is a macro which returns its argument as a
literal symbol, <span class="emphasis"><em>see <a class="xref" href="#literal-symbols" title="Literal Symbols"> Literal Symbols</a></em></span>.</p></td></tr></table></div><p>The first declaration establishes the binding <code class="literal">counter + 1 -&gt;
counter</code>, which is active only when <code class="literal">counter</code> switches to the
<code class="literal">increment</code> state. When <code class="literal">counter</code> switches to the <code class="literal">increment</code> state,
its value is updated to its current value incremented by one.</p><p>The second declaration establishes a binding to the node
<code class="literal">/state(counter)</code>, the value of which determines the state of
<code class="literal">counter</code>. When the node <code class="literal">increment</code> changes to true, the value of
<code class="literal">/state(counter)</code>, and thus the state of <code class="literal">counter</code>, is <code class="literal">increment</code>
resulting in the value of <code class="literal">counter</code> being incremented by one. When
<code class="literal">increment</code> is false, the state of <code class="literal">counter</code> is <code class="literal">default</code> and thus the
binding established by the first declaration has no effect.</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>A change in the value of <code class="literal">increment</code> from true to true will
result in a change in the state of <code class="literal">counter</code> from <code class="literal">increment</code> to
<code class="literal">increment</code>. Even though the new state is identical to the previous
state, it is still considered a change to the <code class="literal">increment</code> state and
thus the value of <code class="literal">counter</code> is incremented. To avoid this use the
three argument form of the <code class="literal">/state</code> operator which specifies both a
<span class="emphasis"><em>from</em></span> and <span class="emphasis"><em>to</em></span> state.</p></td></tr></table></div><p><strong>Example 2: Simple Counter with Explicit <span class="emphasis"><em>From</em></span> and <span class="emphasis"><em>To</em></span> States. </strong>
</p><pre class="screen">counter + 1 -&gt; /state(counter, default, increment)

if (increment, '(increment), '(default)) -&gt; /state(counter)</pre><p>
</p><p>Using the three argument form of the <code class="literal">/state</code> operator, the first
declaration establishes a binding, between <code class="literal">counter + 1</code> and
<code class="literal">counter</code>, which is only active when the state of <code class="literal">counter</code> changes
from <code class="literal">default</code> to <code class="literal">increment</code>. This differs from the previous example,
in which the binding is active when the state of <code class="literal">counter</code> changes
from any state to <code class="literal">increment</code>.</p><p>In this example, the value of <code class="literal">counter</code> is not incremented if the
state of <code class="literal">counter</code> changes from <code class="literal">increment</code> to <code class="literal">increment</code>, as the
binding <code class="literal">counter + 1 -&gt; counter</code> is only active when the state changes
from <code class="literal">default</code> to <code class="literal">increment</code>.</p><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <a class="link" href="#macro-node-state" title="Macro-Node: ::(node, state)"><code class="literal">::</code></a> macro from the <code class="literal">core</code> module, which is a
shorthand for the <code class="literal">/state</code> operator, is the preferred way of
establishing bindings to explicit node states. The shorthand for the
two argument form is <code class="literal">node :: state</code> and the shorthand for the three
argument form is <code class="literal">node :: from =&gt; to</code>.</p><p>The first declarations of the previous examples can thus be rewritten
as follows:</p><pre class="screen"># First Declaration of Example 1
counter + 1 -&gt; counter :: increment

# First Declaration of Example 2
counter + 1 -&gt; counter :: default =&gt; increment</pre></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_meta_nodes"></a>3. Meta-Nodes</h2></div></div></div><p><a id="idm30278062208" class="indexterm"></a>
<a id="idm30278060672" class="indexterm"></a>
<a id="idm30278059376" class="indexterm"></a>
<a id="idm30278058352" class="indexterm"></a>
<a id="idm30278056784" class="indexterm"></a>
<a id="idm30278055488" class="indexterm"></a></p><p>A meta-node is a function, of one or more arguments, which returns a
value. Meta-nodes are nodes, themselves, however without a runtime
node object. For the most part you can treat meta-nodes as ordinary
nodes, e.g. you can set meta-node attributes using the same
<code class="literal">/attribute</code> declaration. Referencing the value of a meta-node
references the meta-node function.</p><p>Meta-node identifiers reside in the same namespace as that of ordinary
nodes, that is you cannot have both an ordinary node and meta-node
with identifier <code class="literal">f</code>. If there is a meta-node <code class="literal">f</code>, the node expression
<code class="literal">f</code> references the meta-node function.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Functor nodes with the meta-node as the operator are referred to
as instances of the meta-node.</p></td></tr></table></div><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Meta-nodes are referred to as meta-nodes, since they are nodes
which describe how to compute the value of their instance
nodes. Meta-nodes may also be macro-nodes which are evaluated at
compile-time, with the result being interpreted as Tridash code.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_defining_meta_nodes"></a>3.1. Defining Meta-Nodes</h3></div></div></div><p><a id="idm30278047232" class="indexterm"></a>
<a id="idm30278045984" class="indexterm"></a>
<a id="idm30278044976" class="indexterm"></a>
<a id="idm30278027104" class="indexterm"></a>
<a id="idm30278025792" class="indexterm"></a></p><p>Meta-nodes are defined using the special <code class="literal">:</code> definition operator which
has the following syntax:</p><p><strong>Definition Operator Syntax. </strong>
</p><pre class="screen">name(arg1, arg2, ...) : {
    declarations*
}</pre><p>
</p><p>The meta-node identifier, <code class="literal">name</code>, appears on the left-hand side of the
<code class="literal">:</code> operator followed by the comma-separated list of arguments in
parenthesis. Each item, at position <span class="emphasis"><em>n</em></span>, of the argument list is the
identifier of the local node to which the <span class="emphasis"><em>n</em></span><sup>th</sup> argument is bound.</p><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Identifiers beginning with <code class="literal">/</code>, followed by an alphanumeric
character, are reserved for special operators. A meta-node cannot have
the same identifier as a special operator. Currently no warning or
compilation error is triggered, if the identifier is a reserved
identifier but does not name an existing special operator, however
that may change in a future release.</p></td></tr></table></div><p>The body consists of a sequence of ordinary node declarations enclosed
in braces <code class="literal">{ ... }</code>. The braces are simply a way of grouping multiple
declarations into a single expression, <span class="emphasis"><em>See <a class="xref" href="#_node_lists" title="1.3. Node Lists">Section 1.3, “Node Lists”</a></em></span>. If the
body of the meta-node contains just a single expression, the braces
may be omitted.</p><p>The meta-node function returns the value of the last node in the body.</p><p><strong>Example. </strong>
</p><pre class="screen"># Returns 1 + `n`

1+(n) : n + 1</pre><p>
</p><p><strong>Factorial Example. </strong>
</p><pre class="screen"># Computes the factorial of `n`

factorial(n) : {
    case (
         n &gt; 1 : n * factorial(n - 1),
         1
    )
}</pre><p>
</p><p>The following example demonstrates that the body can contain any valid
node declaration:</p><p><strong>Fibonacci Example. </strong>
</p><pre class="screen">fib(n) : {
    fib(n - 1) -&gt; fib1
    fib(n - 2) -&gt; fib2

    case (
        n &lt;= 1 : 1,
        fib1 + fib2
    )
}</pre><p>
</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Meta-nodes must be defined before they can occur as
operators in functors.</p></td></tr></table></div><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Meta-node bodies are only processed after all global (or
the scope in which the meta-node declaration occurs) declarations in
the same file have been processed. This allows a meta-node <code class="literal">g</code> to be
used within the body of another meta-node <code class="literal">f</code> even if the definition
of <code class="literal">g</code> appears after the definition of <code class="literal">f</code>. Effectively this allows
for mutual recursion.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_optional_arguments"></a>Optional Arguments</h4></div></div></div><p><a id="idm30278003584" class="indexterm"></a>
<a id="idm30278001984" class="indexterm"></a>
<a id="idm30278000672" class="indexterm"></a></p><p>A node in the argument list, of a meta-node definition, may also be of
the form <code class="literal">name : value</code>. This designates that the argument, which is
bound to local node <code class="literal">name</code>, is optional. If it is omitted, in an
instance of the meta-node, the local argument node is set to <code class="literal">value</code>
instead.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p><code class="literal">value</code> is processed in the global scope as the meta-node
definition is processed. Thus <code class="literal">value</code> cannot (as of yet), refer to the
preceding argument nodes of the meta-node.</p></td></tr></table></div><p>The <code class="literal">value</code> may be omitted, written in prefix form <code class="literal">:(name)</code>, in which
case if the argument is omitted, the local argument node is set to a
failure, <span class="emphasis"><em>see <a class="xref" href="#_failures" title="2.6. Failures">Section 2.6, “Failures”</a></em></span>, of type <a class="link" href="#node-no-value" title="Failure Type Node: No-Value"><code class="literal">No-Value</code></a>.</p><p><strong>Example. </strong>
</p><pre class="screen"># Increment `x` by 1 or given delta

inc(x, d : 1) : x + d

# Increment `a` by default delta 1
inc(a)

# Increment `b` by explicit delta 2
inc(b, 2)</pre><p>
</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Optional arguments may only be followed by optional
arguments or a rest argument. An optional argument may not be followed
by a required argument.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_rest_arguments"></a>Rest Arguments</h4></div></div></div><p><a id="idm30277987056" class="indexterm"></a>
<a id="idm30277985520" class="indexterm"></a>
<a id="idm30277984224" class="indexterm"></a></p><p>The last node in the argument list, of a meta-node definition, may
also be of the form <code class="literal">..(name)</code>. This designates that the local node
<code class="literal">name</code> is bound to the list containing the remaining arguments, on
which the meta-node is applied, after the last optional or required
argument. This allows for a variable number of arguments.</p><p><strong>Example. </strong>
</p><pre class="screen"># Add `n` to each remaining argument

add-n(n, ..(xs)) : {
    inc(x) : x + n
    map(inc, xs)
}</pre><p>
</p><p>See <a class="xref" href="#_lists" title="5.11. Lists">Section 5.11, “Lists”</a> for the documentation of lists and the list processing
functions.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="local_nodes"></a>Local Nodes</h4></div></div></div><p><a id="idm30277976672" class="indexterm"></a>
<a id="idm30277975136" class="indexterm"></a>
<a id="idm30277973824" class="indexterm"></a></p><p>Nodes local to the meta-node’s definition may only be referenced from
within the definition itself even if they have the same identifiers as
global nodes. Local nodes are created for each of the argument nodes.</p><p>A node reference, within the definition of a meta-node, primarily
refers to the local node. If there is no local node with that
identifier, it refers to the node in the enclosing scope. If the
enclosing scope does not contain a node with that identifier, the
scope’s enclosing scope is searched until the global scope is
reached. If the node is not found in any enclosing scope a compilation
error is triggered.</p><p>Local nodes are created if they appear as the target of a binding,
whether implicit or explicit. This is the means by which local nodes,
storing intermediate results are created. Local nodes are also created
for each top-level atom node declaration, <span class="emphasis"><em>See <a class="xref" href="#atom_nodes" title="1.1. Atom Nodes">Section 1.1, “Atom Nodes”</a></em></span>.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The node creation rules inside meta-node definitions differ from
the node creation rules at the global scope.</p></td></tr></table></div><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>A global node, with the same identifier as a local node, can be
referenced using the outer <code class="literal">..</code> operator.</p></td></tr></table></div><p><strong>Example: Local Nodes. </strong>
</p><pre class="screen">a + b -&gt; x
x + y -&gt; n

addx(n) : {
    # `n` refers to the local argument node `n`, not the global `n`
    # `x` refers to the global node `x`
    n + x
}</pre><p>
</p><p><strong>Example: Meta-Nodes. </strong>
</p><pre class="screen">1-(n) : n - 1

factorial(n) :
    case (
        # The `1-` refers to the global `1-` meta-node
        n &gt; 1 : n * factorial(1-(n)),
        1
    )</pre><p>
</p><p><strong>Example: Local nodes storing intermediate results. </strong>
</p><pre class="screen">x + 1 -&gt; next

factorial(n) :

    # A local node `next` is created since it appears as the target of
    # a binding. `next` does not refer to the global node of the same
    # name.

    n - 1 -&gt; next

    case (
        n &gt; 1 : n * factorial(next),
        1
    )</pre><p>
</p><p><strong>Example: Local Node Declarations. </strong>
</p><pre class="screen">cycle(a, b) : {
    x; y;  # Declare local nodes `x` and `y` <a id="CO2-1"></a><span><img src="images/icons/callouts/1.png" alt="1" border="0" /></span>

    cons(a, y) -&gt; x
    cons(b, x) -&gt; y

    x
}</pre><p>
</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO2-1"><span><img src="images/icons/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>
Top-level atom node declarations, resulting in the creation of
local nodes <code class="literal">x</code> and <code class="literal">y</code>.
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_self_node"></a>Self Node</h4></div></div></div><p><a id="idm30277955232" class="indexterm"></a>
<a id="idm30277953696" class="indexterm"></a>
<a id="idm30277952400" class="indexterm"></a></p><p>The special <code class="literal">self</code> node is a local node which represents the
meta-node’s value. This node can be used to set the value, returned by
the meta-node, using explicit bindings.</p><p>When an explicit binding to <code class="literal">self</code> is established, the meta-node no
longer returns the value of the last node in its definition.</p><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>A meta-node may not have more than a single context, <span class="emphasis"><em>see
<a class="xref" href="#_contexts" title="2.5. Contexts">Section 2.5, “Contexts”</a></em></span>, as it is ambiguous which context’s value
function to use as the meta-node function.</p></td></tr></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>In the absence of an explicit binding to <code class="literal">self</code>, the last node
in the meta-node’s definition is implicitly bound to <code class="literal">self</code>.</p></td></tr></table></div><p><strong>Example. </strong>
</p><pre class="screen">factorial(n) : {
    n * factorial(n - 1) -&gt; next
    case (n &gt; 1 : next, 1) -&gt; self <a id="CO3-1"></a><span><img src="images/icons/callouts/1.png" alt="1" border="0" /></span>
}</pre><p>
</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO3-1"><span><img src="images/icons/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>
Explicit binding to <code class="literal">self</code>.
</p></td></tr></table></div><p>In the example, above, the value returned by the <code class="literal">factorial</code> meta-node
is set by an explicit binding to the <code class="literal">self</code> node. The meta-node no
longer evaluates to the value of the last node in the declaration
list.</p><p>The <code class="literal">self</code> node is particularly useful for creating a dictionary of
values to which the meta-node evaluates to, <span class="emphasis"><em>see <a class="xref" href="#_subnodes" title="2.9. Subnodes">Section 2.9, “Subnodes”</a></em></span>:</p><p><strong>Example: Creating Dictionaries. </strong>
</p><pre class="screen">Person(first, last): {
    first -&gt; self.first-name
    last -&gt; self.last-name
}</pre><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_nested_meta_nodes"></a>Nested Meta-Nodes</h4></div></div></div><p><a id="idm30277933408" class="indexterm"></a>
<a id="idm30277931872" class="indexterm"></a>
<a id="idm30277930576" class="indexterm"></a></p><p>The body of a meta-node can contain other meta-node definitions nested
inside it. These meta-nodes are local to the body, and can only be
used inside it, even if the same meta-node identifier appears in an
expression outside the body. If a meta-node with the same identifier
is already defined at global scope, the nested meta-node shadows it in
the scope of the body. This means that references to the meta-node
within the body refer to the nested meta-node and not the global node.</p><p><strong>Example: Factorial with Nested Tail-Recursive Helper Meta-Node. </strong>
</p><pre class="screen">factorial(n) : {
    # `iter` is local to `factorial`
    iter(n, acc) : {
        case (
            n &gt; 1 : iter(n - 1, n * acc),
            acc
        )
    }

    iter(n, 1)
}</pre><p>
</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_recursive_meta_nodes"></a>3.2. Recursive Meta-Nodes</h3></div></div></div><p><a id="idm30277925184" class="indexterm"></a>
<a id="idm30277924000" class="indexterm"></a>
<a id="idm30277922976" class="indexterm"></a>
<a id="idm30277921680" class="indexterm"></a></p><p>Meta-nodes may be recursive and mutually recursive, i.e. when a
meta-node <code class="literal">f</code> contains an instance of another meta-node <code class="literal">g</code> in its
definition, and <code class="literal">g</code> contains an instance of <code class="literal">f</code> in its definition.</p><p>Each call to a meta-node consumes an amount of stack space. Further
calls, within the meta-node, increase the amount of stack space if
they are strictly evaluated. However, if a call to a meta-node is
conditionally evaluated, i.e. lazily, it does not increase the amount
of stack space used, since a <span class="emphasis"><em>thunk</em></span> is returned, rather than the
final result, thus freeing the amount of stack space used by the
current call. <span class="emphasis"><em>See <a class="xref" href="#_evaluation_strategy" title="2.4. Evaluation Strategy">Section 2.4, “Evaluation Strategy”</a></em></span>.</p><p>The following are examples of meta-nodes in which one or more of the
arguments are evaluated lazily:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">
In the <code class="literal">if</code> meta-node, from the <a class="link" href="#_core_module" title="5. Core Module"><code class="literal">core</code></a> module, the <code class="literal">if-true</code> and
<code class="literal">if-false</code> arguments are evaluated lazily since only one of the
arguments is actually evaluated, depending on the value of the first
<code class="literal">test</code> argument. The <code class="literal">test</code> argument is evaluated strictly as its
value is always required in order to compute the return value of the
meta-node.
</p><pre class="screen">if(test, if-true, if-false)</pre></li><li class="listitem"><p class="simpara">
In the <code class="literal">and</code> and <code class="literal">or</code> meta-nodes, from the <a class="link" href="#_core_module" title="5. Core Module"><code class="literal">core</code></a>
  module, the first argument is strictly evaluated however the second
  is lazily evaluated, as whether it is actually evaluated depends on
  the value of the first argument.
</p><pre class="screen">and(a, b)
or(a, b)</pre></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_outer_node_references"></a>3.3. Outer Node References</h3></div></div></div><p><a id="idm30277902000" class="indexterm"></a>
<a id="idm30277900720" class="indexterm"></a>
<a id="idm30277899696" class="indexterm"></a>
<a id="idm30277898112" class="indexterm"></a>
<a id="idm30277896784" class="indexterm"></a></p><p>The value of a node, declared in the global scope, can be referenced
from within a meta-node, either directly by its identifier, as
described in <a class="xref" href="#local_nodes" title="Local Nodes">Local Nodes</a>, or with the outer node reference
operator (<code class="literal">..</code>). This is a special operator which takes a node
identifier as an argument and searches for a node with that
identifier, in each enclosing scope, starting from the scope in which
the meta-node is defined. The first node found is referenced.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>It is not necessary for the node to have been declared prior to
the meta-node definition, as meta-node definitions are only processed
after all declarations in the source file have been
processed. However, in general the node should be declared in the same
source file.</p></td></tr></table></div><p><strong>Example. </strong>
</p><pre class="screen">n

# ..(n) references the global node `n`
addn(n): n + ..(n)</pre><p>
</p><p>Referenced outer nodes, whether implicitly or by the <code class="literal">..</code> operator,
are treated as additional hidden arguments, that are added to the
argument list of each instance of the meta-node. The result is that
any change in the values of the referenced nodes, will trigger a value
update in each instance of the meta-node.</p><p>The previous example can be thought of as:</p><pre class="screen"># Not valid syntax.

# Illustrates that outer node references are equivalent to additional
# arguments.

addn(n, ..(n)) : n + ..(n)</pre><p>Thus the value of <code class="literal">n</code> is appended to the argument list of all
instances of <code class="literal">addn</code>, e.g. <code class="literal">addn(node)</code> becomes <code class="literal">addn(node, n)</code>.</p><p>Meta-nodes reference all outer nodes referenced by the meta-nodes
which are used in their body. In the previous example, if a meta-node
makes use of <code class="literal">addn</code>, it will also reference the node <code class="literal">n</code> declared in
the global scope.</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Whilst the value of an outer-node can be referenced from
within the body of a meta-node, bindings with the node as the target
cannot be established, from within the body of the meta-node.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_external_meta_nodes"></a>3.4. External Meta-Nodes</h3></div></div></div><p><a id="idm30277880368" class="indexterm"></a>
<a id="idm30277879120" class="indexterm"></a>
<a id="idm30277878128" class="indexterm"></a>
<a id="idm30277876528" class="indexterm"></a>
<a id="idm30277875200" class="indexterm"></a></p><p>External meta-nodes are meta-nodes without a definition, which are
used to invoke functions defined outside of Tridash code. The special
<code class="literal">/external</code> declaration creates a meta-node without a definition.</p><p><strong>Syntax. </strong>
</p><pre class="screen">/extern(id, args...)</pre><p>
</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">id</code>
</p>
</td><td style="" valign="top">
<p>
The meta-node identifier
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">args</code>
</p>
</td><td style="" valign="top">
<p>
The argument list
</p>
</td></tr></tbody></table></div><p>The argument list has to be provided in order for the arity of the
meta-node to be known. The same rules apply for external meta-node
argument lists as for ordinary meta-node argument lists. Symbols
designate required arguments, arguments of the form <code class="literal">:(arg, value)</code>
designate optional arguments and <code class="literal">..(rest)</code> designates a rest
argument. The argument identifiers, however, do not name local nodes.</p><p>An external definition for the meta-node has to be provided, and
linked with the generated code. In the JavaScript backend, instances
of the meta-node are compiled to a call to the JavaScript function
with the name stored in the <code class="literal">js-name</code> attribute. If the <code class="literal">js-name</code>
attribute is not set, an error is triggered.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_higher_order_meta_nodes"></a>3.5. Higher-Order Meta-Nodes</h3></div></div></div><p><a id="idm30277857840" class="indexterm"></a>
<a id="idm30277856592" class="indexterm"></a>
<a id="idm30277855584" class="indexterm"></a>
<a id="idm30277854272" class="indexterm"></a></p><p>An atom node expression consisting of the meta-node itself references
the meta-node’s function as a value. This function can be passed to
other meta-nodes as an argument, or bound to another node.</p><p>In a functor expression, in which the operator is not a meta-node but
is an ordinary node, the function stored in the node’s value is
called. If the operator node does not evaluate to a function, the
entire functor node evaluates to a failure of type
<a class="link" href="#node-type-error" title="Failure Type Node: Type-Error"><code class="literal">Type-Error</code></a>, <span class="emphasis"><em>see <a class="xref" href="#_failures" title="2.6. Failures">Section 2.6, “Failures”</a></em></span>. If the function
is invoked with more, or less, arguments than it expects,the functor
node evaluates to a failure of type <a class="link" href="#node-arity-error" title="Failure Type Node: Arity-Error"><code class="literal">Arity-Error</code></a></p><p><strong>Example: Binding Meta-Node to other Nodes. </strong>
</p><pre class="screen">inc(x) : x + 1

inc -&gt; f   <a id="CO4-1"></a><span><img src="images/icons/callouts/1.png" alt="1" border="0" /></span>
f(a) -&gt; x  <a id="CO4-2"></a><span><img src="images/icons/callouts/2.png" alt="2" border="0" /></span></pre><p>
</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO4-1"><span><img src="images/icons/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>
Value function of <code class="literal">inc</code> meta-node bound to <code class="literal">f</code> node.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO4-2"><span><img src="images/icons/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>
Function stored in <code class="literal">f</code> meta-node applied on argument <code class="literal">a</code>.
</p></td></tr></table></div><p><span class="emphasis"><em>See <a class="xref" href="#_outer_node_references" title="3.3. Outer Node References">Section 3.3, “Outer Node References”</a> for an example in which a meta-node is
passed as an argument to another meta-node.</em></span></p><p>The function of a meta-node which does not have optional arguments or
outer nodes is effectively a constant, as is the case with the <code class="literal">inc</code>
meta-node in the example above. If, however, the meta-node references
outer nodes, a reference to the meta-node’s function also references
the values of the outer nodes. As such, if a node is bound to the
meta-node’s function, a binding between the outer nodes and the node
is also established.</p><p><strong>Example: Reference Meta-Node Function with Outer Nodes. </strong>
</p><pre class="screen"># Increments `x` by the global `delta`
inc(x) : x + delta

inc -&gt; f
f(a) -&gt; x</pre><p>
</p><p>In the example, above, node <code class="literal">f</code> is bound to the value function of
<code class="literal">inc</code>. However, since <code class="literal">inc</code> references the global <code class="literal">delta</code> node, a
binding between <code class="literal">f</code> and <code class="literal">delta</code> is also established. The value
function of <code class="literal">f</code> creates a function which invokes the <code class="literal">inc</code> with the
value of <code class="literal">delta</code>. As a result, when the value of <code class="literal">delta</code> changes, the
value of <code class="literal">f</code> is recomputed, and likewise the value of <code class="literal">f(a)</code> is
recomputed.</p><p>The same semantics apply for optional arguments with default values
which are not constant literals.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_macro_nodes"></a>3.6. Macro Nodes</h3></div></div></div><p><a id="idm30277824720" class="indexterm"></a>
<a id="idm30277823472" class="indexterm"></a>
<a id="idm30277822480" class="indexterm"></a>
<a id="idm30277820896" class="indexterm"></a>
<a id="idm30277819600" class="indexterm"></a>
<a id="idm30277818576" class="indexterm"></a>
<a id="idm30277817008" class="indexterm"></a>
<a id="idm30277815712" class="indexterm"></a></p><p>A macro-node is a meta-node which is evaluated at compile-time with
the result interpreted as a Tridash node declaration.</p><p>A meta-node is marked as a macro-node by setting the <code class="literal">macro</code> attribute
to true. Once set, the meta-node’s function will be evaluated when
each instance of the meta-node is processed. The arguments passed to
the function are the raw argument node expressions of the functor node
expression.</p><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Attributes are set on meta-nodes in the same way as they are set for
ordinary nodes. The <code class="literal">macro</code> attribute of a meta-node <code class="literal">f</code> is set to
<span class="emphasis"><em>true</em></span>, with the following declaration:</p><pre class="screen">/attribute(f, macro, 1)</pre></td></tr></table></div><p>Atom node expressions are represented by a special symbol type and
functor node expressions are represented as a list with the operator
in the first element of the list.</p><p>The return value of the meta-node function is processed as though it
is a parsed node declaration appearing in source code.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="literal-symbols"></a>Literal Symbols</h4></div></div></div><p><a id="idm30277806560" class="indexterm"></a>
<a id="idm30277805312" class="indexterm"></a>
<a id="idm30277804288" class="indexterm"></a>
<a id="idm30277802704" class="indexterm"></a>
<a id="idm30277801392" class="indexterm"></a></p><p>The special <code class="literal">/quote</code> operator returns its argument, treated as a
literal symbol rather than a node expression.</p><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="literal">'</code> macro from the core module is the preferred shorthand for
the <code class="literal">/quote</code> operator.</p></td></tr></table></div><p><strong>Example. </strong>
</p><pre class="screen"># This is interpreted as the literal symbol `x` rather than the node
# with identifier `x`.

/quote(x)

# The following is a shorthand for the above
'(x)</pre><p>
</p><p>These can be used inside macro nodes to insert literal node or
operator names.</p><p><strong>Example: Definition of <code class="literal">'</code> macro. </strong>
</p><pre class="screen">'(thing) :
    list(/quote(/quote), thing)

/attribute(', macro, 1)</pre><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="node_references"></a>Node References</h4></div></div></div><p><a id="idm30277791344" class="indexterm"></a>
<a id="idm30277790048" class="indexterm"></a>
<a id="idm30277789024" class="indexterm"></a>
<a id="idm30277787440" class="indexterm"></a>
<a id="idm30277786128" class="indexterm"></a></p><p>Generally a macro-node expands to a declaration involving some other
meta-node. The meta-node might not be located in the same module, <span class="emphasis"><em>see
<a class="xref" href="#_modules" title="4. Modules">Section 4, “Modules”</a></em></span>, as the module in which the macro-node instance
occurs. Using the quote operator to generate a declaration involving
the meta-node may result in a compilation error, if the meta-node is
not present in the module in which the macro-node instance occurs, or
may result in a node declaration involving an entirely different
meta-node, if the module contains a node with the same identifier.</p><p>Node objects can be referenced directly with the node reference
operator, <code class="literal">&amp;</code>. When the declaration returned by a macro-node contains
a raw node object, no node lookup is done and the raw node object is
used as though it has been returned by node lookup. This is useful in
macros as the node is looked up once in the module containing the
macro-node’s definition.</p><p><strong>Example: Definition of <code class="literal">&lt;-</code> Macro. </strong>
</p><pre class="screen">&lt;-(target, src) :
    list(&amp;(-&gt;), src, target)

/attribute(&lt;-, macro, 1)</pre><p>
</p><p>The <code class="literal">&lt;-</code> macro function, in the example above, returns a functor
expression where the operator is the node object <code class="literal">-&gt;</code>. When the
functor expression is processed, the operator is taken to be the <code class="literal">-&gt;</code>
node, rather than the node with identifier <code class="literal">-&gt;</code> in the module in which
the instance is processed.</p><p>Any node can be referenced including ordinary nodes and
macro-nodes. Special operators, however, cannot be referenced and have
to be returned as quoted symbols instead. There is no issue with
directly quoting the special operator’s identifier, in expressions
returned by macros, as there is for meta-nodes since the meaning of a
special operator cannot be overridden and does not change with the
module. Most of the <span class="emphasis"><em>special operators</em></span> mentioned till this point,
which are not an identifier prefixed with <code class="literal">/</code>, such as <code class="literal">-&gt;</code>, <code class="literal">:</code>, <code class="literal">&amp;</code>,
<code class="literal">.</code>, <code class="literal">..</code> are actually builtin macro nodes which expand to an internal
special declaration, thus can be referenced with the <code class="literal">&amp;</code>
operator. Special operators beginning with <code class="literal">/</code>, such as <code class="literal">/attribute</code>,
<code class="literal">/operator</code>, <code class="literal">/module</code> are actual special operators and cannot be referenced
with <code class="literal">&amp;</code>.</p><p>When a raw node referenced occurs in code which is intended to be
evaluated at runtime, rather than during macro expansion, the runtime
node object, of the node, is referenced. The nature of this object is
dependent on the backend.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_instances_as_targets"></a>3.7. Instances as Targets</h3></div></div></div><p><a id="idm30277763616" class="indexterm"></a>
<a id="idm30277762368" class="indexterm"></a>
<a id="idm30277761360" class="indexterm"></a>
<a id="idm30277759776" class="indexterm"></a>
<a id="idm30277758464" class="indexterm"></a></p><p>By default, a meta-node instance appearing as the target of a binding,
that is on the right hand side of the <code class="literal">-&gt;</code> operator, will result in a
compilation error. You may have noticed, however, that some meta-nodes
in the <a class="link" href="#_core_module" title="5. Core Module"><code class="literal">core</code></a> module, can also appear as targets of
a binding, particularly <a class="link" href="#meta-node-to-int" title="Meta-Node: to-int(x)"><code class="literal">to-int</code></a>,
<a class="link" href="#meta-node-to-real" title="Meta-Node: to-real(x)"><code class="literal">to-real</code></a> and <a class="link" href="#meta-node-to-string" title="Meta-Node: to-string(x)"><code class="literal">to-string</code></a>. This is achieved by setting the <code class="literal">target-node</code>
attribute.</p><p>The <code class="literal">target-node</code> attribute stores the meta-node, which is applied on
the value of the meta-node instance, in order to compute the value of
the arguments. When the <code class="literal">target-node</code> attribute is set, a binding is
established between the meta-node instance, as the dependency, and
each argument node, as the observer. The function of the binding
context is set to the meta-node stored in the <code class="literal">target-node</code> attribute.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="literal">target-node</code> meta-node is looked up immediately when the
attribute is set, and in the same module in which the <code class="literal">/attribute</code>
declaration is processed.</p></td></tr></table></div><p>As an example consider a meta-node <code class="literal">f</code> with the <code class="literal">target-node</code>
attribute set to <code class="literal">g</code>. A declaration of the form:</p><pre class="screen">x -&gt; f(arg)</pre><p>results in the following binding also being established, alongside the
main binding of <code class="literal">arg -&gt; f(arg)</code>:</p><pre class="screen">g(f(arg)) -&gt; arg</pre><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The functor node <code class="literal">g(f(arg))</code> is not created, rather <code class="literal">f(arg)</code> is
bound to <code class="literal">arg</code> directly and <code class="literal">g</code> is set as the value function.</p></td></tr></table></div><p>This is useful for creating <span class="emphasis"><em>invertable</em></span> meta-nodes where instead of
computing a result given the values of the argument nodes, the values
of the argument nodes can be computed given the result. This is
achieved by binding to the meta-node instance, with the <code class="literal">target-node</code>
attribute set to the <span class="emphasis"><em>inverse</em></span> function.</p><p>The <a class="link" href="#meta-node-to-int" title="Meta-Node: to-int(x)"><code class="literal">to-int</code></a> meta-node from the <code class="literal">core</code> module
has its <code class="literal">target-node</code> attribute set to <code class="literal">int</code>. Thus the binding <code class="literal">x -&gt;
to-int(y)</code>, will result in the value of <code class="literal">y</code> being set to the value
<code class="literal">int(x)</code>, on changes in the value of <code class="literal">x</code>.</p><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>In order for the bindings to the argument nodes, to be
established, the <code class="literal">/attribute</code> declaration, which sets the
<code class="literal">target-node</code> attribute, must occur before between the definition of
the meta-node and its first instance.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_target_node_transforms"></a>3.8. Target Node Transforms</h3></div></div></div><p><a id="idm30277724832" class="indexterm"></a>
<a id="idm30277723296" class="indexterm"></a>
<a id="idm30277721984" class="indexterm"></a>
<a id="idm30277720960" class="indexterm"></a>
<a id="idm30277719360" class="indexterm"></a>
<a id="idm30277718048" class="indexterm"></a></p><p>The <code class="literal">target-node</code> attribute allows for a binding of a simple function
to be established in the reverse direction, from the meta-node
instance to its arguments. However, it lacks the functionality for
setting a different function for each argument or generating more
complex binding declarations.</p><p>The <code class="literal">target-transform</code> attribute allows a meta-node to be set as the
function which is called whenever an instance of the meta-node appears
as the target of a binding. The function is called with two arguments:
the <span class="emphasis"><em>source</em></span> node of the binding and the functor expression, which
appears as the <span class="emphasis"><em>target</em></span> of the binding. The function should return a
declaration which is processed instead of the binding declaration. The
result is processed as though it appears at top-level and unlike with
a macro-node, the result is not substituted directly in the place of
the meta-node instance.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <span class="emphasis"><em>source</em></span> argument is not necessarily the actual source node
declaration but is generally an atom node, with a randomly generated
identifier, which should serve as the source node for the binding
declarations generated by the <code class="literal">target-transform</code> node.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_modules"></a>4. Modules</h2></div></div></div><p><a id="idm30277709248" class="indexterm"></a></p><p>Modules provide a means of avoiding name collisions between nodes. A
module is a namespace which contains all global nodes, including
meta-nodes, created in it. A node with identifier <code class="literal">x</code> in a module <code class="literal">m1</code>
is distinct from a node with the same identifier <code class="literal">x</code> in another module
<code class="literal">m2</code>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_creating_modules"></a>4.1. Creating Modules</h3></div></div></div><p><a id="idm30277703840" class="indexterm"></a>
<a id="idm30277702544" class="indexterm"></a>
<a id="idm30277701520" class="indexterm"></a>
<a id="idm30277699936" class="indexterm"></a>
<a id="idm30277698624" class="indexterm"></a></p><p>Each new node, that is created as a result of processing a declaration
in the source file, is added to the current module. Initially the
current module is a nameless <code class="literal">init</code> module until it is changed
explicitly.</p><p>The current module can be changed using the special <code class="literal">/module</code> operator,
which takes the identifier of the module as its only argument. If
there is no such module a new module is created.</p><p><strong>Example. </strong>
</p><pre class="screen"># Change to module with identifier `mod1`
/module(mod1)

# Nodes `a` and `b` added to `mod1`
a -&gt; b

# Change to module with identifier `mod2`
/module(mod2)

# Nodes `a` and `b` added to `mod2`
# Distinct nodes from nodes `a` and `b` in `mod1`
a -&gt; b</pre><p>
</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Module identifiers reside in a different namespace from node
identifiers, thus there is no risk of collision between a node and
module with the same identifier, unless a pseudo-node for the module
is added to the module containing the node.</p></td></tr></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Modules reside in a single global, flat namespace. Hierarchical
relations between modules have to be <span class="emphasis"><em>faked</em></span> with a separator such as
<code class="literal">/</code>, e.g. <code class="literal">module/submodule</code>.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_referencing_nodes_in_different_modules"></a>4.2. Referencing Nodes in Different Modules</h3></div></div></div><p>There are two ways to reference a node in a another module, different
from the current module. One way is to create a <span class="emphasis"><em>pseudo-node</em></span> for the
module in the current module. Nodes in the module can then be
referenced as subnodes of the module’s <span class="emphasis"><em>pseudo-node</em></span>.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_module_pseudo_nodes"></a>Module Pseudo-Nodes</h4></div></div></div><p><a id="idm30277685840" class="indexterm"></a>
<a id="idm30277684544" class="indexterm"></a>
<a id="idm30277683520" class="indexterm"></a>
<a id="idm30277681936" class="indexterm"></a>
<a id="idm30277680624" class="indexterm"></a></p><p>The special <code class="literal">/use</code> operator creates pseudo-nodes for the modules
passed as arguments. The pseudo-nodes are created with the same
identifiers as the modules.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Module pseudo-nodes are referred to as such, since syntactically
they are the same as any other node, however the value of a module
pseudo-node cannot be referenced nor can bindings involving it be
established.</p></td></tr></table></div><p><strong>Syntax. </strong>
</p><pre class="screen">/use(mod1, mod2, ...)</pre><p>
</p><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Creating a pseudo node in a module, which contains a node
with same identifier as the pseudo-node, results in a compilation
error.</p></td></tr></table></div><p>Nodes from the <span class="emphasis"><em>used</em></span> modules can then be referenced as subnodes of
the module pseudo nodes.</p><p><strong>Example. </strong>
</p><pre class="screen">/module(mod1)

a -&gt; b

/module(mod2)
/use(mod1)

# Reference node `b` from module `mod1`
mod1.b -&gt; b
x -&gt; mod1.b</pre><p>
</p><p>Meta-nodes from a different module can be also referenced as subnodes
of the module pseudo-node.</p><p><strong>Example. </strong>
</p><pre class="screen">/module(mod1)

add(x, y) : x + y

/module(mod2)
/use(mod1)

# Use the `add` meta-node from module `mod1`
mod1.add(a, b) -&gt; c</pre><p>
</p><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Nodes referenced from other modules, can appear both as
dependencies or observers of bindings.</p></td></tr></table></div><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Referencing a subnode of a module pseudo-node does not
result in the automatic creation of a node in that module. Referencing
a node that does not exist in the module results in a compilation
error.</p></td></tr></table></div><p><a id="idm30277668752" class="indexterm"></a>
<a id="idm30277667248" class="indexterm"></a>
<a id="idm30277665936" class="indexterm"></a></p><p>A pseudo-node with a different identifier, from the identifier of the
module, can be created using the special <code class="literal">/use-as</code> operator. This is
useful for when the module identifier is too long to type out
repeatedly, or there is already a node, in the current module, with
the same identifier.</p><p>the <code class="literal">/use-as</code> operator takes two arguments, the identifier of the
module and the name of the pseudo-node to create in the current
module:</p><pre class="screen">/use-as(module-name, pseudo-node-name)</pre><p>The above examples can be rewritten using <code class="literal">/use-as</code> declarations:</p><p><strong>Example. </strong>
</p><pre class="screen">/module(mod1)

a -&gt; b

/module(mod2)
/use-as(mod1, m1)

# Reference node `b` from module `mod1`
m1.b -&gt; b
x -&gt; m1.b</pre><p>
</p><p><strong>Example. </strong>
</p><pre class="screen">/module(mod1)

add(x, y) : x + y

/module(mod2)
/use-as(mod1, m1)

# Use the `add` meta-node from module `mod1`
m1.add(a, b) -&gt; c</pre><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_importing_nodes"></a>Importing Nodes</h4></div></div></div><p><a id="idm30277655712" class="indexterm"></a>
<a id="idm30277654432" class="indexterm"></a>
<a id="idm30277653408" class="indexterm"></a>
<a id="idm30277651856" class="indexterm"></a>
<a id="idm30277650544" class="indexterm"></a></p><p>The second approach to referencing a node, residing in another module,
is to add it directly to the current module. With this approach there
is no need to reference the node as a subnode of a module
pseudo-node. This is referred to as <span class="emphasis"><em>importing</em></span> the node and is
achieved using the <code class="literal">/import</code> operator.</p><p>The <code class="literal">/import</code> operator adds the identifiers of nodes, residing in
another module, to the current module. The result is that the node can
be referenced directly by its identifier, as though it were declared
in the current module.</p><p>The <code class="literal">/import</code> operator has two forms:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
A short form that <span class="emphasis"><em>imports</em></span> all the nodes <span class="emphasis"><em>exported</em></span> from
      another module. Takes the module identifier as its only
      argument.
</li><li class="listitem">
A long form that can be used to <span class="emphasis"><em>import</em></span> specific nodes. The
      first argument is the module identifier, the following arguments
      are the identifiers of the nodes to <span class="emphasis"><em>import</em></span>
</li></ul></div><p><strong>Syntax. </strong>
</p><pre class="screen"># Short form: Import all nodes exported from `module`
/import(module)

# Long form: Import only the nodes listed in the arguments after the
# module identifier.
/import(module, node1, node2, ...)</pre><p>
</p><p><strong>Example: Long form. </strong>
</p><pre class="screen">/module(mod1)

a -&gt; b

/module(mod2)

# Import node `b` from `mod1`
/import(mod1, b)

# Node `b` is the same `b` as in `mod1`
b -&gt; a
x -&gt; b</pre><p>
</p><p><a id="idm30277637520" class="indexterm"></a>
<a id="idm30277636240" class="indexterm"></a>
<a id="idm30277635216" class="indexterm"></a>
<a id="idm30277633632" class="indexterm"></a>
<a id="idm30277632320" class="indexterm"></a></p><p>The short form only imports those nodes which are explicitly
<span class="emphasis"><em>exported</em></span> from the module. Nodes are explicitly exported from the
current module with the <code class="literal">/export</code> operator which simply takes the
identifiers of the nodes to <span class="emphasis"><em>export</em></span> as arguments.</p><p><strong>Syntax. </strong>
</p><pre class="screen">/export(node1, node2, ...)</pre><p>
</p><p>Each <code class="literal">/export</code> declaration adds (does not replace) nodes, that are in
the arguments, to the exported nodes of the current module.</p><p><strong>Example: <code class="literal">/export</code> and short form <code class="literal">/import</code>. </strong>
</p><pre class="screen">/module(mod1)

a -&gt; b

# Export node `b`
/export(b)

/module(mod2)
# Import all nodes exported from `mod1`
/import(mod1)

# Node `b` is the same `b` as in `mod1`
b -&gt; a
x -&gt; b</pre><p>
</p><p><strong>Meta-node Example: <code class="literal">/export</code> and short form <code class="literal">/import</code>. </strong>
</p><pre class="screen">/module(mod1)

add(x, y) : x + y

/export(add)

/module(mod2)
/import(mod1)

# Use the `add` meta-node from module `mod1`
add(a, b) -&gt; c</pre><p>
</p><p>A side effect of <code class="literal">/import</code> is that if the identifier of an imported
node, whether imported by the long or short form of <code class="literal">/import</code>, is
registered as an infix operator in the module, from which it is being
imported, it’s entry in the module’s operator table is copied over to
the current module. This allows the operator to be placed in infix
position, in the current module.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>All nodes in the <code class="literal">builtin</code> module, which contains the special
operators mentioned so far (<code class="literal">-&gt;</code>, <code class="literal">:</code>, <code class="literal">..</code>, <code class="literal">&amp;</code>, <code class="literal">.</code>), are
automatically imported into the <code class="literal">init</code> module.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_direct_references"></a>Direct References</h4></div></div></div><p><a id="idm30277611648" class="indexterm"></a>
<a id="idm30277610352" class="indexterm"></a>
<a id="idm30277609328" class="indexterm"></a>
<a id="idm30277607728" class="indexterm"></a>
<a id="idm30277606416" class="indexterm"></a></p><p>It may be necessary to reference a node in another module without
creating a pseudo-node, for its module, and without importing it in
the current module. The special <code class="literal">/in</code> operator directly references a
node in another module by the module and node identifiers.</p><p><strong>Syntax. </strong>
</p><pre class="screen">/in(module-id, node-id)</pre><p>
</p><p>The first argument is the identifier of the module containing the
node, and the second argument is the identifier of the node.</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p><code class="literal">module-id</code> is the identifier of the module itself, and not
the identifier of a module pseudo-node.</p></td></tr></table></div><p><strong>Example: <code class="literal">/in</code> Operator. </strong>
</p><pre class="screen">/module(mod1)

a -&gt; b

/module(mod2)

# Reference node `b` in `mod1` directly
/in(mod1, b) -&gt; a
x -&gt; /in(mod1, b)</pre><p>
</p><p><strong>Example: <code class="literal">/in</code> Operator. </strong>
</p><pre class="screen">/module(mod1)

add(x, y) : x + y

/module(mod2)

# Use the `add` meta-node from module `mod1`
(/in(mod1, add))(a, b) -&gt; c</pre><p>
</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_operator_table"></a>4.3. Operator Table</h3></div></div></div><p><a id="idm30277594688" class="indexterm"></a>
<a id="idm30277593120" class="indexterm"></a>
<a id="idm30277591824" class="indexterm"></a></p><p>Each module may register a number of node identifiers as infix
operators. This means that those identifiers may appear in infix
position in declarations parsed while the module is the current
module. The module’s <span class="emphasis"><em>operator table</em></span> stores the identifier,
precedence and associativity of each infix operator. <span class="emphasis"><em>See
<a class="xref" href="#_functors" title="1.2. Functors">Section 1.2, “Functors”</a> for more information about infix operators, operator
precedence and associativity</em></span>.</p><p>Initially the operator table of each module contains a single entry
which is the special entry for function application. The precedence of
function application controls whether an expression is treated as the
operator of a functor or the operand of an infix expression.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The precedence of function application is set to <code class="literal">900</code>. This
value cannot be changed.</p></td></tr></table></div><p><strong>Example: Precedence of Function Application. </strong>
</p><pre class="screen"># If `.` has a higher precedence than function application, the
# following is parsed to: ((. m1 add) a b)

# If `.` has a lower precedence than function application, the
# following is parsed to: (. m1 (add a b))

m1.add(a, b)</pre><p>
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_registering_infix_operators"></a>Registering Infix Operators</h4></div></div></div><p><a id="idm30277583088" class="indexterm"></a>
<a id="idm30277581600" class="indexterm"></a>
<a id="idm30277580304" class="indexterm"></a>
<a id="idm30277579280" class="indexterm"></a>
<a id="idm30277577696" class="indexterm"></a>
<a id="idm30277576384" class="indexterm"></a></p><p>New infix operators can be registered using the special <code class="literal">/operator</code>
declaration. This declaration modifies the operator table of the
current module.</p><p><strong>Syntax. </strong>
</p><pre class="screen">/operator(identifier, precedence [, (left | right)])</pre><p>
</p><p>The first argument is the node identifier to register as an infix
operator. The second argument is the precedence as an integer
value. The third argument specifies the associativity. This is either
the identifier <code class="literal">left</code> or <code class="literal">right</code> for <span class="emphasis"><em>left</em></span> or <span class="emphasis"><em>right</em></span>
associativity. If the third argument is omitted, <span class="emphasis"><em>left</em></span> associativity
is assumed.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The identifier does not have to name a node or meta-node that
exists at the time the <code class="literal">/operator</code> declaration is processed. The table
only stores the identifier for syntactic transformations, no
information about the actual node is stored.</p></td></tr></table></div><p>An <code class="literal">/operator</code> declaration adds an entry to the current module’s
operator table if it does not already contain an entry for the
identifier. If the table already contains an entry for the identifier,
the <span class="emphasis"><em>precedence</em></span> and <span class="emphasis"><em>associativity</em></span> values of the existing entry are
replaced with those given in the arguments to the <code class="literal">/operator</code>
declaration.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <span class="emphasis"><em>precedence</em></span> and <span class="emphasis"><em>associativity</em></span> of all operators can be
changed, with the exception of <span class="emphasis"><em>function application</em></span>.</p></td></tr></table></div><p>When a node is imported into the current module and there is an entry,
for the node’s identifier, in the operator table of the module, from
which the node is being imported, the entry is copied over into the
current module’s operator table, replacing any existing entries for
the identifier.</p><p><strong>Example: <code class="literal">+</code> infix operator from <code class="literal">core</code> module. </strong>
</p><pre class="screen"># Register `+` as infix operator
/operator(+, 100, left)

# Now `+` can appear in infix position
a + b

# It can also still appear in prefix position
+(a, b)</pre><p>
</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_core_module"></a>5. Core Module</h2></div></div></div><p><a id="idm30277557408" class="indexterm"></a>
<a id="idm30277556096" class="indexterm"></a>
<a id="idm30277555056" class="indexterm"></a>
<a id="idm30277553472" class="indexterm"></a>
<a id="idm30277552160" class="indexterm"></a></p><p>The <code class="literal">core</code> module provides the language primitives and the standard
library.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_literals_2"></a>5.1. Literals</h3></div></div></div><p><a id="idm30277548752" class="indexterm"></a>
<a id="idm30277547248" class="indexterm"></a>
<a id="idm30277545952" class="indexterm"></a></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="macro-node-quote"></a>Macro-Node: <code class="literal">'(x)</code></h4></div></div></div><p><a id="idm30277543264" class="indexterm"></a>
<a id="idm30277541712" class="indexterm"></a>
<a id="idm30277540416" class="indexterm"></a></p><p>Interprets <code class="literal">x</code> as a literal symbol rather than a node
declaration. <span class="emphasis"><em>See <a class="xref" href="#literal-symbols" title="Literal Symbols"> Literal Symbols</a></em></span>.</p><p>The same symbol object is always returned for a given symbol name.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
An atom node expression.
</p>
</td></tr></tbody></table></div><h5><a id="_pattern_matching"></a>Pattern Matching</h5><p>Matches the literal symbol <code class="literal">x</code>. <span class="emphasis"><em>See <a class="xref" href="#pattern_matching" title="5.16. Pattern Matching">Pattern Matching</a></em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="macro-node-c"></a>Macro-Node: <code class="literal">c(x)</code></h4></div></div></div><p><a id="idm30277526736" class="indexterm"></a>
<a id="idm30277525184" class="indexterm"></a>
<a id="idm30277523888" class="indexterm"></a></p><p>Returns <code class="literal">x</code> interpreted as a literal character.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
If <code class="literal">x</code> is a symbol of one character, the character is returned.
</li><li class="listitem">
If <code class="literal">x</code> is a string, the first character in the string is returned.
</li><li class="listitem">
If <code class="literal">x</code> is an integer in the range 0 — 9, the character
  corresponding to the digit is returned.
</li></ul></div><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to convert to a character.
</p>
</td></tr></tbody></table></div><h5><a id="_pattern_matching_2"></a>Pattern Matching</h5><p>Matches the character literal produced by the given argument. <span class="emphasis"><em>See
<a class="xref" href="#pattern_matching" title="5.16. Pattern Matching">Pattern Matching</a></em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="macro-node-ref"></a>Macro-Node: <code class="literal">&amp;(node)</code></h4></div></div></div><p><a id="idm30277507296" class="indexterm"></a>
<a id="idm30277505728" class="indexterm"></a>
<a id="idm30277504432" class="indexterm"></a></p><p><a id="idm30277503280" class="indexterm"></a>
<a id="idm30277501712" class="indexterm"></a>
<a id="idm30277500416" class="indexterm"></a></p><p>Returns the raw node object corresponding to the node with identifier
<code class="literal">node</code>. <span class="emphasis"><em>See <a class="xref" href="#node_references" title="Node References"> Node References</a></em></span>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">node</code>
</p>
</td><td style="" valign="top">
<p>
The node identifier, which can be any valid node
expression. The expression is processed in the module in which the
macro node instance occurs.
</p>
</td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="core-module-bindings"></a>5.2. Bindings</h3></div></div></div><p><a id="idm30277490288" class="indexterm"></a>
<a id="idm30277488768" class="indexterm"></a>
<a id="idm30277487472" class="indexterm"></a></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="macro-node-lbind"></a>Macro-Node: <code class="literal">-&gt;(source, target)</code></h4></div></div></div><p><a id="idm30277484736" class="indexterm"></a>
<a id="idm30277482848" class="indexterm"></a>
<a id="idm30277481552" class="indexterm"></a></p><p>Establishes a binding between node <code class="literal">source</code> and node <code class="literal">target</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">source</code>
</p>
</td><td style="" valign="top">
<p>
The source node.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">target</code>
</p>
</td><td style="" valign="top">
<p>
The target node.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>10</strong></span> and <span class="strong"><strong>right</strong></span>
associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="macro-node-rbind"></a>Macro-Node: <code class="literal">&lt;-(target, source)</code></h4></div></div></div><p><a id="idm30277467152" class="indexterm"></a>
<a id="idm30277465264" class="indexterm"></a>
<a id="idm30277463968" class="indexterm"></a></p><p>Establishes a binding between node <code class="literal">source</code> and node <code class="literal">target</code>.</p><p>Same as <a class="link" href="#macro-node-lbind" title="Macro-Node: -&gt;(source, target)"><code class="literal">-&gt;</code></a> however the argument order is reversed with the first
argument being the target node and the second argument being the
source node.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">target</code>
</p>
</td><td style="" valign="top">
<p>
The target node.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">source</code>
</p>
</td><td style="" valign="top">
<p>
The source node.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>10</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="macro-node-context"></a>Macro-Node: <code class="literal">@(node, context : '(default))</code></h4></div></div></div><p><a id="idm30277447504" class="indexterm"></a>
<a id="idm30277445952" class="indexterm"></a>
<a id="idm30277444656" class="indexterm"></a></p><p>Indicates an explicit context to which bindings, involving <code class="literal">node</code> as
the <span class="emphasis"><em>target</em></span>, should be established.</p><p>When the <code class="literal">@</code> expression appears as the target of a binding, the
binding to <code class="literal">node</code> is established in the context with identifier
<code class="literal">context</code>, <span class="emphasis"><em>see <a class="xref" href="#_contexts" title="2.5. Contexts">Section 2.5, “Contexts”</a></em></span>. The context identifier may be omitted
in which case the identifier <code class="literal">default</code> is assumed.</p><p><code class="literal">context</code> may also be a functor of the form <code class="literal">when(context-id, type)</code>,
where <code class="literal">context-id</code> is the context identifier and <code class="literal">type</code> is a node, of
which the value is interpreted as a failure type. In this case the
binding will only be activated if the failure type, of the previous
binding in the context, is equal to <code class="literal">type</code> by <a class="link" href="#meta-node-eq" title="Meta-Node: =(a, b)"><code class="literal">=</code></a>. <span class="emphasis"><em>See <a class="xref" href="#conditional_binding_fail_type" title="Conditionally Active Bindings based on Failure Type">Conditionally Active Bindings based on Failure Type</a></em></span>. If <code class="literal">context-id</code> is
omitted, that is <code class="literal">context</code> is of the form <code class="literal">when(type)</code>, the identifier
<code class="literal">default</code> is assumed.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">node</code>
</p>
</td><td style="" valign="top">
<p>
The node.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">context</code>
</p>
</td><td style="" valign="top">
<p>
The context identifier, or <code class="literal">when</code> expression, <span class="emphasis"><em>see above</em></span>.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>800</strong></span> and <span class="strong"><strong>left</strong></span>
associativity. The <code class="literal">when</code> symbol is also registered as an infix
operator with precedence <span class="strong"><strong>850</strong></span> and <span class="strong"><strong>left</strong></span> associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="macro-node-state"></a>Macro-Node: <code class="literal">::(node, state)</code></h4></div></div></div><p><a id="idm30277414208" class="indexterm"></a>
<a id="idm30277412656" class="indexterm"></a>
<a id="idm30277411360" class="indexterm"></a></p><p>When appearing as the target of a binding, a binding is established to
<code class="literal">node</code> which is only active when <code class="literal">node</code> is in the state with
identifier <code class="literal">state</code>.</p><p><code class="literal">state</code> may also be a functor of the form <code class="literal">from =&gt; state</code>, in which
case the binding is only active when the state of <code class="literal">node</code> changes from
the state with identifier <code class="literal">from</code> to the state with identifier <code class="literal">to</code>.</p><p><span class="emphasis"><em>See <a class="xref" href="#_node_states" title="2.10. Node States">Section 2.10, “Node States”</a> for more information.</em></span></p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">node</code>
</p>
</td><td style="" valign="top">
<p>
The node.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">state</code>
</p>
</td><td style="" valign="top">
<p>
The state identifier or <code class="literal">=&gt;</code> expression, <span class="emphasis"><em>see above</em></span>.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>700</strong></span> and <span class="strong"><strong>left</strong></span>
associativity. The <code class="literal">=&gt;</code> symbol is also registered as an infix operator
with precedence <span class="strong"><strong>750</strong></span> and <span class="strong"><strong>left</strong></span> associativity.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_meta_node_definitions"></a>5.3. Meta-Node Definitions</h3></div></div></div><p><a id="idm30277388416" class="indexterm"></a>
<a id="idm30277386848" class="indexterm"></a>
<a id="idm30277385552" class="indexterm"></a></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="macro-node-def"></a>Macro-Node: <code class="literal">:(id(args...), body)</code></h4></div></div></div><p><a id="idm30277382912" class="indexterm"></a>
<a id="idm30277381360" class="indexterm"></a>
<a id="idm30277380064" class="indexterm"></a></p><p>Defines a meta-node with identifier <code class="literal">id</code>, argument list <code class="literal">args</code> and
definition <code class="literal">body</code>. <span class="emphasis"><em>See <a class="xref" href="#_meta_nodes" title="3. Meta-Nodes">Section 3, “Meta-Nodes”</a></em></span>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">id</code>
</p>
</td><td style="" valign="top">
<p>
Meta-node identifier.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">args</code>
</p>
</td><td style="" valign="top">
<p>
Comma-separated list of node identifiers, to which the
meta-node arguments are bound.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">body</code>
</p>
</td><td style="" valign="top">
<p>
Node expression making up the definition of the meta-node. If
the definition consists of more than a single expression, it should be
enclosed in braces, <span class="emphasis"><em>see <a class="link" href="#_node_lists" title="1.3. Node Lists">Node Lists</a></em></span>.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>5</strong></span> and <span class="strong"><strong>right</strong></span>
associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="macro-node-outer"></a>Macro-Node: <code class="literal">..(node)</code></h4></div></div></div><p><a id="idm30277360160" class="indexterm"></a>
<a id="idm30277358608" class="indexterm"></a>
<a id="idm30277357312" class="indexterm"></a></p><p>Explicitly references a node defined in the enclosing scope of the
meta-node. <span class="emphasis"><em>See <a class="xref" href="#_outer_node_references" title="3.3. Outer Node References">Section 3.3, “Outer Node References”</a></em></span>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">node</code>
</p>
</td><td style="" valign="top">
<p>
The node identifier, which can be any valid node expression.
</p>
</td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_failures_2"></a>5.4. Failures</h3></div></div></div><p><a id="idm30277348016" class="indexterm"></a>
<a id="idm30277346512" class="indexterm"></a>
<a id="idm30277345232" class="indexterm"></a></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-fail"></a>Meta-Node: <code class="literal">fail(:(type))</code></h4></div></div></div><p><a id="idm30277342608" class="indexterm"></a>
<a id="idm30277341040" class="indexterm"></a>
<a id="idm30277339744" class="indexterm"></a></p><p>Returns a failure with a given failure type.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">type</code> (<span class="emphasis"><em>Optional</em></span>)
</span></dt><dd>
The failure type. If not provided the failure returned has no
type.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-fail-type"></a>Meta-Node: <code class="literal">fail-type(x)</code></h4></div></div></div><p><a id="idm30277333360" class="indexterm"></a>
<a id="idm30277331808" class="indexterm"></a>
<a id="idm30277330512" class="indexterm"></a></p><p>Returns the failure type of <code class="literal">x</code>.</p><p>Returns a failure if <code class="literal">x</code> does not evaluate to a failure or evaluates
to a failure with no type.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value of which to return the failure type.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-failsp"></a>Meta-Node: <code class="literal">fails?(x)</code></h4></div></div></div><p><a id="idm30277320096" class="indexterm"></a>
<a id="idm30277318528" class="indexterm"></a>
<a id="idm30277317232" class="indexterm"></a></p><p>Returns true if <code class="literal">x</code> fails to evaluate to a value.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to test for failure.
</p>
</td></tr></tbody></table></div><h5><a id="_pattern_matching_3"></a>Pattern Matching</h5><p>Matches if the source node evaluates to a failure. If the argument <code class="literal">x</code>
is provided matches only failures of type <code class="literal">x</code> otherwise matches any
failure. <span class="emphasis"><em>See <a class="xref" href="#pattern_matching" title="5.16. Pattern Matching">Pattern Matching</a></em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-succeedsp"></a>Meta-Node: <code class="literal">?(x)</code></h4></div></div></div><p><a id="idm30277304272" class="indexterm"></a>
<a id="idm30277302720" class="indexterm"></a>
<a id="idm30277301424" class="indexterm"></a></p><p>Returns true if <code class="literal">x</code> evaluates to a value, false if <code class="literal">x</code> fails to
evaluate to a value.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to test for failure.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-fail-typep"></a>Meta-Node: <code class="literal">fail-type?(x, type)</code></h4></div></div></div><p><a id="idm30277291504" class="indexterm"></a>
<a id="idm30277289936" class="indexterm"></a>
<a id="idm30277288640" class="indexterm"></a></p><p>Tests for failure with a given type.</p><p>Returns true if <code class="literal">x</code> fails with failure type equal to <code class="literal">type</code>, by
<a class="link" href="#meta-node-eq" title="Meta-Node: =(a, b)"><code class="literal">=</code></a>. Returns false if the failure type of <code class="literal">x</code> is not
equal to <code class="literal">type</code> or <code class="literal">x</code> does not fail.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to check.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">type</code>
</p>
</td><td style="" valign="top">
<p>
The failure type.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_meta_node_literal_x_literal"></a>Meta-Node: <code class="literal">!!(x)</code></h4></div></div></div><p><a id="idm30277272592" class="indexterm"></a>
<a id="idm30277271040" class="indexterm"></a>
<a id="idm30277269744" class="indexterm"></a></p><p>Evaluates to true if <code class="literal">x</code> evaluates to a value. If <code class="literal">x</code> evaluates to a
failure, evaluates to the failure value.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to test for failure.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-test-fail-bind"></a>Meta-Node: <code class="literal">!-(test, value)</code></h4></div></div></div><p><a id="idm30277259712" class="indexterm"></a>
<a id="idm30277258160" class="indexterm"></a>
<a id="idm30277256864" class="indexterm"></a></p><p>Returns <code class="literal">value</code> if <code class="literal">test</code> does not fail. If <code class="literal">test</code> fails, the failure
is returned.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">test</code>
</p>
</td><td style="" valign="top">
<p>
The value which is checked for failure.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">value</code>
</p>
</td><td style="" valign="top">
<p>
The value which should be returned if <code class="literal">test</code> does not fail.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="macro-node-test-fail-functor"></a>Macro-Node: <code class="literal">!(functor)</code></h4></div></div></div><p><a id="idm30277242896" class="indexterm"></a>
<a id="idm30277241344" class="indexterm"></a>
<a id="idm30277240048" class="indexterm"></a></p><p>Tests that each argument of a functor expression does not fail, before
evaluating the expression.</p><p>If at least one argument fails, then the entire functor node fails.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">functor</code>
</p>
</td><td style="" valign="top">
<p>
The functor expression.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_meta_node_literal_catch_try_catch_test_literal"></a>Meta-Node: <code class="literal">catch(try, catch, :(test))</code></h4></div></div></div><p><a id="idm30277230768" class="indexterm"></a>
<a id="idm30277229200" class="indexterm"></a>
<a id="idm30277227904" class="indexterm"></a></p><p>Returns the value of <code class="literal">try</code> if it does not evaluate to a failure. If
<code class="literal">try</code> evaluates to a failure returns the value of <code class="literal">catch</code>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">try</code>
</span></dt><dd>
The value, which is returned if it does not evaluate to a
failure.
</dd><dt><span class="term">
<code class="literal">catch</code>
</span></dt><dd>
The value, which is returned when <code class="literal">try</code> evaluates to a
failure.
</dd><dt><span class="term">
<code class="literal">test</code>
</span></dt><dd>
An optional function, which is applied on the failure type of
<code class="literal">try</code>. If the function returns <span class="emphasis"><em>true</em></span>, the value of <code class="literal">catch</code> is
returned otherwise the value of <code class="literal">try</code> is returned.
</dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_builtin_failure_types"></a>5.5. Builtin Failure Types</h3></div></div></div><p><a id="idm30277212672" class="indexterm"></a>
<a id="idm30277211088" class="indexterm"></a>
<a id="idm30277209792" class="indexterm"></a></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="node-no-value"></a>Failure Type Node: <code class="literal">No-Value</code></h4></div></div></div><p><a id="idm30277207152" class="indexterm"></a>
<a id="idm30277205584" class="indexterm"></a>
<a id="idm30277204288" class="indexterm"></a>
<a id="idm30277203264" class="indexterm"></a>
<a id="idm30277201696" class="indexterm"></a>
<a id="idm30277200400" class="indexterm"></a>
<a id="idm30277199376" class="indexterm"></a>
<a id="idm30277197808" class="indexterm"></a>
<a id="idm30277196512" class="indexterm"></a></p><p>Optional meta-nodes arguments, for which no value is provided, are
bound to a failure of this type.</p><p>Node <code class="literal">No-Value!</code> is bound to a failure of this type.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="node-type-error"></a>Failure Type Node: <code class="literal">Type-Error</code></h4></div></div></div><p><a id="idm30277192032" class="indexterm"></a>
<a id="idm30277190496" class="indexterm"></a>
<a id="idm30277189200" class="indexterm"></a>
<a id="idm30277188176" class="indexterm"></a>
<a id="idm30277186608" class="indexterm"></a>
<a id="idm30277185312" class="indexterm"></a>
<a id="idm30277184288" class="indexterm"></a>
<a id="idm30277182720" class="indexterm"></a>
<a id="idm30277181424" class="indexterm"></a></p><p>A failure of this type is returned when an argument to a meta-node is
not of the expected type.</p><p>Node <code class="literal">Type-Error!</code> is bound to a failure of this type.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="node-index-out-bounds"></a>Failure Type Node: <code class="literal">Index-Out-Bounds</code></h4></div></div></div><p><a id="idm30277176880" class="indexterm"></a>
<a id="idm30277175328" class="indexterm"></a>
<a id="idm30277174032" class="indexterm"></a>
<a id="idm30277173008" class="indexterm"></a>
<a id="idm30277171424" class="indexterm"></a>
<a id="idm30277170128" class="indexterm"></a>
<a id="idm30277169104" class="indexterm"></a>
<a id="idm30277167520" class="indexterm"></a>
<a id="idm30277166224" class="indexterm"></a></p><p>A failure of this type is returned when attempting to access an
element at an index that is outside the bounds of the list or string.</p><p>Node <code class="literal">Index-Out-Bounds!</code> is bound to a failure of this type.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="node-invalid-integer"></a>Failure Type Node: <code class="literal">Invalid-Integer</code></h4></div></div></div><p><a id="idm30277161584" class="indexterm"></a>
<a id="idm30277160048" class="indexterm"></a>
<a id="idm30277158752" class="indexterm"></a>
<a id="idm30277157728" class="indexterm"></a>
<a id="idm30277156160" class="indexterm"></a>
<a id="idm30277154864" class="indexterm"></a>
<a id="idm30277153840" class="indexterm"></a>
<a id="idm30277152256" class="indexterm"></a>
<a id="idm30277150960" class="indexterm"></a></p><p>A failure of this type is returned by <a class="link" href="#meta-node-int" title="Meta-Node: int(x)"><code class="literal">int</code></a> when a
string, from which an integer cannot be parsed, is provided as an
argument.</p><p>Node <code class="literal">Invalid-Integer!</code> is bound to a failure of this type.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="node-invalid-real"></a>Failure Type Node: <code class="literal">Invalid-Real</code></h4></div></div></div><p><a id="idm30277145280" class="indexterm"></a>
<a id="idm30277143712" class="indexterm"></a>
<a id="idm30277142416" class="indexterm"></a>
<a id="idm30277141392" class="indexterm"></a>
<a id="idm30277139824" class="indexterm"></a>
<a id="idm30277138528" class="indexterm"></a>
<a id="idm30277137504" class="indexterm"></a>
<a id="idm30277135936" class="indexterm"></a>
<a id="idm30277134640" class="indexterm"></a></p><p>A failure of this type is returned by <a class="link" href="#meta-node-int" title="Meta-Node: int(x)"><code class="literal">real</code></a> when a
string, from which a real number cannot be parsed, is provided as an
argument.</p><p>Node <code class="literal">Invalid-Real!</code> is bound to a failure of this type.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="node-arity-error"></a>Failure Type Node: <code class="literal">Arity-Error</code></h4></div></div></div><p><a id="idm30277129008" class="indexterm"></a>
<a id="idm30277127440" class="indexterm"></a>
<a id="idm30277126144" class="indexterm"></a>
<a id="idm30277125120" class="indexterm"></a>
<a id="idm30277123552" class="indexterm"></a>
<a id="idm30277122256" class="indexterm"></a>
<a id="idm30277121232" class="indexterm"></a>
<a id="idm30277119664" class="indexterm"></a>
<a id="idm30277118368" class="indexterm"></a></p><p>A failure of this type is returned when a meta-node is invoked
indirectly, by a meta-node reference <span class="emphasis"><em>see
<a class="xref" href="#_higher_order_meta_nodes" title="3.5. Higher-Order Meta-Nodes">Section 3.5, “Higher-Order Meta-Nodes”</a></em></span>, with an incorrect number of arguments.</p><p>Node <code class="literal">Arity-Error!</code> is bound to a failure of this type.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_arithmetic"></a>5.6. Arithmetic</h3></div></div></div><p><a id="idm30277113280" class="indexterm"></a>
<a id="idm30277112016" class="indexterm"></a></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-plus"></a>Meta-Node: <code class="literal">+(x, y)</code></h4></div></div></div><p><a id="idm30277109360" class="indexterm"></a>
<a id="idm30277107808" class="indexterm"></a>
<a id="idm30277106512" class="indexterm"></a></p><p>Computes the sum of <code class="literal">x</code> and <code class="literal">y</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>100</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-minus"></a>Meta-Node: <code class="literal">-(x, :(y))</code></h4></div></div></div><p><a id="idm30277092272" class="indexterm"></a>
<a id="idm30277090720" class="indexterm"></a>
<a id="idm30277089424" class="indexterm"></a></p><p>Computes the difference of <code class="literal">x</code> and <code class="literal">y</code>.</p><p>If <code class="literal">y</code> is not provided, returns the negation of <code class="literal">x</code>, i.e. <code class="literal">x</code>
multiplied by <code class="literal">-1</code>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">x</code>
</span></dt><dd>
A number.
</dd><dt><span class="term">
<code class="literal">y</code> (<span class="emphasis"><em>Optional</em></span>)
</span></dt><dd>
A number.
</dd></dl></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>100</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-multiply"></a>Meta-Node: <code class="literal">*(x, y)</code></h4></div></div></div><p><a id="idm30277074912" class="indexterm"></a>
<a id="idm30277073360" class="indexterm"></a>
<a id="idm30277072064" class="indexterm"></a></p><p>Computes the product of <code class="literal">x</code> and <code class="literal">y</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>200</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-divide"></a>Meta-Node: <code class="literal">/(x, y)</code></h4></div></div></div><p><a id="idm30277057792" class="indexterm"></a>
<a id="idm30277056240" class="indexterm"></a>
<a id="idm30277054944" class="indexterm"></a></p><p>Computes the quotient of <code class="literal">x</code> and <code class="literal">y</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>200</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-rem"></a>Meta-Node: <code class="literal">%(x, y)</code></h4></div></div></div><p><a id="idm30277040720" class="indexterm"></a>
<a id="idm30277039168" class="indexterm"></a>
<a id="idm30277037872" class="indexterm"></a></p><p>Computes the remainder of the division of <code class="literal">x</code> by <code class="literal">y</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>200</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_comparison"></a>5.7. Comparison</h3></div></div></div><p><a id="idm30277023984" class="indexterm"></a>
<a id="idm30277022688" class="indexterm"></a></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-lt"></a>Meta-Node: <code class="literal">&lt;(x, y)</code></h4></div></div></div><p><a id="idm30277019984" class="indexterm"></a>
<a id="idm30277018416" class="indexterm"></a>
<a id="idm30277017120" class="indexterm"></a></p><p>Returns true if <code class="literal">x</code> is less than <code class="literal">y</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>50</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-lte"></a>Meta-Node: <code class="literal">&lt;=(x, y)</code></h4></div></div></div><p><a id="idm30277002832" class="indexterm"></a>
<a id="idm30277000912" class="indexterm"></a>
<a id="idm30276999616" class="indexterm"></a></p><p>Returns true if <code class="literal">x</code> is less than or equal to <code class="literal">y</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>50</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-gt"></a>Meta-Node: <code class="literal">&gt;(x, y)</code></h4></div></div></div><p><a id="idm30276969120" class="indexterm"></a>
<a id="idm30276967552" class="indexterm"></a>
<a id="idm30276966256" class="indexterm"></a></p><p>Returns true if <code class="literal">x</code> is greater than <code class="literal">y</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>50</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-gte"></a>Meta-Node: <code class="literal">&gt;=(x, y)</code></h4></div></div></div><p><a id="idm30276952032" class="indexterm"></a>
<a id="idm30276950480" class="indexterm"></a>
<a id="idm30276949184" class="indexterm"></a></p><p>Returns true if <code class="literal">x</code> is greater than or equal to <code class="literal">y</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td style="" valign="top">
<p>
A number.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>50</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-eq"></a>Meta-Node: <code class="literal">=(a, b)</code></h4></div></div></div><p><a id="idm30276934992" class="indexterm"></a>
<a id="idm30276933440" class="indexterm"></a>
<a id="idm30276932144" class="indexterm"></a></p><p>Returns true if <code class="literal">a</code> is equal to <code class="literal">b</code>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="emphasis"><em>Numbers</em></span> are equal if they represent the same numeric
  value.
</li><li class="listitem">
<span class="emphasis"><em>Characters</em></span> are equal if they represent the same
  character.
</li><li class="listitem">
<span class="emphasis"><em>Strings</em></span> are equal if they have the same contents.
</li><li class="listitem">
Otherwise <code class="literal">a</code> and <code class="literal">b</code> are equal if they evaluate to the same object.
</li></ul></div><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A value.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td style="" valign="top">
<p>
A value.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>50</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-neq"></a>Meta-Node: <code class="literal">!=(a, b)</code></h4></div></div></div><p><a id="idm30276911520" class="indexterm"></a>
<a id="idm30276909936" class="indexterm"></a>
<a id="idm30276908640" class="indexterm"></a></p><p>Returns true if <code class="literal">a</code> is not equal to <code class="literal">b</code>.</p><p><span class="emphasis"><em>See <a class="link" href="#meta-node-eq" title="Meta-Node: =(a, b)"><code class="literal">=</code></a> for the rules of equality</em></span>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A value.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td style="" valign="top">
<p>
A value.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>50</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_logical_operators"></a>5.8. Logical Operators</h3></div></div></div><p><a id="idm30276892960" class="indexterm"></a>
<a id="idm30276891648" class="indexterm"></a></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-and"></a>Meta-Node: <code class="literal">and(x, y)</code></h4></div></div></div><p><a id="idm30276888976" class="indexterm"></a>
<a id="idm30276887424" class="indexterm"></a>
<a id="idm30276886128" class="indexterm"></a></p><p>Logical AND.</p><p>Returns the value of <code class="literal">y</code> if <code class="literal">x</code> evaluates to true.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A value.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td style="" valign="top">
<p>
A value.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>25</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div><h5><a id="_pattern_matching_4"></a>Pattern Matching</h5><p>Matches if both the nested patterns in <code class="literal">x</code> and <code class="literal">y</code> match the source
node. <span class="emphasis"><em>See <a class="xref" href="#pattern_matching" title="5.16. Pattern Matching">Pattern Matching</a></em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-or"></a>Meta-Node: <code class="literal">or(x, y)</code></h4></div></div></div><p><a id="idm30276867760" class="indexterm"></a>
<a id="idm30276866208" class="indexterm"></a>
<a id="idm30276864912" class="indexterm"></a></p><p>Logical OR.</p><p>Returns the value of <code class="literal">x</code>, if it evaluates to true, otherwise returns
the value of <code class="literal">y</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A value.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td style="" valign="top">
<p>
A value.
</p>
</td></tr></tbody></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Registered as an infix operator with precedence <span class="strong"><strong>20</strong></span> and <span class="strong"><strong>left</strong></span>
associativity.</p></td></tr></table></div><h5><a id="_pattern_matching_5"></a>Pattern Matching</h5><p>Matches if at least one of the nested patterns in <code class="literal">x</code> and <code class="literal">y</code> match
the source node. Both the bindings generated by the patterns <code class="literal">x</code> and
<code class="literal">y</code> are established if the corresponding pattern condition
matches. <span class="emphasis"><em>See <a class="xref" href="#pattern_matching" title="5.16. Pattern Matching">Pattern Matching</a></em></span>.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This pattern matches even if not all its nested patterns have
matched.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-not"></a>Meta-Node: <code class="literal">not(x)</code></h4></div></div></div><p><a id="idm30276844272" class="indexterm"></a>
<a id="idm30276842752" class="indexterm"></a>
<a id="idm30276841456" class="indexterm"></a></p><p>Logical NOT.</p><p>Returns true if <code class="literal">x</code> evaluates to false.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
A value.
</p>
</td></tr></tbody></table></div><h5><a id="_pattern_matching_6"></a>Pattern Matching</h5><p>Matches if the nested pattern <code class="literal">x</code> does not match. The bindings
generated by <code class="literal">x</code> are not established by this pattern. <span class="emphasis"><em>See
<a class="xref" href="#pattern_matching" title="5.16. Pattern Matching">Pattern Matching</a></em></span>.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Since this binding does not establish any bindings, it is
treated as a constant pattern and may only appear nested inside other
patterns.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_selection_operators"></a>5.9. Selection Operators</h3></div></div></div><p><a id="idm30276827680" class="indexterm"></a>
<a id="idm30276826432" class="indexterm"></a></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-if"></a>Meta-Node: <code class="literal">if(condition, true-value, :(false-value))</code></h4></div></div></div><p><a id="idm30276823696" class="indexterm"></a>
<a id="idm30276822144" class="indexterm"></a>
<a id="idm30276820848" class="indexterm"></a></p><p>Returns <code class="literal">true-value</code> if <code class="literal">condition</code> is true otherwise returns
<code class="literal">false-value</code>.</p><p>If <code class="literal">false-value</code> is not provided, a failure is returned if <code class="literal">condition</code>
evaluates to false.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">condition</code>
</span></dt><dd>
The condition.
</dd><dt><span class="term">
<code class="literal">true-value</code>
</span></dt><dd>
Value to return if <code class="literal">condition</code> is true.
</dd><dt><span class="term">
<code class="literal">false-value</code> (<span class="emphasis"><em>Optional</em></span>)
</span></dt><dd>
Value to return if <code class="literal">condition</code> is false. If
not provided defaults to a failure.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="macro-node-case"></a>Macro-Node: <code class="literal">case(..(clauses))</code></h4></div></div></div><p><a id="idm30276805040" class="indexterm"></a>
<a id="idm30276803472" class="indexterm"></a>
<a id="idm30276802176" class="indexterm"></a></p><pre class="screen">&lt;clause&gt; = &lt;condition&gt; : &lt;value&gt;</pre><p>Expands to nested <a class="link" href="#meta-node-if" title="Meta-Node: if(condition, true-value, :(false-value))"><code class="literal">if</code></a> expressions.</p><p>Each argument is a <code class="literal">clause</code> is of the form <code class="literal">condition : value</code>. The
<code class="literal">case</code> expression evaluates to the <code class="literal">value</code> corresponding to the first
clause of which the <code class="literal">condition</code> node evaluates to true. The final
clause may also be of the form <code class="literal">value</code>, in which case it becomes the
default value, to which the <code class="literal">case</code> expression evaluates if the
conditions of all the other clauses evaluate to false.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">clauses</code>
</p>
</td><td style="" valign="top">
<p>
The clauses.
</p>
</td></tr></tbody></table></div><p><strong>Example. </strong>
</p><pre class="screen">case(
    a &lt; b : a,
    b &gt;= a : b
)

# Is equivalent to:

if(a &lt; b, a, if(b &gt;= a, b))</pre><p>
</p><p><strong>Example with default value. </strong>
</p><pre class="screen">case(
    a &lt; b : -1,
    b &gt; a : 1,
    0
)

# Is equivalent to:

if(a &lt; b, -1, if(b &gt; a, 1, 0))</pre><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_node_literal_true_literal"></a>Node <code class="literal">True</code></h4></div></div></div><p>The value of this node represents Boolean <span class="emphasis"><em>True</em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_node_literal_false_literal"></a>Node <code class="literal">False</code></h4></div></div></div><p>The value of this node represents Boolean <span class="emphasis"><em>False</em></span>.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_types"></a>5.10. Types</h3></div></div></div><p><a id="idm30276778336" class="indexterm"></a>
<a id="idm30276777024" class="indexterm"></a>
<a id="idm30276776000" class="indexterm"></a>
<a id="idm30276774704" class="indexterm"></a></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-int"></a>Meta-Node: <code class="literal">int(x)</code></h4></div></div></div><p><a id="idm30276772080" class="indexterm"></a>
<a id="idm30276770528" class="indexterm"></a>
<a id="idm30276769232" class="indexterm"></a></p><p>Converts <code class="literal">x</code> to an <span class="strong"><strong>integer</strong></span> value.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
If <code class="literal">x</code> is an <span class="strong"><strong>integer</strong></span> returns <code class="literal">x</code>.
</li><li class="listitem">
If <code class="literal">x</code> is a <span class="strong"><strong>real</strong></span> returns <code class="literal">x</code> with the fractional part
      truncated.
</li><li class="listitem">
If <code class="literal">x</code> is a <span class="strong"><strong>string</strong></span>, attempts to parse an integer from
      <code class="literal">x</code>. Returns the parsed value if successful otherwise
      returns a failure of type <a class="link" href="#node-invalid-integer" title="Failure Type Node: Invalid-Integer"><code class="literal">Invalid-Integer</code></a>.
</li></ul></div><p>If <code class="literal">x</code> is neither of the above returns a failure of type
<a class="link" href="#node-type-error" title="Failure Type Node: Type-Error"><code class="literal">Type-Error</code></a>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to convert to an integer.
</p>
</td></tr></tbody></table></div><h5><a id="_pattern_matching_7"></a>Pattern Matching</h5><p>Matches if the source node is an <span class="strong"><strong>integer</strong></span>, in which case <code class="literal">x</code> is
matched to the integer value. <span class="emphasis"><em>See <a class="xref" href="#pattern_matching" title="5.16. Pattern Matching">Pattern Matching</a></em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-real"></a>Meta-Node: <code class="literal">real(x)</code></h4></div></div></div><p><a id="idm30276743328" class="indexterm"></a>
<a id="idm30276741760" class="indexterm"></a>
<a id="idm30276740464" class="indexterm"></a></p><p>Converts <code class="literal">x</code> to a <span class="strong"><strong>real</strong></span> number value.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
If <code class="literal">x</code> is an <span class="strong"><strong>integer</strong></span> or <span class="strong"><strong>real</strong></span> returns <code class="literal">x</code>.
</li><li class="listitem">
If <code class="literal">x</code> is a <span class="strong"><strong>string</strong></span>, attempts to parse a real number from
      <code class="literal">x</code>. Returns the parsed value if successful otherwise
      returns a failure of type <a class="link" href="#node-invalid-real" title="Failure Type Node: Invalid-Real"><code class="literal">Invalid-Real</code></a>.
</li></ul></div><p>If <code class="literal">x</code> is neither of the above returns a failure of type
<a class="link" href="#node-type-error" title="Failure Type Node: Type-Error"><code class="literal">Type-Error</code></a>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to convert to a real.
</p>
</td></tr></tbody></table></div><h5><a id="_pattern_matching_8"></a>Pattern Matching</h5><p>Matches if the source node is a <span class="strong"><strong>real</strong></span>, in which case <code class="literal">x</code> is matched
to the real value. <span class="emphasis"><em>See <a class="xref" href="#pattern_matching" title="5.16. Pattern Matching">Pattern Matching</a></em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-string"></a>Meta-Node: <code class="literal">string(x)</code></h4></div></div></div><p><a id="idm30276716736" class="indexterm"></a>
<a id="idm30276715168" class="indexterm"></a>
<a id="idm30276713872" class="indexterm"></a></p><p>Converts <code class="literal">x</code> to a <span class="strong"><strong>string</strong></span>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to convert to a string.
</p>
</td></tr></tbody></table></div><h5><a id="_pattern_matching_9"></a>Pattern Matching</h5><p>Matches if the source node is a <span class="strong"><strong>string</strong></span>, in which case <code class="literal">x</code> is matched
to the string value. <span class="emphasis"><em>See <a class="xref" href="#pattern_matching" title="5.16. Pattern Matching">Pattern Matching</a></em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-to-int"></a>Meta-Node: <code class="literal">to-int(x)</code></h4></div></div></div><p><a id="idm30276700320" class="indexterm"></a>
<a id="idm30276698752" class="indexterm"></a>
<a id="idm30276697456" class="indexterm"></a></p><p>Converts <code class="literal">x</code> to an <span class="strong"><strong>integer</strong></span> value.</p><p>Same as <a class="link" href="#meta-node-int" title="Meta-Node: int(x)"><code class="literal">int</code></a> however with the <code class="literal">target-node</code>
attribute set to <a class="link" href="#meta-node-int" title="Meta-Node: int(x)"><code class="literal">int</code></a>. As such, in the following:</p><pre class="screen">a -&gt; to-int(b)</pre><p>Node <code class="literal">b</code> is set to the value of <code class="literal">a</code> converted to an integer.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to convert.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-to-real"></a>Meta-Node: <code class="literal">to-real(x)</code></h4></div></div></div><p><a id="idm30276681968" class="indexterm"></a>
<a id="idm30276680400" class="indexterm"></a>
<a id="idm30276679104" class="indexterm"></a></p><p>Converts <code class="literal">x</code> to an <span class="strong"><strong>real</strong></span> number value.</p><p>Same as <a class="link" href="#meta-node-real" title="Meta-Node: real(x)"><code class="literal">real</code></a> however with the <code class="literal">target-node</code>
attribute set to <a class="link" href="#meta-node-real" title="Meta-Node: real(x)"><code class="literal">real</code></a>. As such, in the following:</p><pre class="screen">a -&gt; to-real(b)</pre><p>Node <code class="literal">b</code> is set to the value of <code class="literal">a</code> converted to a real number.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to convert.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-to-string"></a>Meta-Node: <code class="literal">to-string(x)</code></h4></div></div></div><p><a id="idm30276663520" class="indexterm"></a>
<a id="idm30276661952" class="indexterm"></a>
<a id="idm30276660656" class="indexterm"></a></p><p>Converts <code class="literal">x</code> to an <span class="strong"><strong>integer</strong></span> value.</p><p>Same as <a class="link" href="#meta-node-string" title="Meta-Node: string(x)"><code class="literal">string</code></a> however with the <code class="literal">target-node</code>
attribute set to <a class="link" href="#meta-node-string" title="Meta-Node: string(x)"><code class="literal">string</code></a>. As such, in the following:</p><pre class="screen">a -&gt; to-string(b)</pre><p>Node <code class="literal">b</code> is set to the value of <code class="literal">a</code> converted to a string.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to convert.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-intp"></a>Meta-Node: <code class="literal">int?(x)</code></h4></div></div></div><p><a id="idm30276645072" class="indexterm"></a>
<a id="idm30276643504" class="indexterm"></a>
<a id="idm30276642208" class="indexterm"></a></p><p>Returns true if <code class="literal">x</code> is an <span class="strong"><strong>integer</strong></span>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to test.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-realp"></a>Meta-Node: <code class="literal">real?(x)</code></h4></div></div></div><p><a id="idm30276632368" class="indexterm"></a>
<a id="idm30276630800" class="indexterm"></a>
<a id="idm30276629504" class="indexterm"></a></p><p>Returns true if <code class="literal">x</code> is a <span class="strong"><strong>real</strong></span>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to test.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-stringp"></a>Meta-Node: <code class="literal">string?(x)</code></h4></div></div></div><p><a id="idm30276619680" class="indexterm"></a>
<a id="idm30276618112" class="indexterm"></a>
<a id="idm30276616816" class="indexterm"></a></p><p>Returns true if <code class="literal">x</code> is a <span class="strong"><strong>string</strong></span>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to test.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-infp"></a>Meta-Node: <code class="literal">inf?(x)</code></h4></div></div></div><p><a id="idm30276607056" class="indexterm"></a>
<a id="idm30276605488" class="indexterm"></a>
<a id="idm30276604192" class="indexterm"></a></p><p>Returns true if <code class="literal">x</code> is either positive or negative infinity.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to test.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-nanp"></a>Meta-Node: <code class="literal">NaN?(x)</code></h4></div></div></div><p><a id="idm30276594960" class="indexterm"></a>
<a id="idm30276593392" class="indexterm"></a>
<a id="idm30276592096" class="indexterm"></a></p><p>Returns true if <code class="literal">x</code> is a <span class="strong"><strong>NaN</strong></span> value.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
The value to test.
</p>
</td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_lists"></a>5.11. Lists</h3></div></div></div><p><a id="idm30276582656" class="indexterm"></a>
<a id="idm30276581392" class="indexterm"></a></p><p>Lists are represented by a special <code class="literal">cons</code> type, in which the <span class="emphasis"><em>head</em></span>
stores the first element of the list and the <span class="emphasis"><em>tail</em></span> stores the list of
remaining elements. Neither the <span class="emphasis"><em>head</em></span> nor the <span class="emphasis"><em>tail</em></span> are evaluated
until they are actually referenced and used.</p><p>The empty list is represented by the value of the node <a class="link" href="#node-Empty" title="Node: Empty"><code class="literal">Empty</code></a>.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-cons"></a>Meta-Node: <code class="literal">cons(head, tail)</code></h4></div></div></div><p><a id="idm30276574096" class="indexterm"></a>
<a id="idm30276572528" class="indexterm"></a>
<a id="idm30276571232" class="indexterm"></a></p><p>Creates a list with the <code class="literal">head</code> as the first element and <code class="literal">tail</code> as
the list of remaining elements.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">head</code>
</p>
</td><td style="" valign="top">
<p>
The first element of the list.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">tail</code>
</p>
</td><td style="" valign="top">
<p>
The list containing the remaining elements after the first.
</p>
</td></tr></tbody></table></div><h5><a id="_pattern_matching_10"></a>Pattern Matching</h5><p>Matches if the source node is a non-empty list, in which case <code class="literal">head</code>
is matched to the <span class="emphasis"><em>head</em></span> of the list and tail is matched to the <span class="emphasis"><em>tail</em></span>
of the list. <span class="emphasis"><em>See <a class="xref" href="#pattern_matching" title="5.16. Pattern Matching">Pattern Matching</a></em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-head"></a>Meta-Node: head(list)</h4></div></div></div><p><a id="idm30276555152" class="indexterm"></a>
<a id="idm30276553600" class="indexterm"></a>
<a id="idm30276552304" class="indexterm"></a></p><p>Returns the <span class="emphasis"><em>head</em></span> (first element) of a list.</p><p>If <code class="literal">list</code> is the empty list, returns a failure of type
<a class="link" href="#node-Empty" title="Node: Empty"><code class="literal">Empty</code></a>.</p><p>If <code class="literal">list</code> is not a list returns a failure value of type
<a class="link" href="#node-type-error" title="Failure Type Node: Type-Error"><code class="literal">Type-Error</code></a>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
The list.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-tail"></a>Meta-Node: <code class="literal">tail(list)</code></h4></div></div></div><p><a id="idm30276538912" class="indexterm"></a>
<a id="idm30276537344" class="indexterm"></a>
<a id="idm30276536048" class="indexterm"></a></p><p>Returns the <span class="emphasis"><em>tail</em></span>, the list containing the elements after the first
element, of a list.</p><p>If <code class="literal">list</code> is the empty list, returns a failure of type
<a class="link" href="#node-Empty" title="Node: Empty"><code class="literal">Empty</code></a>.</p><p>If <code class="literal">list</code> is not a list returns a failure value of type
<a class="link" href="#node-type-error" title="Failure Type Node: Type-Error"><code class="literal">Type-Error</code></a>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
The list.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-consp"></a>Meta-Node: <code class="literal">cons?(thing)</code></h4></div></div></div><p><a id="idm30276522512" class="indexterm"></a>
<a id="idm30276520944" class="indexterm"></a>
<a id="idm30276519648" class="indexterm"></a></p><p>Returns true if <code class="literal">thing</code> is a list of at least one element, false
otherwise.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Does not return true if <code class="literal">thing</code> is the empty list.</p></td></tr></table></div><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
The list.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="node-Empty"></a>Node: Empty</h4></div></div></div><p><a id="idm30276509696" class="indexterm"></a>
<a id="idm30276508144" class="indexterm"></a>
<a id="idm30276506848" class="indexterm"></a>
<a id="idm30276505824" class="indexterm"></a>
<a id="idm30276504256" class="indexterm"></a>
<a id="idm30276502960" class="indexterm"></a></p><p>The value of this node represents the empty list.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_node_literal_empty_literal"></a>Node: <code class="literal">Empty!</code></h4></div></div></div><p><a id="idm30276499616" class="indexterm"></a>
<a id="idm30276498048" class="indexterm"></a>
<a id="idm30276496752" class="indexterm"></a></p><p>The value of this node is a failure of type <a class="link" href="#node-Empty" title="Node: Empty"><code class="literal">Empty</code></a>. This failure is returned when attempting to access the
<span class="emphasis"><em>head</em></span> or <span class="emphasis"><em>tail</em></span> of an empty list.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-list"></a>Meta-Node: <code class="literal">list(..(xs))</code></h4></div></div></div><p><a id="idm30276491408" class="indexterm"></a>
<a id="idm30276489872" class="indexterm"></a>
<a id="idm30276488576" class="indexterm"></a></p><p>Creates a list with elements <code class="literal">xs</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">xs</code>
</p>
</td><td style="" valign="top">
<p>
The list elements.
</p>
</td></tr></tbody></table></div><h5><a id="_pattern_matching_11"></a>Pattern Matching</h5><p>Matches if the source node is a list of the same size as <code class="literal">xs</code>, in
which case each argument in <code class="literal">xs</code> is matched to the corresponding list
element. <span class="emphasis"><em>See <a class="xref" href="#pattern_matching" title="5.16. Pattern Matching">Pattern Matching</a></em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-list-star"></a>Meta-Node: <code class="literal">list*(..(xs))</code></h4></div></div></div><p><a id="idm30276475536" class="indexterm"></a>
<a id="idm30276473968" class="indexterm"></a>
<a id="idm30276472672" class="indexterm"></a></p><p>Creates a list containing, as elements, all the arguments in <code class="literal">xs</code>
excluding the last. The last argument in <code class="literal">xs</code> is treated as a list
containing the remaining elements.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">xs</code>
</p>
</td><td style="" valign="top">
<p>
The list elements, with the last argument being the list
containing the remaining elements.
</p>
</td></tr></tbody></table></div><h5><a id="_pattern_matching_12"></a>Pattern Matching</h5><p>Matches if the source node is a list of at least one less elements
that the number of elements in <code class="literal">xs</code>. The arguments, excluding the
last, are matched to the corresponding elements in the list with the
last argument being matched to the remaining list elements. <span class="emphasis"><em>See
<a class="xref" href="#pattern_matching" title="5.16. Pattern Matching">Pattern Matching</a></em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-list-bang"></a>Meta-Node: <code class="literal">list!(..(xs))</code></h4></div></div></div><p><a id="idm30276459168" class="indexterm"></a>
<a id="idm30276457600" class="indexterm"></a>
<a id="idm30276456304" class="indexterm"></a></p><p>Creates a list containing, as elements, all the arguments in <code class="literal">xs</code>.</p><p>Unlike <code class="literal">list</code>, if at least one of <code class="literal">xs</code> fails to evaluate to a value,
the failure is returned.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">xs</code>
</p>
</td><td style="" valign="top">
<p>
The list elements.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-nth"></a>Meta-Node: <code class="literal">nth(list, n)</code></h4></div></div></div><p><a id="idm30276445360" class="indexterm"></a>
<a id="idm30276443776" class="indexterm"></a>
<a id="idm30276442480" class="indexterm"></a></p><p>Retrieves the element of a list at a particular index.</p><p>Returns a failure of type <a class="link" href="#node-index-out-bounds" title="Failure Type Node: Index-Out-Bounds"><code class="literal">Index-Out-Bounds</code></a> if <code class="literal">n</code> is greater than the number of elements in
<code class="literal">list</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
The list.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">n</code>
</p>
</td><td style="" valign="top">
<p>
The index of the element to retrieved.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-append"></a>Meta-Node: <code class="literal">append(list1, list2)</code></h4></div></div></div><p><a id="idm30276428272" class="indexterm"></a>
<a id="idm30276426704" class="indexterm"></a>
<a id="idm30276425408" class="indexterm"></a></p><p>Returns a list containing the elements of <code class="literal">list2</code> appended to
<code class="literal">list1</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">list1</code>
</p>
</td><td style="" valign="top">
<p>
The initial list.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">list2</code>
</p>
</td><td style="" valign="top">
<p>
The list which is appended onto <code class="literal">list1</code>.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-foldl1"></a>Meta-Node: <code class="literal">foldl'(x, f, list)</code></h4></div></div></div><p><a id="idm30276412240" class="indexterm"></a>
<a id="idm30276410672" class="indexterm"></a>
<a id="idm30276409376" class="indexterm"></a></p><p>Folds a list to a single value, starting from the first element.</p><p>The function <code class="literal">f</code> is first applied on <code class="literal">x</code> and the <a class="link" href="#meta-node-head" title="Meta-Node: head(list)"><span class="emphasis"><em>head</em></span></a> of
<code class="literal">list</code>. Subsequently, <code class="literal">f</code> is applied on the result of the previous
application and the next element of <code class="literal">list</code>, until the end of <code class="literal">list</code> is
reached.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="" valign="top">
<p>
Initial first argument to <code class="literal">f</code>.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">f</code>
</p>
</td><td style="" valign="top">
<p>
Function of two arguments.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
List to fold.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-foldl"></a>Meta-Node: <code class="literal">foldl(f, list)</code></h4></div></div></div><p><a id="idm30276389456" class="indexterm"></a>
<a id="idm30276387888" class="indexterm"></a>
<a id="idm30276386592" class="indexterm"></a></p><p>Folds a list to a single value, starting from the first element.</p><p>Same as <a class="link" href="#meta-node-foldl1" title="Meta-Node: foldl'(x, f, list)"><code class="literal">foldl'</code></a> except the <a class="link" href="#meta-node-head" title="Meta-Node: head(list)"><span class="emphasis"><em>head</em></span></a> of <code class="literal">list</code> is used as the initial first argument to the fold
function <code class="literal">f</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">f</code>
</p>
</td><td style="" valign="top">
<p>
Function of two arguments.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
List to fold.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-foldr"></a>Meta-Node: <code class="literal">foldr(f, list, :(x))</code></h4></div></div></div><p><a id="idm30276371472" class="indexterm"></a>
<a id="idm30276369904" class="indexterm"></a>
<a id="idm30276368608" class="indexterm"></a></p><p>Folds a list to a single value, starting from the last element.</p><p><code class="literal">f</code> is first applied on the last element of <code class="literal">list</code> and the value of
<code class="literal">x</code>. If the <code class="literal">x</code> argument is not provided or <code class="literal">x</code> evaluates to a failure
of type <a class="link" href="#node-no-value" title="Failure Type Node: No-Value"><code class="literal">No-Value</code></a>, <code class="literal">f</code> is first applied on the
last two elements of <code class="literal">list</code>. Subsequently <code class="literal">f</code> is applied on the
previous element of <code class="literal">list</code> and the result of the previous application,
until the <span class="emphasis"><em>head</em></span> of list <code class="literal">list</code> is reached.</p><p>If <code class="literal">list</code> only has a single element and <code class="literal">x</code> is not provided, the
element is returned as is. If <code class="literal">l</code> is empty and <code class="literal">x</code> is provided, <code class="literal">x</code> is
returned as is.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">f</code>
</span></dt><dd>
Function of two arguments.
</dd><dt><span class="term">
<code class="literal">list</code>
</span></dt><dd>
List to fold.
</dd><dt><span class="term">
<code class="literal">x</code> (<span class="emphasis"><em>Optional</em></span>)
</span></dt><dd>
Second argument to the application of <code class="literal">f</code> on the
last element of <code class="literal">list</code>.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-map"></a>Meta-Node: <code class="literal">map(f, list)</code></h4></div></div></div><p><a id="idm30276344208" class="indexterm"></a>
<a id="idm30276342656" class="indexterm"></a>
<a id="idm30276341360" class="indexterm"></a></p><p>Applies a function on each element of a list.</p><p>Returns a list containing the result of applying <code class="literal">f</code> on each element
of <code class="literal">list</code> in turn.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">f</code>
</p>
</td><td style="" valign="top">
<p>
Function of one argument.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
The list.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-filter"></a>Meta-Node: <code class="literal">filter(f, list)</code></h4></div></div></div><p><a id="idm30276328336" class="indexterm"></a>
<a id="idm30276326768" class="indexterm"></a>
<a id="idm30276325472" class="indexterm"></a></p><p>Filters elements from a list.</p><p>Returns a list containing only the elements of <code class="literal">list</code> for which the
function <code class="literal">f</code> returns true.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">f</code>
</p>
</td><td style="" valign="top">
<p>
Function of one argument, which should return true if the
argument should be retained in the list or false if it should be
removed.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
The list to filter.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-everyp"></a>Meta-Node: <code class="literal">every?(f, list)</code></h4></div></div></div><p><a id="idm30276312336" class="indexterm"></a>
<a id="idm30276310768" class="indexterm"></a>
<a id="idm30276309472" class="indexterm"></a></p><p>Returns true if <code class="literal">f</code> returns true for every element of <code class="literal">list</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">f</code>
</p>
</td><td style="" valign="top">
<p>
Function of one argument.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
The list.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-somep"></a>Meta-Node: <code class="literal">some?(f, list)</code></h4></div></div></div><p><a id="idm30276297024" class="indexterm"></a>
<a id="idm30276295456" class="indexterm"></a>
<a id="idm30276294160" class="indexterm"></a></p><p>Returns true if <code class="literal">f</code> returns true for at least one element of <code class="literal">list</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">f</code>
</p>
</td><td style="" valign="top">
<p>
Function of one argument.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
The list.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-not-anyp"></a>Meta-Node: <code class="literal">not-any?(f, list)</code></h4></div></div></div><p><a id="idm30276281680" class="indexterm"></a>
<a id="idm30276280112" class="indexterm"></a>
<a id="idm30276278816" class="indexterm"></a></p><p>Returns true if <code class="literal">f</code> returns false for every element of <code class="literal">list</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">f</code>
</p>
</td><td style="" valign="top">
<p>
Function of one argument.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
The list.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-not-everyp"></a>Meta-Node: <code class="literal">not-every?(f, list)</code></h4></div></div></div><p><a id="idm30276266288" class="indexterm"></a>
<a id="idm30276264720" class="indexterm"></a>
<a id="idm30276263424" class="indexterm"></a></p><p>Returns true if <code class="literal">f</code> returns false for at least one element of <code class="literal">list</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">f</code>
</p>
</td><td style="" valign="top">
<p>
Function of one argument.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
The list.
</p>
</td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_strings_2"></a>5.12. Strings</h3></div></div></div><p><a id="idm30276251328" class="indexterm"></a>
<a id="idm30276250032" class="indexterm"></a></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-string-at"></a>Meta-Node: <code class="literal">string-at(string, index)</code></h4></div></div></div><p><a id="idm30276247360" class="indexterm"></a>
<a id="idm30276245792" class="indexterm"></a>
<a id="idm30276244496" class="indexterm"></a></p><p>Returns the character at a given index in the string.</p><p>If the index is greater than the number of characters in this string,
returns a failure of type <a class="link" href="#node-index-out-bounds" title="Failure Type Node: Index-Out-Bounds"><code class="literal">Index-Out-Bounds</code></a>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">string</code>
</p>
</td><td style="" valign="top">
<p>
The string.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">index</code>
</p>
</td><td style="" valign="top">
<p>
The index of the character.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-string-concat"></a>Meta-Node: <code class="literal">string-concat(string, str1, str2)</code></h4></div></div></div><p><a id="idm30280063760" class="indexterm"></a>
<a id="idm30288728768" class="indexterm"></a>
<a id="idm30288727584" class="indexterm"></a></p><p>Concatenates <code class="literal">str2</code> to the end of <code class="literal">str1</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">str1</code>
</p>
</td><td style="" valign="top">
<p>
The first string.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">str2</code>
</p>
</td><td style="" valign="top">
<p>
The string which is concatenated to <code class="literal">str1</code>.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-string-to-list"></a>Meta-Node: <code class="literal">string-&gt;list(string)</code></h4></div></div></div><p><a id="idm30288716576" class="indexterm"></a>
<a id="idm30288714912" class="indexterm"></a>
<a id="idm30288713760" class="indexterm"></a></p><p>Returns a list containing the characters in a string.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">string</code>
</p>
</td><td style="" valign="top">
<p>
The string.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-list-to-string"></a>Meta-Node: <code class="literal">list-&gt;string(list)</code></h4></div></div></div><p><a id="idm30288706720" class="indexterm"></a>
<a id="idm30288705056" class="indexterm"></a>
<a id="idm30288703904" class="indexterm"></a></p><p>Returns a string containing the concatenation of the elements in a list.</p><p>Each element of <code class="literal">list</code> is converted to a string and concatenated to
the result string.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">list</code>
</p>
</td><td style="" valign="top">
<p>
List of elements to concatenate.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-format"></a>Meta-Node: <code class="literal">format(string, ..(args))</code></h4></div></div></div><p><a id="idm30288695552" class="indexterm"></a>
<a id="idm30288694048" class="indexterm"></a>
<a id="idm30288692800" class="indexterm"></a></p><p>Creates a formatted string, in which placeholders are replaced by the
arguments in <code class="literal">args</code>.</p><p>The sequence <code class="literal">%s</code> designates a placeholder which is to be replaced by
an argument. The first placeholder is replaced by the first argument,
the second with the second argument and so on. Each argument is
converted to a string prior to being substituted into the result
string.</p><p>The sequence <code class="literal">%%</code> designates a literal <code class="literal">%</code> character and is thus
replaced with a <code class="literal">%</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">string</code>
</p>
</td><td style="" valign="top">
<p>
The format string.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">args</code>
</p>
</td><td style="" valign="top">
<p>
The arguments to substitute into the string.
</p>
</td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_dictionaries"></a>5.13. Dictionaries</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_meta_node_literal_member_dict_key_literal"></a>Meta-Node: <code class="literal">member(dict, key)</code></h4></div></div></div><p>Retrieves the value of an entry in a dictionary.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">dict</code>
</p>
</td><td style="" valign="top">
<p>
The dictionary.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">key</code>
</p>
</td><td style="" valign="top">
<p>
The entry key.
</p>
</td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_functions"></a>5.14. Functions</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_meta_node_literal_apply_f_xs_literal"></a>Meta-Node: <code class="literal">apply(f, ..(xs))</code></h4></div></div></div><p><a id="idm30288680688" class="indexterm"></a>
<a id="idm30288679184" class="indexterm"></a>
<a id="idm30288677936" class="indexterm"></a></p><p>Applies a function on an argument list.</p><p>The argument list, on which <code class="literal">f</code> is applied consist of each argument of
<code class="literal">xs</code>, excluding the last, followed by each element of the last
argument of <code class="literal">xs</code>.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">f</code>
</p>
</td><td style="" valign="top">
<p>
The function to apply.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">xs</code>
</p>
</td><td style="" valign="top">
<p>
The arguments to apply <code class="literal">f</code> on.
</p>
</td></tr></tbody></table></div><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If <code class="literal">f</code> is not a function or the last argument of <code class="literal">xs</code> is not
a list, a failure of type <a class="link" href="#node-type-error" title="Failure Type Node: Type-Error"><code class="literal">Type-Error</code></a>, is
returned.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_introspection"></a>5.15. Introspection</h3></div></div></div><p><a id="idm30276215872" class="indexterm"></a>
<a id="idm30276214560" class="indexterm"></a></p><p>The <code class="literal">core/introspection</code> module provides utility meta-nodes for
introspecting the nodes comprising a program. These meta-nodes may
only be used within macro nodes, during macro expansion, as runtime
definitions are not available.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-nodep"></a>Meta-Node: <code class="literal">node?(thing)</code></h4></div></div></div><p><a id="idm30276210576" class="indexterm"></a>
<a id="idm30276209008" class="indexterm"></a>
<a id="idm30276207712" class="indexterm"></a></p><p>Returns true if <code class="literal">thing</code> is a node object.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">thing</code>
</p>
</td><td style="" valign="top">
<p>
The thing to check whether it is a node.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_meta_node_literal_find_node_node_module_literal"></a>Meta-Node: <code class="literal">find-node(node, :(module))</code></h4></div></div></div><p><a id="idm30280059152" class="indexterm"></a>
<a id="idm30280057744" class="indexterm"></a>
<a id="idm30276203488" class="indexterm"></a></p><p>Looks-up a node in a module.</p><p>Returns the node object or a failure if no node is found.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">node</code>
</span></dt><dd>
The node to lookup, which can be any node expression.
</dd><dt><span class="term">
<code class="literal">module</code> (<span class="emphasis"><em>Optional</em></span>)
</span></dt><dd>
The module in which to look-up the
node. Defaults to the current module, set by the last <code class="literal">/module</code>
declaration that is processed.
</dd></dl></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Currently there is no way to retrieve a module object, thus the
<code class="literal">module</code> argument is not used. This functionality will be added in a
future release.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_meta_node_literal_get_attribute_node_attribute_literal"></a>Meta-Node: <code class="literal">get-attribute(node, attribute)</code></h4></div></div></div><p><a id="idm30276192064" class="indexterm"></a>
<a id="idm30276190496" class="indexterm"></a>
<a id="idm30276189200" class="indexterm"></a></p><p>Retrieves the value of an attribute of a node.</p><p>Returns a failure if the attribute is not set.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">node</code>
</p>
</td><td style="" valign="top">
<p>
The node object.
</p>
</td></tr><tr><td style="" valign="top">
<p>
<code class="literal">attribute</code>
</p>
</td><td style="" valign="top">
<p>
The attribute identifier.
</p>
</td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="pattern_matching"></a>5.16. Pattern Matching</h3></div></div></div><p><a id="idm30280053328" class="indexterm"></a>
<a id="idm30280052080" class="indexterm"></a>
<a id="idm30280051088" class="indexterm"></a>
<a id="idm30280049584" class="indexterm"></a>
<a id="idm30280048336" class="indexterm"></a></p><p>Pattern matching is provided by the core module in the form of
bindings involving the meta-node instance, which is to be matched, as
the target. The binding succeeds if the pattern matches, otherwise it
fails.</p><p>A meta-node which supports pattern matching, has a <code class="literal">target-node</code> or
<code class="literal">target-transform</code>, <span class="emphasis"><em>see <a class="xref" href="#_instances_as_targets" title="3.7. Instances as Targets">Section 3.7, “Instances as Targets”</a></em></span>, such that when an
instance of the meta-node appears as the target of a binding, the
argument nodes are bound to the values, required in order for the
meta-node to return a value that is equivalent to the value of the
source node. When there are such values, the pattern is said to have
<span class="emphasis"><em>matched</em></span>. If there is no possible value for at least one argument
node, all argument nodes should evaluate to failures of type
<a class="link" href="#match-fail" title="Failure Type Node: Match-Fail"><code class="literal">Match-Fail</code></a>. In this case the pattern has not
<span class="emphasis"><em>matched</em></span></p><p><strong>Example. </strong>
</p><pre class="screen">x -&gt; int(y)</pre><p>
</p><p>In the example, above, <code class="literal">y</code> is bound to the value of <code class="literal">x</code> if it is an
integer, otherwise <code class="literal">y</code> evaluates to a failure. There is no argument
which will result in <code class="literal">int</code> returning a non-integer value thus if the
source node, <code class="literal">x</code>, is not an integer the argument node, <code class="literal">y</code>, is bound
to a failure. Since <code class="literal">int</code> returns the value of its argument directly,
when it is an integer, the argument node is simply bound to the source
node.</p><p><strong>Example. </strong>
</p><pre class="screen">x -&gt; list(y, z)</pre><p>
</p><p>In the example, above, <code class="literal">y</code> is bound to the first element of <code class="literal">x</code> and
<code class="literal">z</code> is bound to the second element of <code class="literal">x</code> if <code class="literal">x</code> is a list of two
elements. These bindings will result in a list, equivalent to <code class="literal">x</code>,
being produced when <code class="literal">y</code> and <code class="literal">z</code> are passed as arguments to the <code class="literal">list</code>
meta-node.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_nested_patterns"></a>Nested Patterns</h4></div></div></div><p><a id="idm30280026896" class="indexterm"></a>
<a id="idm30280025392" class="indexterm"></a>
<a id="idm30280024144" class="indexterm"></a></p><p>Patterns may be nested, that is an argument to a meta-node instance is
itself a meta-node instance of which the operator meta-node supports
pattern matching. When the arguments contain one or more nested
patterns, the bindings to the argument nodes should only succeed if
all nested patterns <span class="emphasis"><em>match</em></span>.</p><p><strong>Example. </strong>
</p><pre class="screen">x -&gt; list(int(y), z)</pre><p>
</p><p>The example, above, is similar to the previous example except with the
additional condition that the first element of <code class="literal">x</code> should also be an
integer. That is <code class="literal">y</code> is bound to the first element of <code class="literal">x</code> and <code class="literal">z</code> to
the second element of <code class="literal">x</code> if <code class="literal">x</code> is a list of two elements of which
the first element is an integer.</p><p>When <code class="literal">_</code> appears nested inside a pattern it matches anything and does
not establish any bindings. This is used to indicate that the value
for a particular argument is unimportant.</p><p><strong>Example. </strong>
</p><pre class="screen">x -&gt; list(_, y)</pre><p>
</p><p>In the example, above, <code class="literal">y</code> is bound to the second element of <code class="literal">x</code> if it
is a list of two elements. The value of the first element of <code class="literal">x</code> is
ignored completely.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_constant_patterns"></a>Constant Patterns</h4></div></div></div><p><a id="idm30280009568" class="indexterm"></a>
<a id="idm30280008064" class="indexterm"></a>
<a id="idm30280006816" class="indexterm"></a></p><p>Constant patterns comprise a constant value as opposed to a
node. These patterns <span class="emphasis"><em>match</em></span> when the source node is equal, by
<a class="link" href="#meta-node-eq" title="Meta-Node: =(a, b)"><code class="literal">=</code></a>, to the constant value. Constant patterns do not
result in any bindings being established however they do affect the
condition of the pattern in which they are nested.</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Constant patterns may only be used when nested inside a
non-constant pattern.</p></td></tr></table></div><p>Constant values include any literal constants, such as numbers,
strings as well as character literals, produced by the <a class="link" href="#macro-node-c" title="Macro-Node: c(x)"><code class="literal">c</code></a> macro, and literal symbols, produced by the
<a class="link" href="#macro-node-quote" title="Macro-Node: '(x)"><code class="literal">'</code></a> macro.</p><p><strong>Example. </strong>
</p><pre class="screen">x -&gt; list(1, y, z)</pre><p>
</p><p>In the example, above, <code class="literal">y</code> is bound to the second element of <code class="literal">x</code> and
<code class="literal">z</code> to the third element of <code class="literal">x</code> if <code class="literal">x</code> is a list of three elements of
which the first element is equal to <code class="literal">1</code>.</p><p>The following are examples of invalid uses of constant patterns:</p><p><strong>Examples: Invalid use of Constant Patterns. </strong>
</p><pre class="screen"># Invalid as the pattern is not nested
x -&gt; 1

# Invalid as at least one argument should not be a constant.
x -&gt; list(1, 2)</pre><p>
</p><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Functor nodes, of which the arguments are all constants, such
as <code class="literal">1 + 1</code>, are only treated as constant patterns if the meta-node
supports pattern matching. In this case the <code class="literal">+</code> meta-node does not
support pattern matching, thus <code class="literal">1 + 1</code> is currently not treated as a
constant pattern.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="matchers"></a>Matchers</h4></div></div></div><p><a id="idm30279988336" class="indexterm"></a>
<a id="idm30279986832" class="indexterm"></a>
<a id="idm30279985584" class="indexterm"></a>
<a id="idm30279984592" class="indexterm"></a>
<a id="idm30279983088" class="indexterm"></a>
<a id="idm30279981840" class="indexterm"></a></p><p>The <code class="literal">matcher</code> node attribute stores a meta-node which is called to
construct the pattern for a given list of arguments. The <span class="emphasis"><em>matcher</em></span>
meta-node is called with two arguments: the place to be matched, which
should become the <span class="emphasis"><em>source</em></span> node of any bindings established by the
pattern, and the pattern <span class="emphasis"><em>functor</em></span> expression itself (including the
operator). The meta-node should return a <code class="literal">Pattern</code> object, which is a
dictionary containing the following entries:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">condition</code>
</span></dt><dd>
The node expression which evaluates to true if the
pattern matches. This should include the conditions of the argument
nodes if they are patterns themselves.
</dd><dt><span class="term">
<code class="literal">bindings</code>
</span></dt><dd><p class="simpara">
List of bindings established by the pattern. If there are
no bindings established by the pattern, then this entry should be set
to the empty list, <span class="emphasis"><em>see <a class="link" href="#node-Empty" title="Node: Empty"><code class="literal">Empty</code></a></em></span>.
</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The bindings should not be conditioned on <code class="literal">condition</code> as
they will be conditioned later when the node declarations for the
entire pattern (including the parent patterns) is constructed. <span class="emphasis"><em>See
<a class="xref" href="#conditional_bindings" title="Conditional Bindings"> Conditional Bindings</a></em></span>.</p></td></tr></table></div></dd></dl></div><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Pattern objects may be created with the <a class="link" href="#meta-node-Pattern" title="Meta-Node: Pattern(condition, :(binding))"><code class="literal">Pattern</code></a> meta-node.</p></td></tr></table></div><p>All bindings, established by a pattern, should be established in an
explicit context with identifier <code class="literal">match</code>, which is activated only on
failures with type <a class="link" href="#match-fail" title="Failure Type Node: Match-Fail"><code class="literal">Match-Fail</code></a>. This allows
multiple patterns to be specified on a single node, with the node
being set to the value corresponding to the binding of the first
pattern that <span class="emphasis"><em>matches</em></span>.</p><p><strong>Example: Multiple Patterns. </strong>
</p><pre class="screen">x -&gt; int(y)
x -&gt; list(int(y))
x -&gt; list("x", int(y))</pre><p>
</p><p>The example above contains multiple patterns involving a single node
<code class="literal">y</code>.</p><p><code class="literal">y</code> is bound to:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
the value of <code class="literal">x</code> if it is an integer, or
</li><li class="listitem">
the first element of <code class="literal">x</code> if it is a list of one element, which is an
integer, or
</li><li class="listitem">
the second element of <code class="literal">x</code> if it is a list of two elements, with the
first element being the string value <code class="literal">"x"</code> and the second element
being an integer.
</li></ol></div><p>The following meta-nodes in the <code class="literal">core</code> module all have a matcher and
may thus appear within patterns.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="link" href="#macro-node-quote" title="Macro-Node: '(x)"><code class="literal">'</code></a>
</li><li class="listitem">
<a class="link" href="#macro-node-c" title="Macro-Node: c(x)"><code class="literal">c</code></a>
</li><li class="listitem">
<a class="link" href="#meta-node-failsp" title="Meta-Node: fails?(x)"><code class="literal">fails?</code></a>
</li><li class="listitem">
<a class="link" href="#meta-node-and" title="Meta-Node: and(x, y)"><code class="literal">and</code></a>
</li><li class="listitem">
<a class="link" href="#meta-node-or" title="Meta-Node: or(x, y)"><code class="literal">or</code></a>
</li><li class="listitem">
<a class="link" href="#meta-node-not" title="Meta-Node: not(x)"><code class="literal">not</code></a>
</li><li class="listitem">
<a class="link" href="#meta-node-int" title="Meta-Node: int(x)"><code class="literal">int</code></a>
</li><li class="listitem">
<a class="link" href="#meta-node-real" title="Meta-Node: real(x)"><code class="literal">real</code></a>
</li><li class="listitem">
<a class="link" href="#meta-node-string" title="Meta-Node: string(x)"><code class="literal">string</code></a>
</li><li class="listitem">
<a class="link" href="#meta-node-cons" title="Meta-Node: cons(head, tail)"><code class="literal">cons</code></a>
</li><li class="listitem">
<a class="link" href="#meta-node-list" title="Meta-Node: list(..(xs))"><code class="literal">list</code></a>
</li><li class="listitem">
<a class="link" href="#meta-node-list-star" title="Meta-Node: list*(..(xs))"><code class="literal">list*</code></a>
</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_module_core_patterns"></a>5.17. Module: core/patterns</h3></div></div></div><p><a id="idm30279931328" class="indexterm"></a>
<a id="idm30279929824" class="indexterm"></a>
<a id="idm30279928576" class="indexterm"></a></p><p>This module contains utilities for creating and processing patterns.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-Pattern"></a>Meta-Node: <code class="literal">Pattern(condition, :(binding))</code></h4></div></div></div><p><a id="idm30279925728" class="indexterm"></a>
<a id="idm30279924224" class="indexterm"></a>
<a id="idm30279922976" class="indexterm"></a></p><p>Creates a <code class="literal">Pattern</code> object. <span class="emphasis"><em>See <a class="xref" href="#matchers" title="Matchers"> Matchers</a></em></span></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">condition</code>
</span></dt><dd>
The node expression which evaluates to true if the
pattern matches.
</dd><dt><span class="term">
<code class="literal">binding (Optional)</code>
</span></dt><dd>
List of binding expressions of the bindings
established by the pattern. Defaults to the empty list if not
provided.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-get-matcher"></a>Meta-Node: <code class="literal">get-matcher(node)</code></h4></div></div></div><p><a id="idm30288661584" class="indexterm"></a>
<a id="idm30288660080" class="indexterm"></a>
<a id="idm30288658832" class="indexterm"></a></p><p>Returns the <span class="emphasis"><em>matcher</em></span> function, stored in the <code class="literal">matcher</code> attribute of a
node.</p><p>Returns a failure if the node’s <code class="literal">matcher</code> attribute is not set.</p><div class="horizontal"><table class="horizontal" cellpadding="4px" style="border: none;"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td style="" valign="top">
<p>
<code class="literal">node</code>
</p>
</td><td style="" valign="top">
<p>
The node object of which to retrieve the <span class="emphasis"><em>matcher</em></span>.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-make-pattern"></a>Meta-Node: <code class="literal">make-pattern(place, pattern)</code></h4></div></div></div><p><a id="idm30279918880" class="indexterm"></a>
<a id="idm30279917376" class="indexterm"></a>
<a id="idm30279916128" class="indexterm"></a></p><p>Creates the <code class="literal">Pattern</code> object for a pattern expression.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Can be used for any pattern, including constant patterns.</p></td></tr></table></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">place</code>
</span></dt><dd>
The place which should be matched to the pattern, i.e. the
source node of the bindings established by the pattern.
</dd><dt><span class="term">
<code class="literal">pattern</code>
</span></dt><dd>
The pattern expression.
</dd></dl></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If <code class="literal">pattern</code> is a functor expression of which the operator is
not a <code class="literal">meta-node</code> with a <code class="literal">matcher</code>, a <code class="literal">Pattern</code> with a single binding
<code class="literal">place -&gt; pattern</code>, and no <code class="literal">condition</code> is returned.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-combine-conditions"></a>Meta-Node: <code class="literal">combine-conditions(c1, c2)</code></h4></div></div></div><p><a id="idm30279902640" class="indexterm"></a>
<a id="idm30279901136" class="indexterm"></a>
<a id="idm30279899888" class="indexterm"></a></p><p>Returns an expression which is the conjunction of two expressions, by
<a class="link" href="#meta-node-and" title="Meta-Node: and(x, y)"><code class="literal">and</code></a>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">c1</code>
</span></dt><dd>
The first condition, on the left hand side of the <code class="literal">and</code>.
</dd><dt><span class="term">
<code class="literal">c2</code>
</span></dt><dd>
The second condition, on the right hand side of the <code class="literal">and</code>.
</dd></dl></div><p>If <code class="literal">c1</code> evaluates to a failure, returns <code class="literal">c2</code>. If <code class="literal">c2</code> evaluates to a
failure, returns <code class="literal">c1</code>.</p><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This is useful for creating a condition which combines the
conditions of multiple argument nodes.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-conditionalize-bindings"></a>Meta-Node: conditionalize-bindings(condition, bindings)</h4></div></div></div><p><a id="idm30279886640" class="indexterm"></a>
<a id="idm30279885136" class="indexterm"></a>
<a id="idm30279883888" class="indexterm"></a></p><p>Returns a list where each binding in <code class="literal">bindings</code> is conditioned on
<code class="literal">condition</code>. <span class="emphasis"><em>See <a class="xref" href="#conditional_bindings" title="Conditional Bindings"> Conditional Bindings</a></em></span>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">condition</code>
</span></dt><dd>
The condition on which to condition the bindings.
</dd><dt><span class="term">
<code class="literal">bindings</code>
</span></dt><dd>
List of bindings to condition.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="match-fail"></a>Failure Type Node: Match-Fail</h4></div></div></div><p><a id="idm30279874064" class="indexterm"></a>
<a id="idm30279872528" class="indexterm"></a>
<a id="idm30279871232" class="indexterm"></a>
<a id="idm30279870208" class="indexterm"></a>
<a id="idm30279868640" class="indexterm"></a>
<a id="idm30279867344" class="indexterm"></a>
<a id="idm30279866320" class="indexterm"></a>
<a id="idm30279864752" class="indexterm"></a>
<a id="idm30279863456" class="indexterm"></a></p><p>Failure type indicating that a pattern failed to match.</p><p>Node <code class="literal">Match-Fail!</code> is bound to a failure of this type.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_meta_node_fail_match_condition"></a>Meta-Node: fail-match(condition)</h4></div></div></div><p><a id="idm30279859536" class="indexterm"></a>
<a id="idm30279857968" class="indexterm"></a>
<a id="idm30279856672" class="indexterm"></a></p><p>If <code class="literal">condition</code> evaluates to false or to a failure, returns a failure
of type <a class="link" href="#match-fail" title="Failure Type Node: Match-Fail"><code class="literal">Match-Fail</code></a>, otherwise returns <span class="emphasis"><em>true</em></span>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">condition</code>
</span></dt><dd>
The pattern condition.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_meta_node_make_match_bind_src_target"></a>Meta-Node: make-match-bind(src, target)</h4></div></div></div><p><a id="idm30279849024" class="indexterm"></a>
<a id="idm30279847456" class="indexterm"></a>
<a id="idm30279846160" class="indexterm"></a></p><p>Generates a binding <code class="literal">src -&gt; target</code>, with <code class="literal">target</code> in the <code class="literal">match</code>
context which is activated on failures of type
<a class="link" href="#match-fail" title="Failure Type Node: Match-Fail"><code class="literal">Match-Fail</code></a>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">src</code>
</span></dt><dd>
The source of the binding.
</dd><dt><span class="term">
<code class="literal">target</code>
</span></dt><dd>
The target of the binding.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="meta-node-make-pattern-declarations"></a>Meta-Node: make-pattern-declarations(pattern)</h4></div></div></div><p><a id="idm30279835312" class="indexterm"></a>
<a id="idm30279833760" class="indexterm"></a>
<a id="idm30279832464" class="indexterm"></a></p><p>Creates the node declarations implementing a pattern.</p><p>Returns a single node declaration.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">pattern</code>
</span></dt><dd>
The <code class="literal">Pattern</code> object for which to create the declarations.
</dd></dl></div><div class="tip" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/icons/tip.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The declaration returned by this meta-node is a suitable return
value for a <code class="literal">target-transform</code> function. <span class="emphasis"><em>See <a class="xref" href="#_instances_as_targets" title="3.7. Instances as Targets">Section 3.7, “Instances as Targets”</a></em></span>.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_operator_table_2"></a>5.18. Operator Table</h3></div></div></div><p><a id="idm30279823600" class="indexterm"></a>
<a id="idm30279822304" class="indexterm"></a></p><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; "><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"> Operator </th><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"> Precedence </th><th style="border-bottom: 1px solid #527bbd; " align="right" valign="top"> Associativity</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">.</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>1000</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">when</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>850</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">@</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>800</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">=&gt;</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>750</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">::</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>700</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">*</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>200</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">/</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>200</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">+</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>100</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">-</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>100</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">&lt;</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>50</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">&lt;=</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>50</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">&gt;</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>50</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">&gt;=</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>50</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">=</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>50</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">!=</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>50</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">and</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>25</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">or</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>20</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">!-</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>15</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>right</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">-&gt;</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>10</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>right</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">&lt;-</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>10</p></td><td style="border-bottom: 1px solid #527bbd; " align="right" valign="top"><p>left</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">:</code></p></td><td style="border-right: 1px solid #527bbd; " align="right" valign="top"><p>5</p></td><td style="" align="right" valign="top"><p>right</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_optimizations"></a>6. Optimizations</h2></div></div></div><p><a id="idm30279734608" class="indexterm"></a></p><p>This section details functionality for controlling and fine tuning the
optimizations performed by the Tridash compiler.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_coalescing"></a>6.1. Coalescing</h3></div></div></div><p><a id="idm30279731792" class="indexterm"></a>
<a id="idm30279730544" class="indexterm"></a>
<a id="idm30279729552" class="indexterm"></a>
<a id="idm30279727984" class="indexterm"></a>
<a id="idm30279726688" class="indexterm"></a></p><p>A node is compiled to a runtime node object definition, which stores
the details of the node’s observers, dependencies, contexts and
various other attributes. However, for efficiency, both in terms of
speed and code size, not every single node is actually compiled to a
runtime node object. When possible successive nodes are coalesced
(merged) into a single node, with a value function that combines the
functions of the coalesced nodes.</p><p>Node coalescing does not affect the behaviour of a program however it
can effect which nodes are actually available when interfacing with
other languages.</p><div class="important" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/icons/important.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Input Nodes, <span class="emphasis"><em>see <a class="xref" href="#_input_nodes" title="2.7. Input Nodes">Section 2.7, “Input Nodes”</a></em></span>, are never coalesced
into other nodes, as they provide the interface by which a program
receives its inputs.</p></td></tr></table></div><p><strong>Example. </strong>
</p><pre class="screen">a + b -&gt; x
x -&gt; y
y + z -&gt; output</pre><p>
</p><p>In this example, assuming <code class="literal">a</code>, <code class="literal">b</code> and <code class="literal">z</code> are input nodes and
<code class="literal">output</code> is an output node, i.e. it has no observers, the following
intermediate nodes can all be coalesced into the node <code class="literal">output</code>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">a + b</code>
</li><li class="listitem">
<code class="literal">x</code>
</li><li class="listitem">
<code class="literal">y</code>
</li><li class="listitem">
<code class="literal">y + z</code>
</li></ul></div><p>As a result, only the following nodes remain:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">a</code>
</li><li class="listitem">
<code class="literal">b</code>
</li><li class="listitem">
<code class="literal">z</code>
</li><li class="listitem">
<code class="literal">output</code>
</li></ul></div><p>Node <code class="literal">output</code> has the dependencies: <code class="literal">a</code>, <code class="literal">b</code> and <code class="literal">z</code> with the
following combined value function:</p><pre class="screen"># y + z
# x + z       <a id="CO5-1"></a><span><img src="images/icons/callouts/1.png" alt="1" border="0" /></span>
# a + b + z   <a id="CO5-2"></a><span><img src="images/icons/callouts/2.png" alt="2" border="0" /></span>

a + b + z</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-1"><span><img src="images/icons/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>
<code class="literal">y</code> is substituted with its dependency <code class="literal">x</code>
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-2"><span><img src="images/icons/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>
<code class="literal">x</code> is substituted with its dependency <code class="literal">a + b</code>
</p></td></tr></table></div><p>When interfacing with Tridash, from another language, only the values
of the nodes remaining after coalescing can be observed. The only
nodes guaranteed to never be coalesced into other nodes are input
nodes, which are explicitly marked as such, and output nodes, that is
nodes with no observers.</p><p>To allow the value of a node, which is neither an input nor an output
node, to be observed, the value of the node’s <code class="literal">coalescable</code> attribute
can be set to false (<code class="literal">0</code>). This guarantees that the node will never be
coalesced into another node, and hence a runtime node object will be
created for it.</p><p><strong>Example. </strong>
</p><pre class="screen">a + b -&gt; x
x -&gt; y
y + z -&gt; output

/attribute(x, coalescable, 0) <a id="CO6-1"></a><span><img src="images/icons/callouts/1.png" alt="1" border="0" /></span></pre><p>
</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO6-1"><span><img src="images/icons/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>
Set value of <code class="literal">x</code>'s <code class="literal">coalescable</code> attribute to false
</p></td></tr></table></div><p>In this example, <code class="literal">x</code> is guaranteed to never be coalesced into another
node and is thus is available for interfacing with other languages.</p><p>The value function of <code class="literal">output</code> thus becomes <code class="literal">x + z</code>, assuming
node <code class="literal">y</code> is coalesced into <code class="literal">x</code>.</p><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Preventing a node from being coalesced, by setting the
<code class="literal">coalescable</code> attribute to false, may negatively impact the
performance of the program.</p></td></tr></table></div><div class="caution" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/icons/caution.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>A node with the <code class="literal">coalescable</code> attribute set to false, can
still be removed if it is not reachable from any input node, and thus
its value can never change from its initial value. To prevent the node
from being removed, the <code class="literal">removable</code> attribute should also be set to
false (<code class="literal">0</code>).</p></td></tr></table></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="literal">coalescable</code> and <code class="literal">removable</code> attributes have no effect
within meta-nodes.</p></td></tr></table></div></div></div><div class="index"><div class="titlepage"><div><div><h2 class="title"><a id="_index"></a>Index</h2></div></div></div><div xmlns:xlink="http://www.w3.org/1999/xlink" class="index"><div class="indexdiv"><h3>Symbols</h3><dl><dt id="ientry-idm30277242896">!</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macro, <a class="indexterm" href="#macro-node-test-fail-functor">Macro-Node: !(functor)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277272592">!!</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#_meta_node_literal_x_literal">Meta-Node: !!(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277259712">!-</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-test-fail-bind">Meta-Node: !-(test, value)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276911520">!=</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-neq">Meta-Node: !=(a, b)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277040720">%</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-rem">Meta-Node: %(x, y)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277789024">&amp;</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macro, <a class="indexterm" href="#macro-node-ref">Macro-Node: &amp;(node)</a></dt></dl></dd><dt>Special Operator</dt><dd><dl><dt>Node References, <a class="indexterm" href="#node_references">Node References</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277543264">'</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macro, <a class="indexterm" href="#macro-node-quote">Macro-Node: '(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277074912">*</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-multiply">Meta-Node: *(x, y)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277109360">+</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-plus">Meta-Node: +(x, y)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277092272">-</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-minus">Meta-Node: -(x, :(y))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278512288">-&gt;</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macro, <a class="indexterm" href="#macro-node-lbind">Macro-Node: -&gt;(source, target)</a></dt></dl></dd><dt>Special Operator</dt><dd><dl><dt>Bindings, <a class="indexterm" href="#_declaring_bindings">Declaring Bindings</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278170880">.</dt><dd><dl><dt>Special Operator</dt><dd><dl><dt>Subnodes, <a class="indexterm" href="#_subnodes">Subnodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277899696">..</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macro, <a class="indexterm" href="#macro-node-outer">Macro-Node: ..(node)</a></dt></dl></dd><dt>Special Operator</dt><dd><dl><dt>Outer Node References, <a class="indexterm" href="#_outer_node_references">Outer Node References</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277057792">/</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-divide">Meta-Node: /(x, y)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278215920">/attribute</dt><dd><dl><dt>Special Operator</dt><dd><dl><dt>Attributes, <a class="indexterm" href="#_attributes">Attributes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278336208">/context</dt><dd><dl><dt>Special Operator</dt><dd><dl><dt>Contexts, <a class="indexterm" href="#explicit_contexts">Explicit Contexts</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277635216">/export</dt><dd><dl><dt>Special Operator</dt><dd><dl><dt>Modules, <a class="indexterm" href="#_importing_nodes">Importing Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277878128">/external</dt><dd><dl><dt>Special Operator</dt><dd><dl><dt>External Meta-Nodes, <a class="indexterm" href="#_external_meta_nodes">External Meta-Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277653408">/import</dt><dd><dl><dt>Special Operator</dt><dd><dl><dt>Modules, <a class="indexterm" href="#_importing_nodes">Importing Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277609328">/in</dt><dd><dl><dt>Special Operator</dt><dd><dl><dt>Modules, <a class="indexterm" href="#_direct_references">Direct References</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277701520">/module</dt><dd><dl><dt>Special Operator</dt><dd><dl><dt>Modules, <a class="indexterm" href="#_creating_modules">Creating Modules</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277579280">/operator</dt><dd><dl><dt>Special Operators</dt><dd><dl><dt>Infix Operators, <a class="indexterm" href="#_registering_infix_operators">Registering Infix Operators</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277804288">/quote</dt><dd><dl><dt>Special Operator</dt><dd><dl><dt>Literal Symbols, <a class="indexterm" href="#literal-symbols">Literal Symbols</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278133760">/state</dt><dd><dl><dt>Special Operator</dt><dd><dl><dt>Node States, <a class="indexterm" href="#_node_states">Node States</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277683520">/use</dt><dd><dl><dt>Special Operator</dt><dd><dl><dt>Modules, <a class="indexterm" href="#_module_pseudo_nodes">Module Pseudo-Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277668752">/use-as</dt><dd><dl><dt>Special Operator</dt><dd><dl><dt>Modules, <a class="indexterm" href="#_module_pseudo_nodes">Module Pseudo-Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278044976">:</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macro, <a class="indexterm" href="#macro-node-def">Macro-Node: :(id(args...), body)</a></dt></dl></dd><dt>Special Operator</dt><dd><dl><dt>Meta-Node Definition, <a class="indexterm" href="#_defining_meta_nodes">Defining Meta-Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277414208">::</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macro, <a class="indexterm" href="#macro-node-state">Macro-Node: ::(node, state)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277019984">&lt;</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-lt">Meta-Node: &lt;(x, y)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277467152">&lt;-</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macro, <a class="indexterm" href="#macro-node-rbind">Macro-Node: &lt;-(target, source)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277002832">&lt;=</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-lte">Meta-Node: &lt;=(x, y)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276934992">=</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-eq">Meta-Node: =(a, b)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276969120">&gt;</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-gt">Meta-Node: &gt;(x, y)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276952032">&gt;=</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-gte">Meta-Node: &gt;=(x, y)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277304272">?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-succeedsp">Meta-Node: ?(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277447504">@</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macro, <a class="indexterm" href="#macro-node-context">Macro-Node: @(node, context : '(default))</a></dt></dl></dd></dl></dd></dl></div><div class="indexdiv"><h3>A</h3><dl><dt id="ientry-idm30276888976">and</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-and">Meta-Node: and(x, y)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276428272">append</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-append">Meta-Node: append(list1, list2)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30288680688">apply</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#_meta_node_literal_apply_f_xs_literal">Meta-Node: apply(f, ..(xs))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277113280">Arithmetic</dt><dd><dl><dt>Core Module, <a class="indexterm" href="#_arithmetic">Arithmetic</a></dt></dl></dd><dt id="ientry-idm30277129008">Arity-Error</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Failure Type, <a class="indexterm" href="#node-arity-error">Failure Type Node: Arity-Error</a></dt><dt>Node, <a class="indexterm" href="#node-arity-error">Failure Type Node: Arity-Error</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277121232">Arity-Error!</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Node, <a class="indexterm" href="#node-arity-error">Failure Type Node: Arity-Error</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278759552">Atoms</dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Nodes, <a class="indexterm" href="#atom_nodes">Atom Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277817008">Attribute</dt><dd><dl><dt>Coalescing, <a class="indexterm" href="#_coalescing">Coalescing</a></dt><dt>Instance as Target, <a class="indexterm" href="#_instances_as_targets">Instances as Targets</a>, <a class="indexterm" href="#_target_node_transforms">Target Node Transforms</a></dt><dt>Macro Nodes, <a class="indexterm" href="#_macro_nodes">Macro Nodes</a></dt><dt>Pattern Matching, <a class="indexterm" href="#matchers">Matchers</a></dt></dl></dd><dt id="ientry-idm30278218176">Attributes, <a class="indexterm" href="#_attributes">Attributes</a></dt><dd><dl><dt>Nodes, <a class="indexterm" href="#_attributes">Attributes</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>B</h3><dl><dt id="ientry-idm30278516032">Bind Declarations</dt><dd><dl><dt>Nodes</dt><dd><dl><dt>Bindings, <a class="indexterm" href="#_declaring_bindings">Declaring Bindings</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278566400">Bindings, <a class="indexterm" href="#_declaring_bindings">Declaring Bindings</a>, <a class="indexterm" href="#_propagation_of_changes">Propagation of Changes</a>, <a class="indexterm" href="#_contexts">Contexts</a>, <a class="indexterm" href="#_two_way_bindings">Two-Way Bindings</a>, <a class="indexterm" href="#literal_bindings">Literal Bindings</a>, <a class="indexterm" href="#conditional_bindings">Conditional Bindings</a>, <a class="indexterm" href="#_node_states">Node States</a></dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macros, <a class="indexterm" href="#core-module-bindings">Bindings</a></dt></dl></dd><dt>Nodes, <a class="indexterm" href="#_nodes">Nodes</a></dt></dl></dd><dt id="ientry-idm30277212672">Builtin Failure Types</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Failures, <a class="indexterm" href="#_builtin_failure_types">Builtin Failure Types</a></dt></dl></dd></dl></dd></dl></div><div class="indexdiv"><h3>C</h3><dl><dt id="ientry-idm30277526736">c</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macro, <a class="indexterm" href="#macro-node-c">Macro-Node: c(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276805040">case</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macro, <a class="indexterm" href="#macro-node-case">Macro-Node: case(..(clauses))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277230768">catch</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#_meta_node_literal_catch_try_catch_test_literal">Meta-Node: catch(try, catch, :(test))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30279729552">coalescable</dt><dd><dl><dt>Attribute</dt><dd><dl><dt>Coalescing, <a class="indexterm" href="#_coalescing">Coalescing</a></dt></dl></dd></dl></dd><dt id="ientry-idm30279731792">Coalescing, <a class="indexterm" href="#_coalescing">Coalescing</a></dt><dd><dl><dt>Optimizations, <a class="indexterm" href="#_coalescing">Coalescing</a></dt></dl></dd><dt id="ientry-idm30279902640">combine-conditions</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-combine-conditions">Meta-Node: combine-conditions(c1, c2)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278789904">Comments</dt><dd><dl><dt>Syntax, <a class="indexterm" href="#_syntax">Syntax</a></dt></dl></dd><dt id="ientry-idm30277023984">Comparison</dt><dd><dl><dt>Core Module, <a class="indexterm" href="#_comparison">Comparison</a></dt></dl></dd><dt id="ientry-idm30278293040">Conditional Bindings</dt><dd><dl><dt>Nodes</dt><dd><dl><dt>Bindings, <a class="indexterm" href="#conditional_bindings">Conditional Bindings</a></dt></dl></dd></dl></dd><dt id="ientry-idm30279886640">conditionalize-bindings</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-conditionalize-bindings">Meta-Node: conditionalize-bindings(condition, bindings)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276574096">cons</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-cons">Meta-Node: cons(head, tail)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276522512">cons?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-consp">Meta-Node: cons?(thing)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30280009568">Constant Patterns</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Pattern Matching, <a class="indexterm" href="#_constant_patterns">Constant Patterns</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278423120">Contexts, <a class="indexterm" href="#explicit_contexts">Explicit Contexts</a></dt><dd><dl><dt>Nodes</dt><dd><dl><dt>Bindings, <a class="indexterm" href="#_contexts">Contexts</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277555056">core</dt><dd><dl><dt>module</dt><dd><dl><dt>Standard Library, <a class="indexterm" href="#_core_module">Core Module</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277557408">Core Module, <a class="indexterm" href="#_arithmetic">Arithmetic</a>, <a class="indexterm" href="#_comparison">Comparison</a>, <a class="indexterm" href="#_logical_operators">Logical Operators</a>, <a class="indexterm" href="#_selection_operators">Selection Operators</a>, <a class="indexterm" href="#_types">Types</a>, <a class="indexterm" href="#_lists">Lists</a>, <a class="indexterm" href="#_strings_2">Strings</a>, <a class="indexterm" href="#_introspection">Introspection</a>, <a class="indexterm" href="#pattern_matching">Pattern Matching</a>, <a class="indexterm" href="#_operator_table_2">Operator Table</a></dt><dd><dl><dt>Failure Type, <a class="indexterm" href="#node-no-value">Failure Type Node: No-Value</a>, <a class="indexterm" href="#node-type-error">Failure Type Node: Type-Error</a>, <a class="indexterm" href="#node-index-out-bounds">Failure Type Node: Index-Out-Bounds</a>, <a class="indexterm" href="#node-invalid-integer">Failure Type Node: Invalid-Integer</a>, <a class="indexterm" href="#node-invalid-real">Failure Type Node: Invalid-Real</a>, <a class="indexterm" href="#node-arity-error">Failure Type Node: Arity-Error</a>, <a class="indexterm" href="#node-Empty">Node: Empty</a>, <a class="indexterm" href="#match-fail">Failure Type Node: Match-Fail</a></dt><dt>Failures, <a class="indexterm" href="#_builtin_failure_types">Builtin Failure Types</a></dt><dt>Macro, <a class="indexterm" href="#macro-node-quote">Macro-Node: '(x)</a>, <a class="indexterm" href="#macro-node-c">Macro-Node: c(x)</a>, <a class="indexterm" href="#macro-node-ref">Macro-Node: &amp;(node)</a>, <a class="indexterm" href="#macro-node-lbind">Macro-Node: -&gt;(source, target)</a>, <a class="indexterm" href="#macro-node-rbind">Macro-Node: &lt;-(target, source)</a>, <a class="indexterm" href="#macro-node-context">Macro-Node: @(node, context : '(default))</a>, <a class="indexterm" href="#macro-node-state">Macro-Node: ::(node, state)</a>, <a class="indexterm" href="#macro-node-def">Macro-Node: :(id(args...), body)</a>, <a class="indexterm" href="#macro-node-outer">Macro-Node: ..(node)</a>, <a class="indexterm" href="#macro-node-test-fail-functor">Macro-Node: !(functor)</a>, <a class="indexterm" href="#macro-node-case">Macro-Node: case(..(clauses))</a></dt><dt>Macros, <a class="indexterm" href="#_literals_2">Literals</a>, <a class="indexterm" href="#core-module-bindings">Bindings</a>, <a class="indexterm" href="#_meta_node_definitions">Meta-Node Definitions</a></dt><dt>Meta-Node, <a class="indexterm" href="#meta-node-fail">Meta-Node: fail(:(type))</a>, <a class="indexterm" href="#meta-node-fail-type">Meta-Node: fail-type(x)</a>, <a class="indexterm" href="#meta-node-failsp">Meta-Node: fails?(x)</a>, <a class="indexterm" href="#meta-node-succeedsp">Meta-Node: ?(x)</a>, <a class="indexterm" href="#meta-node-fail-typep">Meta-Node: fail-type?(x, type)</a>, <a class="indexterm" href="#_meta_node_literal_x_literal">Meta-Node: !!(x)</a>, <a class="indexterm" href="#meta-node-test-fail-bind">Meta-Node: !-(test, value)</a>, <a class="indexterm" href="#_meta_node_literal_catch_try_catch_test_literal">Meta-Node: catch(try, catch, :(test))</a>, <a class="indexterm" href="#meta-node-plus">Meta-Node: +(x, y)</a>, <a class="indexterm" href="#meta-node-minus">Meta-Node: -(x, :(y))</a>, <a class="indexterm" href="#meta-node-multiply">Meta-Node: *(x, y)</a>, <a class="indexterm" href="#meta-node-divide">Meta-Node: /(x, y)</a>, <a class="indexterm" href="#meta-node-rem">Meta-Node: %(x, y)</a>, <a class="indexterm" href="#meta-node-lt">Meta-Node: &lt;(x, y)</a>, <a class="indexterm" href="#meta-node-lte">Meta-Node: &lt;=(x, y)</a>, <a class="indexterm" href="#meta-node-gt">Meta-Node: &gt;(x, y)</a>, <a class="indexterm" href="#meta-node-gte">Meta-Node: &gt;=(x, y)</a>, <a class="indexterm" href="#meta-node-eq">Meta-Node: =(a, b)</a>, <a class="indexterm" href="#meta-node-neq">Meta-Node: !=(a, b)</a>, <a class="indexterm" href="#meta-node-and">Meta-Node: and(x, y)</a>, <a class="indexterm" href="#meta-node-or">Meta-Node: or(x, y)</a>, <a class="indexterm" href="#meta-node-not">Meta-Node: not(x)</a>, <a class="indexterm" href="#meta-node-if">Meta-Node: if(condition, true-value, :(false-value))</a>, <a class="indexterm" href="#meta-node-int">Meta-Node: int(x)</a>, <a class="indexterm" href="#meta-node-real">Meta-Node: real(x)</a>, <a class="indexterm" href="#meta-node-string">Meta-Node: string(x)</a>, <a class="indexterm" href="#meta-node-to-int">Meta-Node: to-int(x)</a>, <a class="indexterm" href="#meta-node-to-real">Meta-Node: to-real(x)</a>, <a class="indexterm" href="#meta-node-to-string">Meta-Node: to-string(x)</a>, <a class="indexterm" href="#meta-node-intp">Meta-Node: int?(x)</a>, <a class="indexterm" href="#meta-node-realp">Meta-Node: real?(x)</a>, <a class="indexterm" href="#meta-node-stringp">Meta-Node: string?(x)</a>, <a class="indexterm" href="#meta-node-infp">Meta-Node: inf?(x)</a>, <a class="indexterm" href="#meta-node-nanp">Meta-Node: NaN?(x)</a>, <a class="indexterm" href="#meta-node-cons">Meta-Node: cons(head, tail)</a>, <a class="indexterm" href="#meta-node-head">Meta-Node: head(list)</a>, <a class="indexterm" href="#meta-node-tail">Meta-Node: tail(list)</a>, <a class="indexterm" href="#meta-node-consp">Meta-Node: cons?(thing)</a>, <a class="indexterm" href="#meta-node-list">Meta-Node: list(..(xs))</a>, <a class="indexterm" href="#meta-node-list-star">Meta-Node: list*(..(xs))</a>, <a class="indexterm" href="#meta-node-list-bang">Meta-Node: list!(..(xs))</a>, <a class="indexterm" href="#meta-node-nth">Meta-Node: nth(list, n)</a>, <a class="indexterm" href="#meta-node-append">Meta-Node: append(list1, list2)</a>, <a class="indexterm" href="#meta-node-foldl1">Meta-Node: foldl'(x, f, list)</a>, <a class="indexterm" href="#meta-node-foldl">Meta-Node: foldl(f, list)</a>, <a class="indexterm" href="#meta-node-foldr">Meta-Node: foldr(f, list, :(x))</a>, <a class="indexterm" href="#meta-node-map">Meta-Node: map(f, list)</a>, <a class="indexterm" href="#meta-node-filter">Meta-Node: filter(f, list)</a>, <a class="indexterm" href="#meta-node-everyp">Meta-Node: every?(f, list)</a>, <a class="indexterm" href="#meta-node-somep">Meta-Node: some?(f, list)</a>, <a class="indexterm" href="#meta-node-not-anyp">Meta-Node: not-any?(f, list)</a>, <a class="indexterm" href="#meta-node-not-everyp">Meta-Node: not-every?(f, list)</a>, <a class="indexterm" href="#meta-node-string-at">Meta-Node: string-at(string, index)</a>, <a class="indexterm" href="#meta-node-string-concat">Meta-Node: string-concat(string, str1, str2)</a>, <a class="indexterm" href="#meta-node-string-to-list">Meta-Node: string-&gt;list(string)</a>, <a class="indexterm" href="#meta-node-list-to-string">Meta-Node: list-&gt;string(list)</a>, <a class="indexterm" href="#meta-node-format">Meta-Node: format(string, ..(args))</a>, <a class="indexterm" href="#_meta_node_literal_apply_f_xs_literal">Meta-Node: apply(f, ..(xs))</a>, <a class="indexterm" href="#meta-node-nodep">Meta-Node: node?(thing)</a>, <a class="indexterm" href="#_meta_node_literal_find_node_node_module_literal">Meta-Node: find-node(node, :(module))</a>, <a class="indexterm" href="#_meta_node_literal_get_attribute_node_attribute_literal">Meta-Node: get-attribute(node, attribute)</a>, <a class="indexterm" href="#meta-node-Pattern">Meta-Node: Pattern(condition, :(binding))</a>, <a class="indexterm" href="#meta-node-get-matcher">Meta-Node: get-matcher(node)</a>, <a class="indexterm" href="#meta-node-make-pattern">Meta-Node: make-pattern(place, pattern)</a>, <a class="indexterm" href="#meta-node-combine-conditions">Meta-Node: combine-conditions(c1, c2)</a>, <a class="indexterm" href="#meta-node-conditionalize-bindings">Meta-Node: conditionalize-bindings(condition, bindings)</a>, <a class="indexterm" href="#_meta_node_fail_match_condition">Meta-Node: fail-match(condition)</a>, <a class="indexterm" href="#_meta_node_make_match_bind_src_target">Meta-Node: make-match-bind(src, target)</a>, <a class="indexterm" href="#meta-node-make-pattern-declarations">Meta-Node: make-pattern-declarations(pattern)</a></dt><dt>Node, <a class="indexterm" href="#node-no-value">Failure Type Node: No-Value</a>, <a class="indexterm" href="#node-type-error">Failure Type Node: Type-Error</a>, <a class="indexterm" href="#node-index-out-bounds">Failure Type Node: Index-Out-Bounds</a>, <a class="indexterm" href="#node-invalid-integer">Failure Type Node: Invalid-Integer</a>, <a class="indexterm" href="#node-invalid-real">Failure Type Node: Invalid-Real</a>, <a class="indexterm" href="#node-arity-error">Failure Type Node: Arity-Error</a>, <a class="indexterm" href="#node-Empty">Node: Empty</a>, <a class="indexterm" href="#_node_literal_empty_literal">Node: Empty!</a>, <a class="indexterm" href="#match-fail">Failure Type Node: Match-Fail</a></dt><dt>Pattern Matching, <a class="indexterm" href="#pattern_matching">Pattern Matching</a>, <a class="indexterm" href="#_nested_patterns">Nested Patterns</a>, <a class="indexterm" href="#_constant_patterns">Constant Patterns</a>, <a class="indexterm" href="#matchers">Matchers</a>, <a class="indexterm" href="#_module_core_patterns">Module: core/patterns</a></dt><dt>Standard Library, <a class="indexterm" href="#_core_module">Core Module</a></dt><dt>Utilities, <a class="indexterm" href="#_failures_2">Failures</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>D</h3><dl><dt id="ientry-idm30278653616">Decimal Syntax</dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Reals, <a class="indexterm" href="#_numbers">Numbers</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277388416">Definitions</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macros, <a class="indexterm" href="#_meta_node_definitions">Meta-Node Definitions</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278570880">Dependency</dt><dd><dl><dt>Nodes, <a class="indexterm" href="#_nodes">Nodes</a></dt></dl></dd><dt id="ientry-idm30278173200">Dictionaries</dt><dd><dl><dt>Value Type, <a class="indexterm" href="#_subnodes">Subnodes</a></dt></dl></dd><dt id="ientry-idm30277611648">Direct References</dt><dd><dl><dt>Modules, <a class="indexterm" href="#_direct_references">Direct References</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>E</h3><dl><dt id="ientry-idm30276509696">Empty</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Failure Type, <a class="indexterm" href="#node-Empty">Node: Empty</a></dt><dt>Node, <a class="indexterm" href="#node-Empty">Node: Empty</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276499616">Empty!</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Node, <a class="indexterm" href="#_node_literal_empty_literal">Node: Empty!</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278614272">Escape Sequences</dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Strings, <a class="indexterm" href="#_strings">Strings</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278438736">Evaluation</dt><dd><dl><dt>Nodes, <a class="indexterm" href="#_evaluation_strategy">Evaluation Strategy</a></dt></dl></dd><dt id="ientry-idm30276312336">every?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-everyp">Meta-Node: every?(f, list)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278340096">Explicit Contexts</dt><dd><dl><dt>Nodes</dt><dd><dl><dt>Contexts, <a class="indexterm" href="#explicit_contexts">Explicit Contexts</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278641264">Exponent Syntax</dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Reals, <a class="indexterm" href="#_numbers">Numbers</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277637520">Exporting Nodes</dt><dd><dl><dt>Modules, <a class="indexterm" href="#_importing_nodes">Importing Nodes</a></dt></dl></dd><dt id="ientry-idm30277880368">External Meta-Nodes, <a class="indexterm" href="#_external_meta_nodes">External Meta-Nodes</a></dt><dd><dl><dt>Meta-Nodes, <a class="indexterm" href="#_external_meta_nodes">External Meta-Nodes</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>F</h3><dl><dt id="ientry-idm30277342608">fail</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-fail">Meta-Node: fail(:(type))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30279859536">fail-match</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#_meta_node_fail_match_condition">Meta-Node: fail-match(condition)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277333360">fail-type</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-fail-type">Meta-Node: fail-type(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277291504">fail-type?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-fail-typep">Meta-Node: fail-type?(x, type)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277320096">fails?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-failsp">Meta-Node: fails?(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278249920">Failure Type, <a class="indexterm" href="#node-no-value">Failure Type Node: No-Value</a>, <a class="indexterm" href="#node-type-error">Failure Type Node: Type-Error</a>, <a class="indexterm" href="#node-index-out-bounds">Failure Type Node: Index-Out-Bounds</a>, <a class="indexterm" href="#node-invalid-integer">Failure Type Node: Invalid-Integer</a>, <a class="indexterm" href="#node-invalid-real">Failure Type Node: Invalid-Real</a>, <a class="indexterm" href="#node-arity-error">Failure Type Node: Arity-Error</a>, <a class="indexterm" href="#node-Empty">Node: Empty</a>, <a class="indexterm" href="#match-fail">Failure Type Node: Match-Fail</a></dt><dd><dl><dt>Failures</dt><dd><dl><dt>Value Type, <a class="indexterm" href="#_explicit_failures_and_failure_types">Explicit Failures and Failure Types</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278303920">Failures, <a class="indexterm" href="#_builtin_failure_types">Builtin Failure Types</a></dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Utilities, <a class="indexterm" href="#_failures_2">Failures</a></dt></dl></dd><dt>Value Type, <a class="indexterm" href="#_failures">Failures</a>, <a class="indexterm" href="#_explicit_failures_and_failure_types">Explicit Failures and Failure Types</a></dt></dl></dd><dt id="ientry-idm30276328336">filter</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-filter">Meta-Node: filter(f, list)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30280059152">find-node</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#_meta_node_literal_find_node_node_module_literal">Meta-Node: find-node(node, :(module))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276389456">foldl</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-foldl">Meta-Node: foldl(f, list)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276412240">foldl'</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-foldl1">Meta-Node: foldl'(x, f, list)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276371472">foldr</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-foldr">Meta-Node: foldr(f, list, :(x))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30288695552">format</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-format">Meta-Node: format(string, ..(args))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278058352">Functions</dt><dd><dl><dt>Meta-Nodes</dt><dd><dl><dt>Semantics, <a class="indexterm" href="#_meta_nodes">Meta-Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30280051088">Functor Patterns</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Pattern Matching, <a class="indexterm" href="#pattern_matching">Pattern Matching</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278724960">Functors, <a class="indexterm" href="#_functors">Functors</a></dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Nodes, <a class="indexterm" href="#_functors">Functors</a></dt></dl></dd></dl></dd></dl></div><div class="indexdiv"><h3>G</h3><dl><dt id="ientry-idm30276192064">get-attribute</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#_meta_node_literal_get_attribute_node_attribute_literal">Meta-Node: get-attribute(node, attribute)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30288661584">get-matcher</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-get-matcher">Meta-Node: get-matcher(node)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278787664">Grammar</dt><dd><dl><dt>Syntax, <a class="indexterm" href="#_syntax">Syntax</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>H</h3><dl><dt id="ientry-idm30276555152">head</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-head">Meta-Node: head(list)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277857840">Higher-Order Meta-Nodes</dt><dd><dl><dt>Meta-Nodes, <a class="indexterm" href="#_higher_order_meta_nodes">Higher-Order Meta-Nodes</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>I</h3><dl><dt id="ientry-idm30278755808">Identifiers</dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Nodes, <a class="indexterm" href="#atom_nodes">Atom Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276823696">if</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-if">Meta-Node: if(condition, true-value, :(false-value))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277655712">Importing Nodes</dt><dd><dl><dt>Modules, <a class="indexterm" href="#_importing_nodes">Importing Nodes</a></dt></dl></dd><dt id="ientry-idm30277176880">Index-Out-Bounds</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Failure Type, <a class="indexterm" href="#node-index-out-bounds">Failure Type Node: Index-Out-Bounds</a></dt><dt>Node, <a class="indexterm" href="#node-index-out-bounds">Failure Type Node: Index-Out-Bounds</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277169104">Index-Out-Bounds!</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Node, <a class="indexterm" href="#node-index-out-bounds">Failure Type Node: Index-Out-Bounds</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276607056">inf?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-infp">Meta-Node: inf?(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278716832">Infix Operators, <a class="indexterm" href="#_functors">Functors</a>, <a class="indexterm" href="#_registering_infix_operators">Registering Infix Operators</a></dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Functors, <a class="indexterm" href="#_functors">Functors</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278352640">Initial Values</dt><dd><dl><dt>Nodes</dt><dd><dl><dt>Bindings, <a class="indexterm" href="#literal_bindings">Literal Bindings</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278228368">Input Nodes</dt><dd><dl><dt>Nodes, <a class="indexterm" href="#_input_nodes">Input Nodes</a></dt></dl></dd><dt id="ientry-idm30277763616">Instance as Target, <a class="indexterm" href="#_instances_as_targets">Instances as Targets</a>, <a class="indexterm" href="#_target_node_transforms">Target Node Transforms</a></dt><dd><dl><dt>Meta-Nodes, <a class="indexterm" href="#_instances_as_targets">Instances as Targets</a>, <a class="indexterm" href="#_target_node_transforms">Target Node Transforms</a></dt></dl></dd><dt id="ientry-idm30276772080">int</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-int">Meta-Node: int(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276645072">int?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-intp">Meta-Node: int?(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278665312">Integers</dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Numbers, <a class="indexterm" href="#_numbers">Numbers</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276215872">Introspection Utilities</dt><dd><dl><dt>Core Module, <a class="indexterm" href="#_introspection">Introspection</a></dt></dl></dd><dt id="ientry-idm30277161584">Invalid-Integer</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Failure Type, <a class="indexterm" href="#node-invalid-integer">Failure Type Node: Invalid-Integer</a></dt><dt>Node, <a class="indexterm" href="#node-invalid-integer">Failure Type Node: Invalid-Integer</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277153840">Invalid-Integer!</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Node, <a class="indexterm" href="#node-invalid-integer">Failure Type Node: Invalid-Integer</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277145280">Invalid-Real</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Failure Type, <a class="indexterm" href="#node-invalid-real">Failure Type Node: Invalid-Real</a></dt><dt>Node, <a class="indexterm" href="#node-invalid-real">Failure Type Node: Invalid-Real</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277137504">Invalid-Real!</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Node, <a class="indexterm" href="#node-invalid-real">Failure Type Node: Invalid-Real</a></dt></dl></dd></dl></dd></dl></div><div class="indexdiv"><h3>L</h3><dl><dt id="ientry-idm30276491408">list</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-list">Meta-Node: list(..(xs))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276459168">list!</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-list-bang">Meta-Node: list!(..(xs))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276475536">list*</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-list-star">Meta-Node: list*(..(xs))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30288706720">list-&gt;string</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-list-to-string">Meta-Node: list-&gt;string(list)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276582656">Lists</dt><dd><dl><dt>Core Module, <a class="indexterm" href="#_lists">Lists</a></dt></dl></dd><dt id="ientry-idm30278356384">Literal Bindings</dt><dd><dl><dt>Nodes</dt><dd><dl><dt>Bindings, <a class="indexterm" href="#literal_bindings">Literal Bindings</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277806560">Literal Symbols, <a class="indexterm" href="#literal-symbols">Literal Symbols</a></dt><dd><dl><dt>Macro-Nodes, <a class="indexterm" href="#literal-symbols">Literal Symbols</a></dt></dl></dd><dt id="ientry-idm30278674608">Literals, <a class="indexterm" href="#_numbers">Numbers</a>, <a class="indexterm" href="#_strings">Strings</a></dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Macros, <a class="indexterm" href="#_literals_2">Literals</a></dt></dl></dd><dt>Syntax, <a class="indexterm" href="#_literals">Literals</a></dt></dl></dd><dt id="ientry-idm30277976672">Local Nodes</dt><dd><dl><dt>Meta-Nodes</dt><dd><dl><dt>Meta-Node Definition, <a class="indexterm" href="#local_nodes">Local Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276892960">Logical Operators</dt><dd><dl><dt>Core Module, <a class="indexterm" href="#_logical_operators">Logical Operators</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>M</h3><dl><dt id="ientry-idm30277818576">macro</dt><dd><dl><dt>Attribute</dt><dd><dl><dt>Macro Nodes, <a class="indexterm" href="#_macro_nodes">Macro Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277540416">Macro, <a class="indexterm" href="#macro-node-quote">Macro-Node: '(x)</a>, <a class="indexterm" href="#macro-node-c">Macro-Node: c(x)</a>, <a class="indexterm" href="#macro-node-ref">Macro-Node: &amp;(node)</a>, <a class="indexterm" href="#macro-node-lbind">Macro-Node: -&gt;(source, target)</a>, <a class="indexterm" href="#macro-node-rbind">Macro-Node: &lt;-(target, source)</a>, <a class="indexterm" href="#macro-node-context">Macro-Node: @(node, context : '(default))</a>, <a class="indexterm" href="#macro-node-state">Macro-Node: ::(node, state)</a>, <a class="indexterm" href="#macro-node-def">Macro-Node: :(id(args...), body)</a>, <a class="indexterm" href="#macro-node-outer">Macro-Node: ..(node)</a>, <a class="indexterm" href="#macro-node-test-fail-functor">Macro-Node: !(functor)</a>, <a class="indexterm" href="#macro-node-case">Macro-Node: case(..(clauses))</a></dt><dt id="ientry-idm30277824720">Macro Nodes, <a class="indexterm" href="#_macro_nodes">Macro Nodes</a>, <a class="indexterm" href="#node_references">Node References</a></dt><dd><dl><dt>Meta-Nodes, <a class="indexterm" href="#_macro_nodes">Macro Nodes</a></dt></dl></dd><dt id="ientry-idm30277805312">Macro-Nodes, <a class="indexterm" href="#literal-symbols">Literal Symbols</a></dt><dt id="ientry-idm30277545952">Macros, <a class="indexterm" href="#_literals_2">Literals</a>, <a class="indexterm" href="#core-module-bindings">Bindings</a>, <a class="indexterm" href="#_meta_node_definitions">Meta-Node Definitions</a></dt><dt id="ientry-idm30279849024">make-match-bind</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#_meta_node_make_match_bind_src_target">Meta-Node: make-match-bind(src, target)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30279918880">make-pattern</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-make-pattern">Meta-Node: make-pattern(place, pattern)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30279835312">make-pattern-declarations</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-make-pattern-declarations">Meta-Node: make-pattern-declarations(pattern)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276344208">map</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-map">Meta-Node: map(f, list)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30279874064">Match-Fail</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Failure Type, <a class="indexterm" href="#match-fail">Failure Type Node: Match-Fail</a></dt><dt>Node, <a class="indexterm" href="#match-fail">Failure Type Node: Match-Fail</a></dt></dl></dd></dl></dd><dt id="ientry-idm30279866320">Match-Fail!</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Node, <a class="indexterm" href="#match-fail">Failure Type Node: Match-Fail</a></dt></dl></dd></dl></dd><dt id="ientry-idm30279988336">matcher</dt><dd><dl><dt>Attribute</dt><dd><dl><dt>Pattern Matching, <a class="indexterm" href="#matchers">Matchers</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277339744">Meta-Node, <a class="indexterm" href="#meta-node-fail">Meta-Node: fail(:(type))</a>, <a class="indexterm" href="#meta-node-fail-type">Meta-Node: fail-type(x)</a>, <a class="indexterm" href="#meta-node-failsp">Meta-Node: fails?(x)</a>, <a class="indexterm" href="#meta-node-succeedsp">Meta-Node: ?(x)</a>, <a class="indexterm" href="#meta-node-fail-typep">Meta-Node: fail-type?(x, type)</a>, <a class="indexterm" href="#_meta_node_literal_x_literal">Meta-Node: !!(x)</a>, <a class="indexterm" href="#meta-node-test-fail-bind">Meta-Node: !-(test, value)</a>, <a class="indexterm" href="#_meta_node_literal_catch_try_catch_test_literal">Meta-Node: catch(try, catch, :(test))</a>, <a class="indexterm" href="#meta-node-plus">Meta-Node: +(x, y)</a>, <a class="indexterm" href="#meta-node-minus">Meta-Node: -(x, :(y))</a>, <a class="indexterm" href="#meta-node-multiply">Meta-Node: *(x, y)</a>, <a class="indexterm" href="#meta-node-divide">Meta-Node: /(x, y)</a>, <a class="indexterm" href="#meta-node-rem">Meta-Node: %(x, y)</a>, <a class="indexterm" href="#meta-node-lt">Meta-Node: &lt;(x, y)</a>, <a class="indexterm" href="#meta-node-lte">Meta-Node: &lt;=(x, y)</a>, <a class="indexterm" href="#meta-node-gt">Meta-Node: &gt;(x, y)</a>, <a class="indexterm" href="#meta-node-gte">Meta-Node: &gt;=(x, y)</a>, <a class="indexterm" href="#meta-node-eq">Meta-Node: =(a, b)</a>, <a class="indexterm" href="#meta-node-neq">Meta-Node: !=(a, b)</a>, <a class="indexterm" href="#meta-node-and">Meta-Node: and(x, y)</a>, <a class="indexterm" href="#meta-node-or">Meta-Node: or(x, y)</a>, <a class="indexterm" href="#meta-node-not">Meta-Node: not(x)</a>, <a class="indexterm" href="#meta-node-if">Meta-Node: if(condition, true-value, :(false-value))</a>, <a class="indexterm" href="#meta-node-int">Meta-Node: int(x)</a>, <a class="indexterm" href="#meta-node-real">Meta-Node: real(x)</a>, <a class="indexterm" href="#meta-node-string">Meta-Node: string(x)</a>, <a class="indexterm" href="#meta-node-to-int">Meta-Node: to-int(x)</a>, <a class="indexterm" href="#meta-node-to-real">Meta-Node: to-real(x)</a>, <a class="indexterm" href="#meta-node-to-string">Meta-Node: to-string(x)</a>, <a class="indexterm" href="#meta-node-intp">Meta-Node: int?(x)</a>, <a class="indexterm" href="#meta-node-realp">Meta-Node: real?(x)</a>, <a class="indexterm" href="#meta-node-stringp">Meta-Node: string?(x)</a>, <a class="indexterm" href="#meta-node-infp">Meta-Node: inf?(x)</a>, <a class="indexterm" href="#meta-node-nanp">Meta-Node: NaN?(x)</a>, <a class="indexterm" href="#meta-node-cons">Meta-Node: cons(head, tail)</a>, <a class="indexterm" href="#meta-node-head">Meta-Node: head(list)</a>, <a class="indexterm" href="#meta-node-tail">Meta-Node: tail(list)</a>, <a class="indexterm" href="#meta-node-consp">Meta-Node: cons?(thing)</a>, <a class="indexterm" href="#meta-node-list">Meta-Node: list(..(xs))</a>, <a class="indexterm" href="#meta-node-list-star">Meta-Node: list*(..(xs))</a>, <a class="indexterm" href="#meta-node-list-bang">Meta-Node: list!(..(xs))</a>, <a class="indexterm" href="#meta-node-nth">Meta-Node: nth(list, n)</a>, <a class="indexterm" href="#meta-node-append">Meta-Node: append(list1, list2)</a>, <a class="indexterm" href="#meta-node-foldl1">Meta-Node: foldl'(x, f, list)</a>, <a class="indexterm" href="#meta-node-foldl">Meta-Node: foldl(f, list)</a>, <a class="indexterm" href="#meta-node-foldr">Meta-Node: foldr(f, list, :(x))</a>, <a class="indexterm" href="#meta-node-map">Meta-Node: map(f, list)</a>, <a class="indexterm" href="#meta-node-filter">Meta-Node: filter(f, list)</a>, <a class="indexterm" href="#meta-node-everyp">Meta-Node: every?(f, list)</a>, <a class="indexterm" href="#meta-node-somep">Meta-Node: some?(f, list)</a>, <a class="indexterm" href="#meta-node-not-anyp">Meta-Node: not-any?(f, list)</a>, <a class="indexterm" href="#meta-node-not-everyp">Meta-Node: not-every?(f, list)</a>, <a class="indexterm" href="#meta-node-string-at">Meta-Node: string-at(string, index)</a>, <a class="indexterm" href="#meta-node-string-concat">Meta-Node: string-concat(string, str1, str2)</a>, <a class="indexterm" href="#meta-node-string-to-list">Meta-Node: string-&gt;list(string)</a>, <a class="indexterm" href="#meta-node-list-to-string">Meta-Node: list-&gt;string(list)</a>, <a class="indexterm" href="#meta-node-format">Meta-Node: format(string, ..(args))</a>, <a class="indexterm" href="#_meta_node_literal_apply_f_xs_literal">Meta-Node: apply(f, ..(xs))</a>, <a class="indexterm" href="#meta-node-nodep">Meta-Node: node?(thing)</a>, <a class="indexterm" href="#_meta_node_literal_find_node_node_module_literal">Meta-Node: find-node(node, :(module))</a>, <a class="indexterm" href="#_meta_node_literal_get_attribute_node_attribute_literal">Meta-Node: get-attribute(node, attribute)</a>, <a class="indexterm" href="#meta-node-Pattern">Meta-Node: Pattern(condition, :(binding))</a>, <a class="indexterm" href="#meta-node-get-matcher">Meta-Node: get-matcher(node)</a>, <a class="indexterm" href="#meta-node-make-pattern">Meta-Node: make-pattern(place, pattern)</a>, <a class="indexterm" href="#meta-node-combine-conditions">Meta-Node: combine-conditions(c1, c2)</a>, <a class="indexterm" href="#meta-node-conditionalize-bindings">Meta-Node: conditionalize-bindings(condition, bindings)</a>, <a class="indexterm" href="#_meta_node_fail_match_condition">Meta-Node: fail-match(condition)</a>, <a class="indexterm" href="#_meta_node_make_match_bind_src_target">Meta-Node: make-match-bind(src, target)</a>, <a class="indexterm" href="#meta-node-make-pattern-declarations">Meta-Node: make-pattern-declarations(pattern)</a></dt><dt id="ientry-idm30278047232">Meta-Node Definition, <a class="indexterm" href="#_defining_meta_nodes">Defining Meta-Nodes</a>, <a class="indexterm" href="#_optional_arguments">Optional Arguments</a>, <a class="indexterm" href="#_rest_arguments">Rest Arguments</a>, <a class="indexterm" href="#local_nodes">Local Nodes</a>, <a class="indexterm" href="#_self_node">Self Node</a>, <a class="indexterm" href="#_nested_meta_nodes">Nested Meta-Nodes</a></dt><dd><dl><dt>Meta-Nodes, <a class="indexterm" href="#_defining_meta_nodes">Defining Meta-Nodes</a></dt></dl></dd><dt id="ientry-idm30277855584">Meta-Node References</dt><dd><dl><dt>Meta-Nodes, <a class="indexterm" href="#_higher_order_meta_nodes">Higher-Order Meta-Nodes</a></dt></dl></dd><dt id="ientry-idm30278062208">Meta-Nodes, <a class="indexterm" href="#_defining_meta_nodes">Defining Meta-Nodes</a>, <a class="indexterm" href="#_recursive_meta_nodes">Recursive Meta-Nodes</a>, <a class="indexterm" href="#_outer_node_references">Outer Node References</a>, <a class="indexterm" href="#_external_meta_nodes">External Meta-Nodes</a>, <a class="indexterm" href="#_higher_order_meta_nodes">Higher-Order Meta-Nodes</a>, <a class="indexterm" href="#_macro_nodes">Macro Nodes</a>, <a class="indexterm" href="#_instances_as_targets">Instances as Targets</a>, <a class="indexterm" href="#_target_node_transforms">Target Node Transforms</a></dt><dd><dl><dt>Macro Nodes, <a class="indexterm" href="#_macro_nodes">Macro Nodes</a></dt><dt>Meta-Node Definition, <a class="indexterm" href="#_optional_arguments">Optional Arguments</a>, <a class="indexterm" href="#_rest_arguments">Rest Arguments</a>, <a class="indexterm" href="#local_nodes">Local Nodes</a>, <a class="indexterm" href="#_self_node">Self Node</a>, <a class="indexterm" href="#_nested_meta_nodes">Nested Meta-Nodes</a></dt><dt>Nodes</dt><dd><dl><dt>Semantics, <a class="indexterm" href="#_meta_nodes">Meta-Nodes</a></dt></dl></dd><dt>Semantics, <a class="indexterm" href="#_meta_nodes">Meta-Nodes</a></dt></dl></dd><dt id="ientry-idm30277553472">module</dt><dd><dl><dt>Standard Library, <a class="indexterm" href="#_core_module">Core Module</a></dt></dl></dd><dt id="ientry-idm30277703840">Module Creation</dt><dd><dl><dt>Modules, <a class="indexterm" href="#_creating_modules">Creating Modules</a></dt></dl></dd><dt id="ientry-idm30277685840">Module Pseudo-Nodes</dt><dd><dl><dt>Modules, <a class="indexterm" href="#_module_pseudo_nodes">Module Pseudo-Nodes</a></dt></dl></dd><dt id="ientry-idm30277709248">Modules, <a class="indexterm" href="#_modules">Modules</a>, <a class="indexterm" href="#_creating_modules">Creating Modules</a>, <a class="indexterm" href="#_module_pseudo_nodes">Module Pseudo-Nodes</a>, <a class="indexterm" href="#_importing_nodes">Importing Nodes</a>, <a class="indexterm" href="#_direct_references">Direct References</a></dt><dd><dl><dt>Infix Operators, <a class="indexterm" href="#_registering_infix_operators">Registering Infix Operators</a></dt><dt>Operators, <a class="indexterm" href="#_operator_table">Operator Table</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>N</h3><dl><dt id="ientry-idm30276594960">NaN?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-nanp">Meta-Node: NaN?(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277933408">Nested Meta-Nodes</dt><dd><dl><dt>Meta-Nodes</dt><dd><dl><dt>Meta-Node Definition, <a class="indexterm" href="#_nested_meta_nodes">Nested Meta-Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30280026896">Nested Patterns</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Pattern Matching, <a class="indexterm" href="#_nested_patterns">Nested Patterns</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277207152">No-Value</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Failure Type, <a class="indexterm" href="#node-no-value">Failure Type Node: No-Value</a></dt><dt>Node, <a class="indexterm" href="#node-no-value">Failure Type Node: No-Value</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277199376">No-Value!</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Node, <a class="indexterm" href="#node-no-value">Failure Type Node: No-Value</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277204288">Node, <a class="indexterm" href="#node-no-value">Failure Type Node: No-Value</a>, <a class="indexterm" href="#node-type-error">Failure Type Node: Type-Error</a>, <a class="indexterm" href="#node-index-out-bounds">Failure Type Node: Index-Out-Bounds</a>, <a class="indexterm" href="#node-invalid-integer">Failure Type Node: Invalid-Integer</a>, <a class="indexterm" href="#node-invalid-real">Failure Type Node: Invalid-Real</a>, <a class="indexterm" href="#node-arity-error">Failure Type Node: Arity-Error</a>, <a class="indexterm" href="#node-Empty">Node: Empty</a>, <a class="indexterm" href="#_node_literal_empty_literal">Node: Empty!</a>, <a class="indexterm" href="#match-fail">Failure Type Node: Match-Fail</a></dt><dt id="ientry-idm30278532032">Node Creation</dt><dd><dl><dt>Nodes, <a class="indexterm" href="#_declaring_nodes">Declaring Nodes</a></dt></dl></dd><dt id="ientry-idm30277822480">Node Expression Representation</dt><dd><dl><dt>Meta-Nodes</dt><dd><dl><dt>Macro Nodes, <a class="indexterm" href="#_macro_nodes">Macro Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278685520">Node Lists</dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Nodes, <a class="indexterm" href="#_node_lists">Node Lists</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277791344">Node References, <a class="indexterm" href="#node_references">Node References</a></dt><dd><dl><dt>Macro Nodes, <a class="indexterm" href="#node_references">Node References</a></dt></dl></dd><dt id="ientry-idm30278137568">Node States, <a class="indexterm" href="#_node_states">Node States</a></dt><dd><dl><dt>Nodes</dt><dd><dl><dt>Bindings, <a class="indexterm" href="#_node_states">Node States</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276210576">node?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-nodep">Meta-Node: node?(thing)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278796400">Nodes, <a class="indexterm" href="#atom_nodes">Atom Nodes</a>, <a class="indexterm" href="#_functors">Functors</a>, <a class="indexterm" href="#_node_lists">Node Lists</a>, <a class="indexterm" href="#_nodes">Nodes</a>, <a class="indexterm" href="#_declaring_nodes">Declaring Nodes</a>, <a class="indexterm" href="#_evaluation_strategy">Evaluation Strategy</a>, <a class="indexterm" href="#_input_nodes">Input Nodes</a>, <a class="indexterm" href="#_attributes">Attributes</a>, <a class="indexterm" href="#_subnodes">Subnodes</a></dt><dd><dl><dt>Bindings, <a class="indexterm" href="#_declaring_bindings">Declaring Bindings</a>, <a class="indexterm" href="#_propagation_of_changes">Propagation of Changes</a>, <a class="indexterm" href="#_contexts">Contexts</a>, <a class="indexterm" href="#_two_way_bindings">Two-Way Bindings</a>, <a class="indexterm" href="#literal_bindings">Literal Bindings</a>, <a class="indexterm" href="#conditional_bindings">Conditional Bindings</a>, <a class="indexterm" href="#_node_states">Node States</a></dt><dt>Contexts, <a class="indexterm" href="#explicit_contexts">Explicit Contexts</a></dt><dt>Semantics, <a class="indexterm" href="#_nodes">Nodes</a>, <a class="indexterm" href="#_meta_nodes">Meta-Nodes</a></dt><dt>Syntax, <a class="indexterm" href="#_syntax">Syntax</a></dt></dl></dd><dt id="ientry-idm30276844272">not</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-not">Meta-Node: not(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276281680">not-any?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-not-anyp">Meta-Node: not-any?(f, list)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276266288">not-every?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-not-everyp">Meta-Node: not-every?(f, list)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276445360">nth</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-nth">Meta-Node: nth(list, n)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278670992">Numbers, <a class="indexterm" href="#_numbers">Numbers</a></dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Literals, <a class="indexterm" href="#_numbers">Numbers</a></dt></dl></dd></dl></dd></dl></div><div class="indexdiv"><h3>O</h3><dl><dt id="ientry-idm30278568640">Observer</dt><dd><dl><dt>Nodes, <a class="indexterm" href="#_nodes">Nodes</a></dt></dl></dd><dt id="ientry-idm30278703136">Operator Associativity</dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Infix Operators, <a class="indexterm" href="#_functors">Functors</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278706880">Operator Precedence</dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Infix Operators, <a class="indexterm" href="#_functors">Functors</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277594688">Operator Table</dt><dd><dl><dt>Core Module, <a class="indexterm" href="#_operator_table_2">Operator Table</a></dt><dt>Modules</dt><dd><dl><dt>Operators, <a class="indexterm" href="#_operator_table">Operator Table</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277591824">Operators, <a class="indexterm" href="#_operator_table">Operator Table</a></dt><dt id="ientry-idm30279734608">Optimizations, <a class="indexterm" href="#_optimizations">Optimizations</a>, <a class="indexterm" href="#_coalescing">Coalescing</a></dt><dt id="ientry-idm30278003584">Optional Arguments</dt><dd><dl><dt>Meta-Nodes</dt><dd><dl><dt>Meta-Node Definition, <a class="indexterm" href="#_optional_arguments">Optional Arguments</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276867760">or</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-or">Meta-Node: or(x, y)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277902000">Outer Node References, <a class="indexterm" href="#_outer_node_references">Outer Node References</a></dt><dd><dl><dt>Meta-Nodes, <a class="indexterm" href="#_outer_node_references">Outer Node References</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>P</h3><dl><dt id="ientry-idm30279925728">Pattern</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-Pattern">Meta-Node: Pattern(condition, :(binding))</a></dt></dl></dd></dl></dd><dt id="ientry-idm30280053328">Pattern Matching, <a class="indexterm" href="#pattern_matching">Pattern Matching</a>, <a class="indexterm" href="#_nested_patterns">Nested Patterns</a>, <a class="indexterm" href="#_constant_patterns">Constant Patterns</a>, <a class="indexterm" href="#matchers">Matchers</a>, <a class="indexterm" href="#_module_core_patterns">Module: core/patterns</a></dt><dd><dl><dt>Core Module, <a class="indexterm" href="#pattern_matching">Pattern Matching</a></dt></dl></dd><dt id="ientry-idm30279931328">Pattern Matching Utilities</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Pattern Matching, <a class="indexterm" href="#_module_core_patterns">Module: core/patterns</a></dt></dl></dd></dl></dd><dt id="ientry-idm30279984592">Pattern Object</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Pattern Matching, <a class="indexterm" href="#matchers">Matchers</a></dt></dl></dd></dl></dd></dl></div><div class="indexdiv"><h3>R</h3><dl><dt id="ientry-idm30276743328">real</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-real">Meta-Node: real(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276632368">real?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-realp">Meta-Node: real?(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278657360">Reals, <a class="indexterm" href="#_numbers">Numbers</a></dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Numbers, <a class="indexterm" href="#_numbers">Numbers</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277925184">Recursive Meta-Nodes</dt><dd><dl><dt>Meta-Nodes, <a class="indexterm" href="#_recursive_meta_nodes">Recursive Meta-Nodes</a></dt></dl></dd><dt id="ientry-idm30277583088">Registering Infix Operators</dt><dd><dl><dt>Modules</dt><dd><dl><dt>Infix Operators, <a class="indexterm" href="#_registering_infix_operators">Registering Infix Operators</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277987056">Rest Arguments</dt><dd><dl><dt>Meta-Nodes</dt><dd><dl><dt>Meta-Node Definition, <a class="indexterm" href="#_rest_arguments">Rest Arguments</a></dt></dl></dd></dl></dd></dl></div><div class="indexdiv"><h3>S</h3><dl><dt id="ientry-idm30276827680">Selection Operators</dt><dd><dl><dt>Core Module, <a class="indexterm" href="#_selection_operators">Selection Operators</a></dt></dl></dd><dt id="ientry-idm30277955232">Self Node</dt><dd><dl><dt>Meta-Nodes</dt><dd><dl><dt>Meta-Node Definition, <a class="indexterm" href="#_self_node">Self Node</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278571872">Semantics, <a class="indexterm" href="#_nodes">Nodes</a>, <a class="indexterm" href="#_meta_nodes">Meta-Nodes</a></dt><dt id="ientry-idm30276297024">some?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-somep">Meta-Node: some?(f, list)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278510432">Special Operator</dt><dd><dl><dt>Attributes, <a class="indexterm" href="#_attributes">Attributes</a></dt><dt>Bindings, <a class="indexterm" href="#_declaring_bindings">Declaring Bindings</a></dt><dt>Contexts, <a class="indexterm" href="#explicit_contexts">Explicit Contexts</a></dt><dt>External Meta-Nodes, <a class="indexterm" href="#_external_meta_nodes">External Meta-Nodes</a></dt><dt>Literal Symbols, <a class="indexterm" href="#literal-symbols">Literal Symbols</a></dt><dt>Meta-Node Definition, <a class="indexterm" href="#_defining_meta_nodes">Defining Meta-Nodes</a></dt><dt>Modules, <a class="indexterm" href="#_creating_modules">Creating Modules</a>, <a class="indexterm" href="#_module_pseudo_nodes">Module Pseudo-Nodes</a>, <a class="indexterm" href="#_importing_nodes">Importing Nodes</a>, <a class="indexterm" href="#_direct_references">Direct References</a></dt><dt>Node References, <a class="indexterm" href="#node_references">Node References</a></dt><dt>Node States, <a class="indexterm" href="#_node_states">Node States</a></dt><dt>Outer Node References, <a class="indexterm" href="#_outer_node_references">Outer Node References</a></dt><dt>Subnodes, <a class="indexterm" href="#_subnodes">Subnodes</a></dt></dl></dd><dt id="ientry-idm30277577696">Special Operators</dt><dd><dl><dt>Infix Operators, <a class="indexterm" href="#_registering_infix_operators">Registering Infix Operators</a></dt></dl></dd><dt id="ientry-idm30277922976">Stack Usage</dt><dd><dl><dt>Meta-Nodes, <a class="indexterm" href="#_recursive_meta_nodes">Recursive Meta-Nodes</a></dt></dl></dd><dt id="ientry-idm30277556096">Standard Library, <a class="indexterm" href="#_core_module">Core Module</a></dt><dt id="ientry-idm30276716736">string</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-string">Meta-Node: string(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30288716576">string-&gt;list</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-string-to-list">Meta-Node: string-&gt;list(string)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276247360">string-at</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-string-at">Meta-Node: string-at(string, index)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30280063760">string-concat</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-string-concat">Meta-Node: string-concat(string, str1, str2)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276619680">string?</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-stringp">Meta-Node: string?(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278624896">Strings, <a class="indexterm" href="#_strings">Strings</a></dt><dd><dl><dt>Core Module, <a class="indexterm" href="#_strings_2">Strings</a></dt><dt>Syntax</dt><dd><dl><dt>Literals, <a class="indexterm" href="#_strings">Strings</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278175520">Subnodes, <a class="indexterm" href="#_subnodes">Subnodes</a></dt><dd><dl><dt>Nodes, <a class="indexterm" href="#_subnodes">Subnodes</a></dt></dl></dd><dt id="ientry-idm30278752064">Symbols</dt><dd><dl><dt>Syntax</dt><dd><dl><dt>Nodes, <a class="indexterm" href="#atom_nodes">Atom Nodes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278795248">Syntax, <a class="indexterm" href="#_syntax">Syntax</a>, <a class="indexterm" href="#_literals">Literals</a></dt><dd><dl><dt>Functors, <a class="indexterm" href="#_functors">Functors</a></dt><dt>Infix Operators, <a class="indexterm" href="#_functors">Functors</a></dt><dt>Literals, <a class="indexterm" href="#_numbers">Numbers</a>, <a class="indexterm" href="#_strings">Strings</a></dt><dt>Nodes, <a class="indexterm" href="#atom_nodes">Atom Nodes</a>, <a class="indexterm" href="#_functors">Functors</a>, <a class="indexterm" href="#_node_lists">Node Lists</a></dt><dt>Numbers, <a class="indexterm" href="#_numbers">Numbers</a></dt><dt>Reals, <a class="indexterm" href="#_numbers">Numbers</a></dt><dt>Strings, <a class="indexterm" href="#_strings">Strings</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>T</h3><dl><dt id="ientry-idm30276538912">tail</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-tail">Meta-Node: tail(list)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277724832">Target Node Transform</dt><dd><dl><dt>Instance as Target</dt><dd><dl><dt>Meta-Nodes, <a class="indexterm" href="#_target_node_transforms">Target Node Transforms</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277761360">target-node</dt><dd><dl><dt>Attribute</dt><dd><dl><dt>Instance as Target, <a class="indexterm" href="#_instances_as_targets">Instances as Targets</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277720960">target-transform</dt><dd><dl><dt>Attribute</dt><dd><dl><dt>Instance as Target, <a class="indexterm" href="#_target_node_transforms">Target Node Transforms</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276700320">to-int</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-to-int">Meta-Node: to-int(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276681968">to-real</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-to-real">Meta-Node: to-real(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276663520">to-string</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Meta-Node, <a class="indexterm" href="#meta-node-to-string">Meta-Node: to-string(x)</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278389728">Two-Way Bindings</dt><dd><dl><dt>Nodes</dt><dd><dl><dt>Bindings, <a class="indexterm" href="#_two_way_bindings">Two-Way Bindings</a></dt></dl></dd></dl></dd><dt id="ientry-idm30276776000">Type Checks</dt><dd><dl><dt>Core Module, <a class="indexterm" href="#_types">Types</a></dt></dl></dd><dt id="ientry-idm30276778336">Type Conversions</dt><dd><dl><dt>Core Module, <a class="indexterm" href="#_types">Types</a></dt></dl></dd><dt id="ientry-idm30277192032">Type-Error</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Failure Type, <a class="indexterm" href="#node-type-error">Failure Type Node: Type-Error</a></dt><dt>Node, <a class="indexterm" href="#node-type-error">Failure Type Node: Type-Error</a></dt></dl></dd></dl></dd><dt id="ientry-idm30277184288">Type-Error!</dt><dd><dl><dt>Core Module</dt><dd><dl><dt>Node, <a class="indexterm" href="#node-type-error">Failure Type Node: Type-Error</a></dt></dl></dd></dl></dd></dl></div><div class="indexdiv"><h3>U</h3><dl><dt id="ientry-idm30277345232">Utilities, <a class="indexterm" href="#_failures_2">Failures</a></dt></dl></div><div class="indexdiv"><h3>V</h3><dl><dt id="ientry-idm30278487344">Value Propagation</dt><dd><dl><dt>Nodes</dt><dd><dl><dt>Bindings, <a class="indexterm" href="#_propagation_of_changes">Propagation of Changes</a></dt></dl></dd></dl></dd><dt id="ientry-idm30278302656">Value Type, <a class="indexterm" href="#_failures">Failures</a>, <a class="indexterm" href="#_explicit_failures_and_failure_types">Explicit Failures and Failure Types</a>, <a class="indexterm" href="#_subnodes">Subnodes</a></dt></dl></div></div></div></div></body></html>